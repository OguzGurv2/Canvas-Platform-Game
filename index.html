<!DOCTYPE html5>
<!DOCTYPE html>
<meta charset="utf-8">
<title>Platform Jumper</title>

<body>
    <section class="container">      
        <div class="interface">
            <p class="score">Score: <a>0</a></p>
            <p class="time">Time: <a>0s</a></p>
        </div>
        <canvas id="game-canvas" width="400" height="300"></canvas>     
    </section>
</body>

<style>
    @import url('https://fonts.googleapis.com/css2?family=REM:wght@800&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');

    body {
        font-family: 'Raleway', sans-serif;
        font-family: 'REM', sans-serif;
        padding: 0;
        margin: 0;
        border: 0;
    }

    :root {
        --text: #0b090a;
        --background: #f8f6f7;
        --primary: #678378;
        --secondary: #e0d7db;
        --accent: #678378;
    }

    .container {
        width: 100vw;
        height: 100vh;
        display: flex;
        justify-content: center;
    }

    canvas {
        background-color: var(--secondary);
        position: static;
    }

    .interface {
        margin: 10px 10px;
        width: 100px;
        height: 50px;
        color: var(--primary);
        display: flex;
        flex-direction: column;
        background: none;  
        position: absolute;
        left: 250px;  
    }

    .interface p {
        margin-block: 5px;
    }
    
    </style>

<script>
    const canvas = document.getElementById('game-canvas');
    const ctx = canvas.getContext("2d");
    
    const primary = getComputedStyle(document.documentElement).getPropertyValue('--primary');
    const text = getComputedStyle(document.documentElement).getPropertyValue('--text');
    
    const player = {
        x: (canvas.width - 10) / 2,
        y: 190,
        width: 10,
        height: 10,
        speedX: 0,
        speedY: 0,
        isJumping: false
    };  
    
    const camera = {
        x: 0,
        y: 0,
        width: canvas.width,
        height: canvas.height,
    };

    const moveStrength = 2;
    const jumpStrength = 3;
    const jumpDuration = 10; 
    let jumpFrame = 0; 
    
    const gravity = 0.1;
    
    const platforms = [
        { x: (canvas.width - 25) / 2, y: 200, width: 25, height: 3 },
        { x: (canvas.width - 250) / 2, y: 150, width: 25, height: 3 }
    ];
    
    const keys = {};
    window.addEventListener('keydown', (event) => {
        keys[event.key] = true;
    });
    
    window.addEventListener('keyup', (event) => {
        keys[event.key] = false;
    });
    
    function checkCollision(rect1, rect2) {
        return rect1.x < rect2.x + rect2.width &&
        rect1.x + rect1.width > rect2.x &&
        rect1.y < rect2.y + rect2.height &&
        rect1.y + rect1.height > rect2.y;
    };

    function restartGame() {
        player.x = (canvas.width - 10) / 2;
        player.y = 190;
    };
    
    function update() {
        
        player.speedY += gravity;
        
        player.x += player.speedX;
        player.y += player.speedY;
        
        if (keys['ArrowLeft']) {
            player.speedX = -moveStrength;
        } else if (keys['ArrowRight']) {
            player.speedX = moveStrength;
        } else {
            player.speedX = 0;
        }

        platforms.forEach(platform => {
            if (checkCollision(player, platform)) {
                player.isJumping = true;
                jumpFrame = 0;
                player.speedY = -jumpStrength;
            }
        });

        if (player.isJumping && jumpFrame < jumpDuration) {
            player.speedY = -jumpStrength;
            jumpFrame++;
        } else {
            jumpFrame = 0;
            player.isJumping = false;
        }

        camera.y = player.y - canvas.height / 2;

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = text;
        ctx.fillRect(player.x - camera.x, player.y - camera.y, player.width, player.height);

        ctx.fillStyle = primary;
        platforms.forEach(platform => {
            ctx.fillRect(platform.x - camera.x, platform.y - camera.y, platform.width, platform.height);
        });

        if (player.y + player.height > canvas.height) {
            restartGame();
        }

        requestAnimationFrame(update);
    }

    update();

</script>
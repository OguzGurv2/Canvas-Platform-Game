<!DOCTYPE html5>
<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Arena Jumper</title>

<body>
    <div id="container">
        <canvas id="game-canvas"></canvas>     
        <div id="interface" class="none">
             <div id="health">
                <svg id="svg" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">
                    <path id="heart-icon" class="none" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/>
                </svg>
            </div>
            <p id="score" class="none">0</p>
        </div>
        <button id="start-button">Tap to Start</button>
    </div>
</body>

<style>

    @import url('https://fonts.googleapis.com/css2?family=REM:wght@800&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');

    * {
        box-sizing: border-box;
        padding: 0;
        margin: 0;
    }

    body {
        background: black;
    }

    :root {
        --text: #0b090a;
        --background: #f8f6f7;
        --primary: #678378;
        --secondary: #e0d7db;
        --accent: #678378;
    }

    #container {
        width: 100%;
        height: 100%;
        display: grid;
        align-items: center;
        justify-content: center;
    }   

    #canvas-container {
        width: fit-content;
        height: fit-content;
    }

    canvas {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        max-width: 100%;
        max-height: 100%;
        z-index: 0;
        width: auto;
        background-color: var(--background);
    }
    
    svg {
        width: 100%;
    }

    #interface {
        width: 100px;
        height: 50px;
        color: black;
        flex-direction: column;
        background: none;  
        z-index: 1;
        position: relative;
        font-size: small;
    }

    #score {
        font-family: 'REM', sans-serif;
        font-size: small;
        padding-left: 3%;
    }

    #health {
        padding-right: 75%;
    }

    #start-button {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: var(--primary);
        border: none;
        background: none;
        font-family: 'REM', sans-serif;
        font-size: xx-large;
        width: 100%;
        height: 100%;
        z-index: 2;
    }

    .interface p {
        margin-block: 5px;
    }

    .none {
        display: none;
    }

    @media (max-width: 376px) {
        #score {
            padding-left: 3%;
            font-size: smaller;
        }

        #health {
            padding-right: 70%;
            font-size: smaller;
        }

    }

    @media (min-width: 1024px) {
        #score {
            padding-left: 2%;
            font-size: small;
        }

        #health {
            padding-right: 70%;
            font-size: small;
        }
    }

    @media (min-width: 1280px) {
        #score {
            padding-left: 2%;
            font-size: small;
        }

        #health {
            padding-right: 75%;
            font-size: small;
        }
    }

</style>

<script>
    window.addEventListener('load', function(){

        //#region Globals

        const canvas = document.querySelector('#game-canvas');
        const ctx = canvas.getContext("2d");

        const svg = document.querySelector('#svg');

        const startButton = document.querySelector('#start-button');
        const interface = document.querySelector('#interface');
        const scoreUI = document.querySelector('#score');
        const heartIcon = document.querySelector('#heart-icon');

        const primary = getComputedStyle(document.documentElement).getPropertyValue('--primary');
        const text = getComputedStyle(document.documentElement).getPropertyValue('--text');
        
        canvas.height = 800;
        canvas.width = 400;
        
        interface.style.height = `${canvas.clientHeight} `;
        interface.style.width = `${canvas.clientWidth} `;

        let jumpScore = 0;
        let minValue;
        var lowestPlatform;
        let updatePlatform;
        let runOnce = true;

        //#endregion

        //#region World 

        class World {
            constructor(){
                this.gravity = 0.1;
                this.trambolineUsed = false;
                this.dragOffsetX = 0;
                this.isRunning = false;
                this.score = 0;
                this.coinCount = 0;
                this.enemyCount = 0;
                this.lifeLeft = 3;
                this.radius = Math.min(canvas.width, canvas.height) * 0.025;
            };
            update(){
                jumpScore = Math.floor((firstPlatformY - minValue) / 10);
                world.score = jumpScore + world.coinCount * 10 + world.enemyCount * 10;
            };
        };

        const world = new World();

        function updateWorld() {
            world.update();
        };

        //#endregion

        //#region Background

        let backgroundsArray = [];        
        let indexParam = -1;
        const firstBackgroundY = -1600;

        class Background {
            constructor(){
                indexParam++;

                this.nextBackgroundCreated = false;
                this.id = indexParam;
                this.y = this.id * firstBackgroundY;
                this.height = canvas.height * 2;
                this.width = canvas.width;
            }

            //#region drawBackground

             draw(){
                const svgBackground = `
                <svg enable-background="new 0 0 800 3200" version="1.1" viewBox="0 0 800 3200" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                    <style type="text/css">
                        .st0{fill:#B1F2ED;}
                        .st1{fill:#FFFFFF;}
                    </style>
                    <path class="st0" d="m183.8 729.5c-0.6 4-2 7.7-4.1 11 0.2-4.1 1.7-7.9 4.1-11z"/>
                    <path class="st0" d="m711.3 2715.2c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm-121.2-2186.5c0.7 1 1.4 2 2.2 3 0.7-0.8 1.4-1.5 2.1-2.4-1.5-0.1-2.9-0.3-4.3-0.6zm121.2 2186.5c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm-121.2-2186.5c0.7 1 1.4 2 2.2 3 0.7-0.8 1.4-1.5 2.1-2.4-1.5-0.1-2.9-0.3-4.3-0.6zm-356.1-278.6c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm356.1 278.6c0.7 1 1.4 2 2.2 3 0.7-0.8 1.4-1.5 2.1-2.4-1.5-0.1-2.9-0.3-4.3-0.6zm121.2 2186.5c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm-477.3-2465.1c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm356.1 278.6c0.7 1 1.4 2 2.2 3 0.7-0.8 1.4-1.5 2.1-2.4-1.5-0.1-2.9-0.3-4.3-0.6zm123.3-427.1c3.1 0 6.1 0.6 8.8 1.8 5-6 12.6-9.7 21-9.7h1.4c4.7-17.7 20.8-30.7 39.9-30.7 5.6 0 10.9 1.1 15.8 3.1v-61.7h-798.8v687.7c7.5-12.9 21.5-21.6 37.5-21.6 5 0 9.8 0.9 14.3 2.4 9.7-13.6 25.6-22.5 43.6-22.5 25.8 0 47.4 18.3 52.4 42.6 1.1-0.1 2.3-0.2 3.4-0.2 6.7 0 12.9 2.1 18 5.7 2.8-1.1 5.8-1.8 8.9-1.8 12.9 0 23.4 10.5 23.4 23.4 0 1.1-0.1 2.2-0.2 3.2 2 0.6 3.9 1.5 5.6 2.7 0.7-1.5 1.6-2.9 2.8-4.1 5.4-5.4 14.2-5.4 19.6 0s5.4 14.2 0 19.6c-4.1 4.1-10.1 5.1-15.2 3-1.7 8.3-9 14.6-17.8 14.6-9.1 0-16.7-6.7-18-15.5-0.1-0.9-0.2-1.8-0.2-2.8v-0.5c-0.6 1.1-1.4 2.1-2.1 3.1-5.8 7.4-14.7 12.1-24.8 12.1-8.9 0-17-3.7-22.7-9.7-9.1 7.2-20.6 11.5-33.1 11.5-11.4 0-21.9-3.6-30.6-9.7-7.5 6.1-17 9.7-27.3 9.7-7 0-13.7-1.7-19.5-4.7-4.8 3-10.4 4.7-16.5 4.7h-1.5v615.7c37.9 0 69.9 25.6 79.6 60.5 9.5-7.7 21.6-12.4 34.8-12.4 27.7 0 50.6 20.4 54.4 47 11.6 8.3 19.2 21.9 19.2 37.2 0 25.3-20.5 45.8-45.7 45.8-14.4 0-27.3-6.7-35.7-17.1-10 10.5-24.2 17.1-39.9 17.1-15.8 0-30-6.7-40.1-17.3-8.3 2.8-17.3 4.4-26.6 4.4v1388.3c1.8-0.1 3.6-0.1 5.4-0.1 6 0 11.8 0.4 17.3 1.1 7.2-12.3 24.9-21 45.7-21 27.1 0 49.1 14.8 49.1 33.2v0.2c1.5-0.1 3.1-0.2 4.7-0.2 20.7 0 38.4 8.6 45.6 20.9 1.1-0.2 2.3-0.3 3.5-0.3 10.6 0 19.2 8.6 19.2 19.2s-8.6 19.2-19.2 19.2c-4.5 0-8.7-1.6-12-4.2-9 7-22.3 11.5-37.1 11.5-1.6 0-3.3-0.1-4.9-0.2-9 7.6-22.8 12.4-38.3 12.4-18.5 0-34.6-6.9-42.9-17.1-9.3 2.3-19.7 3.6-30.7 3.6-1.8 0-3.6 0-5.4-0.1v195.4h798.9v-1307.1c-16.5 0-31.7-5.7-43.8-15.2-7.6 8-18.3 12.9-30.2 12.9-13.4 0-25.3-6.3-33-16.1-0.9 0.1-1.9 0.1-2.9 0.1h-0.3c-1.8 11.6-11.8 20.6-23.9 20.6-11.7 0-21.5-8.3-23.7-19.4-6.7 2.8-14.7 1.5-20.2-4-7.2-7.2-7.2-18.8 0-26s18.8-7.2 26 0c1.6 1.6 2.9 3.5 3.8 5.4 2.2-1.6 4.7-2.8 7.4-3.6-0.2-1.4-0.3-2.8-0.3-4.3 0-17.2 14-31.2 31.2-31.2 4.2 0 8.2 0.8 11.9 2.4 6.8-4.8 15-7.6 23.9-7.6 1.5 0 3 0.1 4.5 0.3 6.7-32.3 35.2-56.6 69.5-56.7v-1608.2c-0.8 0.3-1.7 0.7-2.5 0.9-4.2 1.4-8.6 2.2-13.3 2.2-7.7 0-14.9-2.1-21-5.8-5 5.5-12.2 8.9-20.3 8.9-6.2 0-12-2.1-16.6-5.6-3.7 2.7-8.3 4.3-13.3 4.3-12.6 0-22.9-10.2-22.9-22.9 0.1-12.5 10.4-22.7 23-22.7zm-317.6 364.1c5 0 9.7 1 14 2.8 7.9-9.4 19.9-15.4 33.2-15.4 0.7 0 1.4 0 2.2 0.1 7.4-27.9 32.8-48.5 63-48.5 30 0 55.2 20.2 62.8 47.8 7.5-6.2 17.1-9.8 27.5-9.8 21.9 0 39.9 16.1 43 37.1 9.1 6.6 15.1 17.3 15.1 29.4 0 19.9-16.2 36.1-36.1 36.1-11.4 0-21.6-5.3-28.2-13.5-7.9 8.3-19.1 13.5-31.5 13.5-12.5 0-23.7-5.3-31.6-13.7-6.6 2.2-13.7 3.5-21 3.5-12.1 0-23.5-3.3-33.2-9.1-7.9 8.6-19.3 14-32 14-9.8 0-18.9-3.3-26.2-8.8-5.9 4.2-13.1 6.7-20.9 6.7-20 0-36.1-16.2-36.1-36.1s16.1-36.1 36-36.1zm-34.6 832.6c2.3 0 4.4 0.6 6.2 1.6 5.1-7.3 16.2-12.4 29-12.4 0-12 14.3-21.7 32-21.7 12 0 22.4 4.5 27.9 11 6.1-1.5 12.9-2.4 20.2-2.4 3.9 0 7.7 0.2 11.3 0.7 4.7-8 16.3-13.7 29.8-13.7 17.7 0 32.1 9.7 32.1 21.7v0.1c1-0.1 2-0.1 3-0.1 13.5 0 25.1 5.7 29.8 13.6 0.7-0.1 1.5-0.2 2.3-0.2 6.9 0 12.6 5.6 12.6 12.6 0 6.9-5.6 12.6-12.6 12.6-3 0-5.7-1-7.8-2.7-5.9 4.6-14.6 7.5-24.2 7.5-1.1 0-2.1 0-3.2-0.1-5.9 5-14.9 8.1-25 8.1-12.1 0-22.6-4.5-28-11.2-6.1 1.5-12.9 2.3-20 2.3-8.3 0-16.1-1.1-22.9-3.1-5.9 5-15 8.3-25.2 8.3-5.8 0-11.3-1.1-16-2.9-4.7 1.8-10.2 2.9-16 2.9-11.5 0-21.6-4.1-27.2-10.2-2.2 1.8-4.9 2.8-8 2.8-6.9 0-12.6-5.6-12.6-12.6-0.1-6.9 5.5-12.5 12.5-12.5zm-145.8-1037.7c-7.9 0-15-3.3-20-8.7-4.2 1.4-8.6 2.2-13.3 2.2-7.7 0-14.9-2.1-21-5.8-5 5.5-12.2 8.9-20.3 8.9-6.2 0-12-2.1-16.6-5.6-3.7 2.7-8.3 4.2-13.3 4.2-12.6 0-22.9-10.2-22.9-22.9 0-12.6 10.2-22.9 22.9-22.9 3.1 0 6.1 0.6 8.8 1.8 5-6 12.6-9.7 21-9.7h1.4c4.7-17.7 20.8-30.7 39.9-30.7 19 0 35 12.8 39.8 30.3 4.7-3.9 10.8-6.2 17.4-6.2 13.8 0 25.3 10.2 27.2 23.5 5.8 4.2 9.6 10.9 9.6 18.6 0 12.6-10.2 22.9-22.9 22.9-7.2 0-13.7-3.4-17.9-8.6-4.8 5.4-11.9 8.7-19.8 8.7zm-105.1 1703.3c-4.7 1.9-10.2 2.9-16 2.9-11.5 0-21.6-4.1-27.2-10.2-2.2 1.8-5 2.9-8 2.9-6.9 0-12.5-5.6-12.5-12.6s5.6-12.6 12.5-12.6c2.3 0 4.4 0.6 6.2 1.6 5.1-7.4 16.2-12.5 29-12.5 0-12 14.4-21.7 32.1-21.7 12 0 22.4 4.4 27.9 11 6.1-1.5 13-2.4 20.2-2.4 3.9 0 7.7 0.2 11.3 0.7 4.7-8 16.3-13.7 29.8-13.7 17.7 0 32 9.7 32 21.7v0.1c1-0.1 2-0.1 3-0.1 13.5 0 25.1 5.7 29.8 13.6 0.7-0.1 1.5-0.2 2.3-0.2 6.9 0 12.5 5.6 12.5 12.6s-5.6 12.6-12.5 12.6c-3 0-5.7-1-7.8-2.7-5.9 4.6-14.6 7.5-24.2 7.5-1.1 0-2.1 0-3.2-0.1-5.9 4.9-14.9 8.1-25 8.1-12.1 0-22.6-4.5-28.1-11.2-6.1 1.5-12.9 2.3-20 2.3-8.3 0-16.1-1.1-22.9-3.1-5.9 5-15 8.3-25.2 8.3-5.8 0.1-11.3-1-16-2.8zm441.7 476c-5.5 5.5-13.5 6.8-20.2 4-2.3 11-12 19.3-23.7 19.3-12.1 0-22.1-8.9-23.9-20.6-0.2-1.2-0.3-2.4-0.3-3.7v-0.7c-0.9 1.5-1.8 2.9-2.9 4.2-7.6 9.8-19.6 16.1-33 16.1-11.9 0-22.6-5-30.2-12.9-12.1 9.5-27.4 15.2-44 15.2-15.1 0-29.2-4.7-40.7-12.8-9.9 8-22.5 12.8-36.3 12.8-9.3 0-18.2-2.2-26-6.2-6.4 3.9-13.8 6.2-21.9 6.2-13.4 0-25.3-6.3-33-16.1-0.9 0.1-1.9 0.1-2.8 0.1h-0.1c-1.8 11.6-11.8 20.6-23.9 20.6-11.7 0-21.5-8.3-23.7-19.3-6.7 2.8-14.7 1.5-20.2-4-7.2-7.2-7.2-18.8 0-26s18.8-7.2 26 0c1.6 1.6 2.9 3.5 3.8 5.4 2.2-1.6 4.7-2.8 7.4-3.6-0.2-1.4-0.3-2.8-0.3-4.3 0-17.2 14-31.2 31.2-31.2 4.2 0 8.2 0.8 11.8 2.3 5.8-4.1 12.6-6.7 20-7.4 9.4-19.1 29.1-32.2 51.8-32.2 6.7 0 13.1 1.1 19 3.2 12.9-18.1 34.1-29.9 58-29.9 34.3 0 63 24.3 69.7 56.7 1.5-0.2 3-0.3 4.5-0.3 8.9 0 17.2 2.8 23.9 7.6 3.7-1.5 7.7-2.3 11.9-2.3 17.2 0 31.2 13.9 31.2 31.2 0 1.4-0.1 2.9-0.3 4.3 2.7 0.8 5.2 2 7.4 3.6 0.9-2 2.2-3.8 3.8-5.4 7.2-7.2 18.8-7.2 26 0 7.2 7.3 7.2 18.9 0 26.1zm66.1 227.4h1.4c4.7-17.7 20.8-30.7 39.9-30.7 19 0 35 12.8 39.8 30.3 4.7-3.9 10.8-6.2 17.4-6.2 13.8 0 25.3 10.2 27.2 23.5 5.8 4.1 9.6 10.9 9.6 18.6 0 12.6-10.2 22.9-22.9 22.9-7.2 0-13.7-3.4-17.9-8.6-5 5.3-12.1 8.6-20 8.6s-15-3.3-20-8.7c-4.2 1.4-8.6 2.2-13.3 2.2-7.7 0-14.9-2.1-21-5.8-5 5.5-12.2 8.9-20.3 8.9-6.2 0-12-2.1-16.6-5.6-3.7 2.7-8.3 4.3-13.3 4.3-12.6 0-22.9-10.2-22.9-22.9 0-12.6 10.2-22.9 22.9-22.9 3.1 0 6.1 0.6 8.8 1.8 5.2-5.9 12.8-9.7 21.2-9.7zm76.2-1765.9c20.7 0 38.4 8.6 45.6 20.9 1.1-0.2 2.3-0.3 3.5-0.3 10.6 0 19.2 8.6 19.2 19.2s-8.6 19.2-19.2 19.2c-4.5 0-8.7-1.6-12-4.2-9 7-22.3 11.5-37.1 11.5-1.6 0-3.3-0.1-4.9-0.2-9 7.6-22.8 12.4-38.2 12.4-18.5 0-34.6-6.9-42.9-17.1-9.3 2.3-19.7 3.6-30.7 3.6-12.7 0-24.6-1.7-35.1-4.7-9 7.7-22.9 12.7-38.6 12.7-8.9 0-17.3-1.6-24.5-4.5-7.2 2.8-15.6 4.5-24.5 4.5-17.6 0-33-6.3-41.7-15.7-3.3 2.7-7.6 4.4-12.2 4.4-10.6 0-19.2-8.6-19.2-19.2s8.6-19.2 19.2-19.2c3.4 0 6.7 0.9 9.4 2.5 7.8-11.3 24.8-19.1 44.4-19.1 0-18.3 22-33.2 49.1-33.2 18.3 0 34.3 6.8 42.7 16.9 9.4-2.3 19.9-3.6 30.9-3.6 6 0 11.8 0.4 17.3 1.1 7.2-12.3 24.9-21 45.7-21 27.1 0 49.1 14.8 49.1 33.2v0.2c1.6-0.3 3.1-0.3 4.7-0.3zm17 1813.8c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm-121.2-2186.5c0.7 1 1.4 2 2.2 3 0.7-0.8 1.4-1.5 2.1-2.4-1.5-0.1-2.9-0.3-4.3-0.6zm-356.1-278.6c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm356.1 278.6c0.7 1 1.4 2 2.2 3 0.7-0.8 1.4-1.5 2.1-2.4-1.5-0.1-2.9-0.3-4.3-0.6zm-356.1-278.6c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm477.3 2465.1c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm-121.2-2186.5c0.7 1 1.4 2 2.2 3 0.7-0.8 1.4-1.5 2.1-2.4-1.5-0.1-2.9-0.3-4.3-0.6zm-356.1-278.6c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm356.1 278.6c0.7 1 1.4 2 2.2 3 0.7-0.8 1.4-1.5 2.1-2.4-1.5-0.1-2.9-0.3-4.3-0.6zm121.2 2186.5c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm-121.2-2186.5c0.7 1 1.4 2 2.2 3 0.7-0.8 1.4-1.5 2.1-2.4-1.5-0.1-2.9-0.3-4.3-0.6zm121.2 2186.5c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4zm0 0c0.4 0.7 0.9 1.3 1.4 1.9 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4z"/>

                        <path class="st1" d="m189.4 1505.5c0 25.3-20.5 45.8-45.7 45.8-14.4 0-27.3-6.7-35.7-17.1-10 10.5-24.2 17.1-39.9 17.1-15.8 0-30-6.7-40.1-17.3-8.3 2.8-17.3 4.4-26.6 4.4v-165.1c37.9 0 69.9 25.6 79.6 60.5 9.5-7.7 21.6-12.4 34.8-12.4 27.7 0 50.6 20.4 54.4 47 11.7 8.2 19.2 21.8 19.2 37.1z"/>


                        <path class="st1" d="m594.3 529.3c-0.6 0.8-1.3 1.6-2.1 2.4-0.8-0.9-1.5-1.9-2.2-3 1.5 0.3 2.9 0.5 4.3 0.6z"/>
                        <path class="st1" d="m656.6 509.1c0 19.9-16.2 36.1-36.1 36.1-11.4 0-21.6-5.3-28.2-13.5 0.7-0.8 1.4-1.5 2.1-2.4-1.4-0.1-2.8-0.3-4.2-0.6 0.7 1 1.4 2 2.2 3-7.9 8.3-19.1 13.5-31.5 13.5-12.5 0-23.7-5.3-31.6-13.7-6.6 2.2-13.7 3.5-21 3.5-12.1 0-23.5-3.3-33.2-9.1-7.9 8.6-19.3 14-32 14-9.8 0-18.9-3.3-26.2-8.8-5.9 4.2-13.1 6.7-20.9 6.7-20 0-36.1-16.2-36.1-36.1s16.2-36.1 36.1-36.1c5 0 9.7 1 14 2.8 7.9-9.4 19.9-15.4 33.2-15.4 0.7 0 1.4 0 2.2 0.1 7.4-27.9 32.8-48.5 63-48.5 30 0 55.2 20.2 62.8 47.8 7.5-6.2 17.1-9.8 27.5-9.8 21.9 0 39.9 16.1 43 37.1 8.9 6.6 14.9 17.3 14.9 29.4z"/>
                        <path class="st1" d="m594.3 529.3c-0.6 0.8-1.3 1.6-2.1 2.4-0.8-0.9-1.5-1.9-2.2-3 1.5 0.3 2.9 0.5 4.3 0.6z"/>


                        <path class="st1" d="m714 2715.6c-0.4 0.5-0.9 1-1.3 1.5-0.5-0.6-1-1.2-1.4-1.9 0.9 0.2 1.8 0.3 2.7 0.4z"/>
                        <path class="st1" d="m714 2715.6c-0.4 0.5-0.9 1-1.3 1.5-0.5-0.6-1-1.2-1.4-1.9 0.9 0.2 1.8 0.3 2.7 0.4z"/>
                        <path class="st1" d="m753.4 2702.8c0 12.6-10.2 22.9-22.9 22.9-7.2 0-13.7-3.4-17.9-8.6 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4 0.4 0.7 0.9 1.3 1.4 1.9-5 5.3-12.1 8.6-20 8.6s-15-3.3-20-8.7c-4.2 1.4-8.6 2.2-13.3 2.2-7.7 0-14.9-2.1-21-5.8-5 5.5-12.2 8.9-20.3 8.9-6.2 0-12-2.1-16.6-5.6-3.7 2.7-8.3 4.3-13.3 4.3-12.6 0-22.9-10.2-22.9-22.9 0-12.6 10.2-22.9 22.9-22.9 3.1 0 6.1 0.6 8.8 1.8 5-6 12.6-9.7 21-9.7h1.4c4.7-17.7 20.8-30.7 39.9-30.7 19 0 35 12.8 39.8 30.3 4.7-3.9 10.8-6.2 17.4-6.2 13.8 0 25.3 10.2 27.2 23.5 6 4.1 9.8 10.9 9.8 18.6z"/>


                        <path class="st1" d="m236.7 250.5c-0.4 0.5-0.9 1-1.3 1.5-0.5-0.6-0.9-1.2-1.4-1.9 0.9 0.2 1.8 0.3 2.7 0.4z"/>
                        <path class="st1" d="m276.1 237.7c0 12.6-10.2 22.9-22.9 22.9-7.2 0-13.7-3.4-17.9-8.6 0.5-0.5 0.9-1 1.3-1.5-0.9-0.1-1.8-0.2-2.7-0.4 0.4 0.7 0.9 1.3 1.4 1.9-5 5.3-12.1 8.6-20 8.6s-15-3.3-20-8.7c-4.2 1.4-8.6 2.2-13.3 2.2-7.7 0-14.9-2.1-21-5.8-5 5.5-12.2 8.9-20.3 8.9-6.2 0-12-2.1-16.6-5.6-3.7 2.7-8.3 4.2-13.3 4.2-12.6 0-22.9-10.2-22.9-22.9 0-12.6 10.2-22.9 22.9-22.9 3.1 0 6.1 0.6 8.8 1.8 5-6 12.6-9.7 21-9.7h1.4c4.7-17.7 20.8-30.7 39.9-30.7 19 0 35 12.8 39.8 30.3 4.7-3.9 10.8-6.2 17.4-6.2 13.8 0 25.3 10.2 27.2 23.5 6 4.3 9.8 11 9.8 18.7z"/>
                        <path class="st1" d="m236.7 250.5c-0.4 0.5-0.9 1-1.3 1.5-0.5-0.6-0.9-1.2-1.4-1.9 0.9 0.2 1.8 0.3 2.7 0.4z"/>


                        <path class="st1" d="m800.4 142.3v3.3c-0.9-0.7-1.7-1.5-2.5-2.4 0.8-0.2 1.6-0.5 2.5-0.9z"/>
                        <path class="st1" d="m800.4 66v76.3c-0.8 0.3-1.7 0.7-2.5 0.9-4.2 1.4-8.6 2.2-13.3 2.2-7.7 0-14.9-2.1-21-5.8-5 5.5-12.2 8.9-20.3 8.9-6.2 0-12-2.1-16.6-5.6-3.7 2.7-8.3 4.3-13.3 4.3-12.6 0-22.9-10.2-22.9-22.9 0-12.6 10.2-22.9 22.9-22.9 3.1 0 6.1 0.6 8.8 1.8 5-6 12.6-9.7 21-9.7h1.4c4.7-17.7 20.8-30.7 39.9-30.7 5.6 0.1 11 1.2 15.9 3.2z"/>


                        <path class="st1" d="m800.4 1750.7v142.2c-16.5 0-31.7-5.7-43.8-15.2-7.6 8-18.3 12.9-30.2 12.9-13.4 0-25.3-6.3-33-16.1-0.9 0.1-1.9 0.1-2.9 0.1h-0.3c-1.8 11.6-11.8 20.6-23.9 20.6-11.7 0-21.5-8.3-23.7-19.4-6.7 2.8-14.7 1.5-20.2-4-7.2-7.2-7.2-18.8 0-26s18.8-7.2 26 0c1.6 1.6 2.9 3.5 3.8 5.4 2.2-1.6 4.7-2.8 7.4-3.6-0.2-1.4-0.3-2.8-0.3-4.3 0-17.2 14-31.2 31.2-31.2 4.2 0 8.2 0.8 11.9 2.4 6.8-4.8 15-7.6 23.9-7.6 1.5 0 3 0.1 4.5 0.3 6.8-32.1 35.3-56.4 69.6-56.5z"/>


                        <path class="st1" d="m552 2439.9c-5.5 5.5-13.5 6.8-20.2 4-2.3 11-12 19.3-23.7 19.3-12.1 0-22.1-8.9-23.9-20.6-0.2-1.2-0.3-2.4-0.3-3.7v-0.7c-0.9 1.5-1.8 2.9-2.9 4.2-7.6 9.8-19.6 16.1-33 16.1-11.9 0-22.6-5-30.2-12.9-12.1 9.5-27.4 15.2-44 15.2-15.1 0-29.2-4.7-40.7-12.8-9.9 8-22.5 12.8-36.3 12.8-9.3 0-18.2-2.2-26-6.2-6.4 3.9-13.8 6.2-21.9 6.2-13.4 0-25.3-6.3-33-16.1-0.9 0.1-1.9 0.1-2.8 0.1h-0.1c-1.8 11.6-11.8 20.6-23.9 20.6-11.7 0-21.5-8.3-23.7-19.3-6.7 2.8-14.7 1.5-20.2-4-7.2-7.2-7.2-18.8 0-26s18.8-7.2 26 0c1.6 1.6 2.9 3.5 3.8 5.4 2.2-1.6 4.7-2.8 7.4-3.6-0.2-1.4-0.3-2.8-0.3-4.3 0-17.2 14-31.2 31.2-31.2 4.2 0 8.2 0.8 11.8 2.3 5.8-4.1 12.6-6.7 20-7.4 9.4-19.1 29.1-32.2 51.8-32.2 6.7 0 13.1 1.1 19 3.2 12.9-18.1 34.1-29.9 58-29.9 34.3 0 63 24.3 69.7 56.7 1.5-0.2 3-0.3 4.5-0.3 8.9 0 17.2 2.8 23.9 7.6 3.7-1.5 7.7-2.3 11.9-2.3 17.2 0 31.2 13.9 31.2 31.2 0 1.4-0.1 2.9-0.3 4.3 2.7 0.8 5.2 2 7.4 3.6 0.9-2 2.2-3.8 3.8-5.4 7.2-7.2 18.8-7.2 26 0 7.2 7.3 7.2 18.9 0 26.1z"/>
                        <path class="st1" d="m484.2 2442.7h-0.3c-1 0-1.9 0-2.9-0.1 1.1-1.3 2-2.7 2.9-4.2v0.7c0 1.1 0.1 2.4 0.3 3.6z"/>


                        <path class="st1" d="m231 741.7c-4.1 4.1-10.1 5.1-15.2 3-1.7 8.3-9 14.6-17.8 14.6-9.1 0-16.7-6.7-18-15.5-0.1-0.9-0.2-1.8-0.2-2.8v-0.5c2-3.3 3.4-7 4.1-11-2.4 3-4 6.8-4.1 11-0.6 1.1-1.4 2.1-2.1 3.1-5.8 7.4-14.7 12.1-24.8 12.1-8.9 0-17-3.7-22.7-9.7-9.1 7.2-20.6 11.5-33.1 11.5-11.4 0-21.9-3.6-30.6-9.7-7.5 6.1-17 9.7-27.3 9.7-7 0-13.7-1.7-19.5-4.7-4.8 3-10.4 4.7-16.5 4.7h-1.5v-65.4c7.3-12.9 21.3-21.6 37.3-21.6 5 0 9.8 0.9 14.3 2.4 9.7-13.6 25.6-22.5 43.6-22.5 25.8 0 47.4 18.3 52.4 42.6 1.1-0.1 2.3-0.2 3.4-0.2 6.7 0 12.9 2.1 18 5.7 2.8-1.1 5.8-1.8 8.9-1.8 12.9 0 23.4 10.5 23.4 23.4 0 1.1-0.1 2.2-0.2 3.2 2 0.6 3.9 1.5 5.6 2.7 0.7-1.5 1.6-2.9 2.8-4.1 5.4-5.4 14.2-5.4 19.6 0 5.6 5.6 5.6 14.4 0.2 19.8z"/>
                        <path class="st1" d="m1.5 692.1v2.6c-0.5 0-1 0.1-1.5 0.1 0.5-1 0.9-1.8 1.5-2.7z"/>
                        <path class="st1" d="m183.8 729.5c-0.6 4-2 7.7-4.1 11 0.2-4.1 1.7-7.9 4.1-11z"/>
                        <path class="st1" d="m179.8 741c0 0.9 0.1 1.9 0.2 2.8h-0.2c-0.7 0-1.4 0-2.1-0.1 0.8-1 1.5-2 2.1-3.1v0.4z"/>
                        <path class="st1" d="m183.8 729.5c-0.6 4-2 7.7-4.1 11 0.2-4.1 1.7-7.9 4.1-11z"/>
                        <path class="st1" d="m183.8 729.5c-0.6 4-2 7.7-4.1 11 0.2-4.1 1.7-7.9 4.1-11z"/>


                        <path class="st1" d="m191.9 2979.6c0 10.6-8.6 19.2-19.2 19.2-4.5 0-8.7-1.6-12-4.2-9 7-22.3 11.5-37.1 11.5-1.6 0-3.3-0.1-4.9-0.2-9 7.6-22.8 12.4-38.3 12.4-18.5 0-34.6-6.9-42.9-17.1-9.3 2.3-19.7 3.6-30.7 3.6-1.8 0-3.6 0-5.4-0.1v-78c1.8-0.1 3.6-0.1 5.4-0.1 6 0 11.8 0.4 17.3 1.1 7.2-12.3 24.9-21 45.7-21 27.1 0 49.1 14.8 49.1 33.2v0.2c1.5-0.1 3.1-0.2 4.7-0.2 20.7 0 38.4 8.6 45.6 20.9 1.1-0.2 2.3-0.3 3.5-0.3 10.5-0.1 19.2 8.5 19.2 19.1z"/>


                        <path class="st1" d="m762.6 941.2c0 10.6-8.6 19.2-19.2 19.2-4.5 0-8.7-1.6-12-4.2-9 7-22.3 11.5-37.1 11.5-1.6 0-3.3-0.1-4.9-0.2-9 7.6-22.8 12.4-38.2 12.4-18.5 0-34.6-6.9-42.9-17.1-9.3 2.3-19.7 3.6-30.7 3.6-12.7 0-24.6-1.7-35.1-4.7-9 7.7-22.9 12.7-38.6 12.7-8.9 0-17.3-1.6-24.5-4.5-7.2 2.8-15.6 4.5-24.5 4.5-17.6 0-33-6.3-41.7-15.7-3.3 2.7-7.6 4.4-12.2 4.4-10.6 0-19.2-8.6-19.2-19.2s8.6-19.2 19.2-19.2c3.4 0 6.7 0.9 9.4 2.5 7.8-11.3 24.8-19.1 44.4-19.1 0-18.3 22-33.2 49.1-33.2 18.3 0 34.3 6.8 42.7 16.9 9.4-2.3 19.9-3.6 30.9-3.6 6 0 11.8 0.4 17.3 1.1 7.2-12.3 24.9-21 45.7-21 27.1 0 49.1 14.8 49.1 33.2v0.2c1.5-0.1 3.1-0.2 4.7-0.2 20.7 0 38.4 8.6 45.6 20.9 1.1-0.2 2.3-0.3 3.5-0.3 10.6-0.1 19.2 8.5 19.2 19.1z"/>


                        <path class="st1" d="m597.3 1309.1c0 6.9-5.6 12.6-12.6 12.6-3 0-5.7-1-7.8-2.7-5.9 4.6-14.6 7.5-24.2 7.5-1.1 0-2.1 0-3.2-0.1-5.9 5-14.9 8.1-25 8.1-12.1 0-22.6-4.5-28-11.2-6.1 1.5-12.9 2.3-20 2.3-8.3 0-16.1-1.1-22.9-3.1-5.9 5-15 8.3-25.2 8.3-5.8 0-11.3-1.1-16-2.9-4.7 1.8-10.2 2.9-16 2.9-11.5 0-21.6-4.1-27.2-10.2-2.2 1.8-4.9 2.8-8 2.8-6.9 0-12.6-5.6-12.6-12.6 0-6.9 5.6-12.5 12.6-12.5 2.3 0 4.4 0.6 6.2 1.6 5.1-7.3 16.2-12.4 29-12.4 0-12 14.3-21.7 32-21.7 12 0 22.4 4.5 27.9 11 6.1-1.5 12.9-2.4 20.2-2.4 3.9 0 7.7 0.2 11.3 0.7 4.7-8 16.3-13.7 29.8-13.7 17.7 0 32.1 9.7 32.1 21.7v0.1c1-0.1 2-0.1 3-0.1 13.5 0 25.1 5.7 29.8 13.6 0.7-0.1 1.5-0.2 2.3-0.2 6.9 0.1 12.5 5.7 12.5 12.6z"/>


                        <path class="st1" d="m295.2 1945.1c0 7-5.6 12.6-12.5 12.6-3 0-5.7-1-7.8-2.7-5.9 4.6-14.6 7.5-24.2 7.5-1.1 0-2.1 0-3.2-0.1-5.9 4.9-14.9 8.1-25 8.1-12.1 0-22.6-4.5-28.1-11.2-6.1 1.5-12.9 2.3-20 2.3-8.3 0-16.1-1.1-22.9-3.1-5.9 5-15 8.3-25.2 8.3-5.8 0-11.3-1.1-16-2.9-4.7 1.9-10.2 2.9-16 2.9-11.5 0-21.6-4.1-27.2-10.2-2.2 1.8-5 2.9-8 2.9-6.9 0-12.5-5.6-12.5-12.6s5.6-12.6 12.5-12.6c2.3 0 4.4 0.6 6.2 1.6 5.1-7.4 16.2-12.5 29-12.5 0-12 14.4-21.7 32.1-21.7 12 0 22.4 4.4 27.9 11 6.1-1.5 13-2.4 20.2-2.4 3.9 0 7.7 0.2 11.3 0.7 4.7-8 16.3-13.7 29.8-13.7 17.7 0 32 9.7 32 21.7v0.1c1-0.1 2-0.1 3-0.1 13.5 0 25.1 5.7 29.8 13.6 0.7-0.1 1.5-0.2 2.3-0.2 6.9 0.2 12.5 5.8 12.5 12.7z"/>

                    </svg>
                    `;
                            
                const background = new Image();
                background.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgBackground)}`;

                ctx.drawImage(background, 0, this.y - camera.y, this.width, this.height + 10);

            };

            //#endregion
        
            handle(){
                if ( (camera.height + camera.y) < (this.y / 2) && !this.nextBackgroundCreated) {
                    createBackground();
                    this.nextBackgroundCreated = true;
                };
                if ((camera.height + camera.y) < this.y){
                    deleteBackground(this);

                };
            };
        };

        function createBackground(){
            backgroundsArray.push(new Background());
        };

        function handleBackground(){
            for (let i = 0; i < backgroundsArray.length; i++) {
                backgroundsArray[i].draw();
                backgroundsArray[i].handle();
            };
        };

        //#endregion
    
        //#region Camera

        class Camera {
            constructor(){
                this.y = 0;
                this.x = 0;
                this.width = canvas.width;
                this.height = canvas.height;  
            };
            update(){
                camera.x = Math.max(0, Math.min(camera.x, canvas.width - player.width));

                if (minValue - 5 < player.y) {
                    camera.y = minValue - canvas.height / 2;
                };
            };  
        };

        const camera = new Camera();
        
        function handleCamera() {
            camera.update();
        };
        
        //#endregion

        //#region Player

        class Player {
            constructor(){
                this.x = (canvas.width / 2) - 7.5;
                this.y = -50; 
                this.width = 17.8;
                this.height = 50;
                this.speedY = 0;
                this.isJumping = true;
                this.isFalling = false;
                this.isFlying = false;
                this.isDragging = false;
                this.freeze = false;
                this.spearOffset = 6;
                this.jumpStrength = 5;
                this.jumpDuration = 100;
                this.fallingFrame = 3 * this.jumpDuration / 4; 
                this.jumpFrame = 0;
                this.hasCollided = false;
                this.gravity = world.gravity * 10;
            };
      
            draw(){
                
                //#region Player SVG

                const svgPlayer = `
                    <svg enable-background="new 0 0 375.7 732" version="1.1" viewBox="0 0 375.7 732" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <style type="text/css">
                        .st0{fill:#F7DCC1;}
                        .st1{fill:#E2A87D;}
                        .st2{fill:#FFFFFF;}
                        .st3{fill:#493A39;}
                        .st4{fill:none;stroke:#E2A87D;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;}
                        .st5{fill:#616A72;}
                        .st6{fill:#B9C2D4;}
                        .st7{fill:#8C94A2;}
                        .st8{fill:#B9C2D4;stroke:#818A99;stroke-width:2;stroke-miterlimit:10;}
                        .st9{fill:#EBECED;}
                        .st10{fill:#6D5235;}
                        .st11{fill:#77808B;}
                        .st12{fill:#6C747E;}
                        .st13{fill:#9AA3B2;}
                        .st14{fill:none;stroke:#B7B7B7;stroke-width:4;stroke-linecap:round;stroke-miterlimit:10;}
                        .st15{fill:#404B5B;}
                        .st16{fill:#F90A3E;}
                        .st17{fill:#9C0135;}
                        .st18{fill:#C70135;}
                        .st19{fill:#8C8F90;}
                    </style>


                        <rect class="st0" x="181.2" y="309.1" width="31.7" height="50.8"/>
                        <path class="st1" d="m190.1 334.7h-8.3v-30.9h31.7v7.5c-0.1 12.9-10.5 23.4-23.4 23.4z"/>
                        <rect class="st0" x="169" y="349.5" width="56.1" height="35"/>
                        <path class="st0" d="m197.1 324.2c-24.1 0-43.6-19.5-43.6-43.6v-20.9c0-18.2 14.7-32.9 32.9-32.9h21.3c18.2 0 32.9 14.7 32.9 32.9v20.9c0 24.1-19.5 43.6-43.5 43.6z"/>
                        <path class="st2" d="m177.8 285.4c-4.7 0-8.5-3.8-8.5-8.5v-2.1c0-0.8 0.7-1.5 1.5-1.5h14c0.8 0 1.5 0.7 1.5 1.5v2.1c0 4.7-3.8 8.5-8.5 8.5z"/>
                        <path class="st2" d="m216 285.4c4.7 0 8.5-3.8 8.5-8.5v-2.1c0-0.8-0.7-1.5-1.5-1.5h-14c-0.8 0-1.5 0.7-1.5 1.5v2.1c0 4.7 3.8 8.5 8.5 8.5z"/>
                        <path d="m183.9 276.8v-4.1c0-3.4-2.8-6.2-6.2-6.2s-6.2 2.8-6.2 6.2v4.1c0 3.4 2.8 6.2 6.2 6.2s6.2-2.8 6.2-6.2z"/>
                        <path d="m222.3 276.8v-4.1c0-3.4-2.8-6.2-6.2-6.2s-6.2 2.8-6.2 6.2v4.1c0 3.4 2.8 6.2 6.2 6.2s6.2-2.8 6.2-6.2z"/>
                        <path class="st3" d="m208.9 276.1 15.8-2.6c2.4-0.4 4.1-2.8 3.7-5.3-0.4-2.6-2.6-4.3-5.1-3.9l-15.8 2.6c-2.4 0.4-4.1 2.8-3.7 5.3s2.7 4.3 5.1 3.9z"/>
                        <path class="st3" d="m184.9 276.1-15.8-2.6c-2.4-0.4-4.1-2.8-3.7-5.3 0.4-2.6 2.6-4.3 5.1-3.9l15.8 2.6c2.4 0.4 4.1 2.8 3.7 5.3s-2.6 4.3-5.1 3.9z"/>
                        <path class="st1" d="m191.7 288.5 0.1-13.1c0-2 2.3-3.6 5.2-3.7 2.8 0 5.1 1.6 5.1 3.6l-0.1 13.1c0 2-2.3 3.6-5.2 3.7-2.8 0-5.1-1.6-5.1-3.6z"/>
                        <path class="st4" d="m183.4 304.3s9.4 2.9 17.2 2.2c7.8-0.6 9.8-4.9 9.8-4.9"/>


                        <rect class="st5" x="150.3" y="499.3" width="34.3" height="101.5"/>
                        <rect class="st5" x="150.3" y="603.7" width="34.3" height="94"/>
                        <path class="st6" d="m185.8 606-13.2 13.2c-2.8 2.8-7.4 2.8-10.3 0l-13.2-13.2c-2.8-2.8-2.8-7.4 0-10.3l13.2-13.2c2.8-2.8 7.4-2.8 10.3 0l13.2 13.2c2.8 2.9 2.8 7.5 0 10.3z"/>


                        <rect class="st5" x="205.3" y="603.7" width="34.3" height="94"/>
                        <rect class="st5" x="206.3" y="500.5" width="34.3" height="100.4"/>
                        <path class="st6" d="m241.8 606-13.2 13.2c-2.8 2.8-7.4 2.8-10.3 0l-13.2-13.2c-2.8-2.8-2.8-7.4 0-10.3l13.2-13.2c2.8-2.8 7.4-2.8 10.3 0l13.2 13.2c2.9 2.9 2.9 7.5 0 10.3z"/>


                        <path class="st7" d="m189.9 679.6v51.6h-72.3c-1.8 0-3.2-1.4-3.2-3.2 0-7.1 2.9-13.6 7.6-18.2s11.1-7.6 18.2-7.6h4.9v-22.6h44.8z"/>


                        <path class="st7" d="m276.7 728.8c0 1.8-1.5 3.2-3.2 3.2h-73.5v-51.6h44.9v22.6h6c7.1 0 13.6 2.9 18.2 7.5 4.7 4.7 7.6 11.2 7.6 18.3z"/>


                        <path class="st5" d="m248.2 348.9v132.3h-102.6v-132.3h26.1v6.3c0 7 2.8 13.4 7.4 18s10.9 7.4 18 7.4c14 0 25.4-11.4 25.4-25.4v-6.3h25.7z"/>
                        <path class="st7" d="m250.1 498.6-46.3 46.3c-3.6 3.6-9.5 3.6-13.2 0l-46.3-46.3 6-6h93.9l5.9 6z"/>
                        <path class="st6" d="m247.4 499.3h-100.5c-3.8 0-6.9-3.1-6.9-6.9v-11.2c0-3.8 3.1-6.9 6.9-6.9h100.6c3.8 0 6.9 3.1 6.9 6.9v11.2c0 3.9-3.1 6.9-7 6.9z"/>
                        <path class="st8" d="m215.5 492-13.2 13.2c-2.8 2.8-7.4 2.8-10.3 0l-13.2-13.2c-2.8-2.8-2.8-7.4 0-10.3l13.2-13.2c2.8-2.8 7.4-2.8 10.3 0l13.2 13.2c2.9 2.8 2.9 7.4 0 10.3z"/>
                        
                            <path class="st9" d="m143.2 497.1c-4.4-10.2-2.4-24.8 11.9-21.5 0.5 0.1 0.5 1-0.1 1-2.4 0.2-4.8 0.5-6.8 1.5-6.6 3.4-5.1 12.5-4.1 18.7 0.2 0.6-0.7 0.9-0.9 0.3z"/>
                        


                        
                            <rect class="st5" transform="matrix(.065703 -.9978 .9978 .065703 -314.5 523.92)" x="79.2" y="414.1" width="86.7" height="31.6"/>
                        <polygon class="st5" points="35.3 498.9 31.9 476.7 116.9 459.1 121.7 490.3"/>
                        <path class="st6" d="m135 484.6-17.1 7.6c-3.7 1.6-7.9 0-9.6-3.7l-7.6-17.1c-1.6-3.7 0-8 3.7-9.6l17.1-7.6c3.7-1.6 8 0 9.6 3.7l7.6 17.1c1.6 3.6-0.1 7.9-3.7 9.6z"/>
                        <path class="st7" d="m38.1 485.5c1.3 9.4 10 16.1 19.5 14.8l24-3.2s6.7-8.8 5.4-18.2-10.1-16.1-10.1-16.1l-23.9 3.2c-9.5 1.3-16.1 10-14.9 19.5z"/>
                        <path class="st6" d="m79.2 479.9c-1.3-9.4-10.1-16.1-10.1-16.1l-16.1 2.2 24-3.2s8.8 6.7 10.1 16.1-5.4 18.2-5.4 18.2l-7.8 1c-0.1 0 6.6-8.7 5.3-18.2z"/>
                        <path class="st7" d="m14.1 498.8c4.6 8 14.8 10.8 22.8 6.3l4.9-2.8c8-4.5 10.8-14.8 6.3-22.8-4.6-8-14.8-10.8-22.8-6.3l-4.9 2.8c-8 4.5-10.8 14.8-6.3 22.8z"/>
                        <path class="st10" d="m22.7 681.7c-4.1 0-7.5-3.4-7.5-7.5v-599.4c0-4.1 3.4-7.5 7.5-7.5s7.5 3.4 7.5 7.5v599.4c0 4.1-3.4 7.5-7.5 7.5z"/>
                        
                            <path class="st11" d="m7.8 487.7c2 1.7 5 1.4 6.7-0.6l7.1-8.6c1.7-2 1.4-5-0.6-6.7s-5-1.4-6.7 0.6l-7.1 8.6c-1.7 2-1.4 5 0.6 6.7z"/>
                            <path class="st11" d="m13.6 474.4c-0.4 2.6 1.4 5 4 5.4l11.1 1.6c2.6 0.4 5-1.4 5.4-4s-1.4-5-4-5.4l-11.1-1.6c-2.6-0.4-5 1.4-5.4 4z"/>
                        
                        <path class="st12" d="m11.5 506.7c0.6 2.5 3.1 4.2 5.6 3.6l10.9-2.4c2.6-0.6 4.2-3.1 3.6-5.6s-3.1-4.2-5.6-3.6l-10.9 2.3c-2.6 0.6-4.2 3.1-3.6 5.7z"/>
                        <path class="st12" d="m6 500.2c0.6 2.5 3.1 4.2 5.6 3.6l10.9-2.4c2.6-0.6 4.2-3.1 3.6-5.6s-3.1-4.2-5.6-3.6l-10.9 2.4c-2.6 0.5-4.2 3.1-3.6 5.6z"/>
                        <path class="st12" d="m2.8 494.6c0.6 2.5 3.1 4.2 5.6 3.6l10.9-2.4c2.6-0.6 4.2-3.1 3.6-5.6s-3.1-4.2-5.6-3.6l-10.9 2.4c-2.5 0.6-4.2 3.1-3.6 5.6z"/>
                        <path class="st12" d="m1.1 486.9c0.6 2.5 3.1 4.2 5.6 3.6l10.9-2.4c2.6-0.6 4.2-3.1 3.6-5.6s-3.1-4.2-5.6-3.6l-10.9 2.4c-2.5 0.5-4.1 3-3.6 5.6z"/>
                        <polygon class="st6" points="22.7 92.4 3.7 45.5 22.5 -1.5 22.5 -1.5 41.6 45.5"/>
                        <polygon class="st13" points="22.7 -1.1 22.7 92.4 3.7 45.5 22.5 -1.5"/>
                        <rect class="st7" x="11.9" y="66.2" width="21.6" height="26.2"/>


                        <path class="st6" d="m254.4 390.3 34.5-4.7c0.9-0.1 1.5-0.9 1.4-1.8-2.7-20-21.1-33.9-41.1-31.2-0.9 0.1-1.5 0.9-1.4 1.8l4.7 34.5c0.2 0.9 1 1.6 1.9 1.4z"/>
                        <path class="st6" d="m142.7 388.7-34.8-2.3c-0.9-0.1-1.6-0.8-1.5-1.7 1.3-20.1 18.7-35.3 38.8-34 0.9 0.1 1.6 0.8 1.5 1.7l-2.3 34.8c0 0.8-0.8 1.5-1.7 1.5z"/>
                        
                            <path class="st9" d="m112.3 376.9c0.5-2.5 1.4-4.8 2.5-7.1s2.4-4.5 4-6.5 3.4-3.9 5.7-5.3c2.2-1.4 5.1-2.2 7.7-1.6 0.3 0.1 0.4 0.4 0.4 0.6s-0.2 0.3-0.4 0.4c-2.4 0.4-4.3 1.6-6 3s-3.3 3.2-4.8 5-2.8 3.8-4.2 5.8l-4 6.1c-0.1 0.2-0.5 0.3-0.7 0.1-0.1-0.1-0.2-0.3-0.2-0.5z"/>
                        
                        <path class="st7" d="m248.2 406.1c-0.5 0.4-1.1 0.8-1.7 1.2l-42.2 27.4c-4.4 2.9-10.1 2.9-14.6 0.1l-42.1-26.4c-0.7-0.5-1.4-0.9-2.1-1.4-11.6-8.6-16.7-23.6-12.4-37.6l5.2-16.9c1-3.3 3.9-5.6 7.2-6 0.3 0 0.6-0.1 1-0.1h25.1v3.4c0 7 2.8 13.4 7.4 18s10.9 7.4 18 7.4c14 0 25.4-11.4 25.4-25.4v-3.4h24.7c0.4 0 0.7 0 1.1 0.1 3.2 0.4 6 2.7 7 5.8l5.1 15.5c4.8 14.1-0.2 29.6-12.1 38.3z"/>
                        
                            <path class="st9" d="m138.4 366.9c-0.2-8.9 5.6-23.5 16.7-17.9 0.5 0.2 0.2 1.1-0.3 1-10.2-2.1-13.6 9.2-15.4 17-0.1 0.6-1 0.5-1-0.1z"/>
                        
                        <path class="st14" d="m221.7 346.4c0.1 1.1 0.2 2.2 0.2 3.3 0 13.7-11.1 24.8-24.9 24.8-13.7 0-24.9-11.1-24.9-24.8 0-1.1 0.1-2.2 0.2-3.3"/>


                        
                            <rect class="st5" transform="matrix(.9908 -.1355 .1355 .9908 -55.718 41.553)" x="261.6" y="386.7" width="31.6" height="86.7"/>
                        <path class="st6" d="m265.8 480.6 14.9 11.3c3.2 2.4 7.7 1.8 10.2-1.4l11.3-14.9c2.4-3.2 1.8-7.7-1.4-10.2l-14.9-11.3c-3.2-2.4-7.7-1.8-10.2 1.4l-11.3 14.9c-2.4 3.2-1.8 7.8 1.4 10.2z"/>
                        
                            <path class="st15" d="m368.7 509.1s-0.4 41.6-83.9 78.6c0 0-86.2-41.6-82.6-77.7 0 0 6.6-90.4-7.8-104.9l86.9-24 93.8 24c0.1 0.1-15.6 35.6-6.4 104z"/>
                            <path class="st5" d="m359.5 505.2s-0.4 37-74.6 69.9c0 0-76.8-37-73.5-69.1 0 0 5.9-80.5-6.9-93.3l77.3-21.4 83.5 21.4c-0.1 0-14 31.6-5.8 92.5z"/>
                        
                        
                            <image transform="matrix(.1863 0 0 .1863 227.63 415.41)" width="614" height="620" enable-background="new" overflow="visible" xlink:href="8D47737E.png">
                        </image>


                        
                            <path class="st16" d="m199.2 181.6 3.1-3c-0.5-2-1.2-4-2-5.9-3.5 0.4-7.1 0-10.4-1.4l6.2-5.9c-3.6-4.9-8.4-8.9-14-11.6l-1.9 69.1c13.3-5.6 22.9-18.5 23.3-33.9 0.1-2.2-0.1-4.4-0.4-6.6-1.4 0-2.7-0.3-3.9-0.8z"/>
                            <path class="st17" d="m223.4 211.3-43.3 11.7c5.9 7.2 15.8 10.8 25.4 8.2 9.7-2.7 16.4-10.7 17.9-19.9z"/>
                            <path class="st18" d="m220.3 184.9-40.2 38c10.7 4.4 23.5 2.5 32.4-6 9-8.4 11.6-21 7.8-32z"/>
                        
                        <path class="st5" d="m245.7 257.3v12.9c0 3-2.4 5.4-5.4 5.4h-0.7c-2.1 0-4.2-1.3-4.9-3.3-0.5-1.3-1.2-2.5-2.2-3.6l-9-9.6c-4-4.3-10.4-4.3-14.4 0l-9 9.6c-0.2 0.2-0.3 0.4-0.5 0.5h-3.4c-1.5 0-2.9-0.6-3.9-1.7l-7.4-7.9c-4-4.3-10.4-4.3-14.4 0l-9 9.6c-0.8 0.9-1.5 1.9-2 3-0.9 2-2.8 3.4-5 3.4h-0.8c-3 0-5.4-2.4-5.4-5.4v-12.9c0-20.5 15.5-37.1 34.6-37.1h28c19.3 0 34.8 16.6 34.8 37.1z"/>
                        
                            <path class="st6" d="m155.1 249.1c2-8.4 9.7-22.4 20-20.5 0.5 0.1 0.5 0.9 0 1-8.5 1.7-14.4 13.2-19 19.9-0.3 0.5-1.1 0.1-1-0.4z"/>
                        
                        <rect class="st5" x="148.4" y="260.1" width="13" height="50.7"/>
                        <rect class="st5" x="232.6" y="259.7" width="13" height="47.4"/>
                        <polygon class="st19" points="157.8 303.5 173.8 311.6 178.3 325.3 165.9 329 149.9 320.9 148.3 315.8 148.3 304.4"/>
                        <polygon class="st19" points="236.6 303.5 220.6 311.6 216.1 325.3 228.5 329 244.5 320.9 246.1 315.8 246.1 304.4"/>

                    </svg>
                `;
                    
                //#endregion
                
                const img = new Image();
                img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgPlayer)}`;
                
                ctx.drawImage(img, this.x - 5, this.y - 20 - camera.y, this.width + 10, this.height + 20);
            };
            
            update(){

                if (!this.freeze) {

                    spear.y = this.y - 20;
                    
                    if (this.jumpFrame === 150) {
                        this.isFlying = false;
                        world.trambolineUsed = false;
                    };
                        
                    if (this.jumpFrame < this.jumpDuration) {
                        
                        this.isJumping = true;
                        this.isFalling = false;
                        this.speedY = -this.jumpStrength + this.gravity;
                        this.y += this.speedY;
                        this.jumpFrame++;

                    } else {
                        this.speedY += this.gravity / 4;
                        this.y += this.speedY;
                        this.isJumping = false;
                        this.isFalling = true;              
                    };
                };
            };
        };

        const player = new Player();

        function handlePlayer() {
            player.draw();
            player.update();
        };

        //#endregion

        //#region Spear

        class Spear {
            constructor(){
                this.x = player.x - player.spearOffset;
                this.y = player.y - 20; 
                this.width = 5;
                this.height = 30;
            };
        };

        const spear = new Spear();

        //#endregion

        //#region Platform

            //#region Platform SVG Container

        const platformSVGContainer =
            {
                defaultPlatform : `
                    <svg enable-background="new 0 0 293.3 45.3" version="1.1" viewBox="0 0 293.3 45.3" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                        <style type="text/css">
                            .st0{fill:#7A6444;}
                            .st1{fill:#B29136;}
                            .st2{fill:#999E7D;}
                            .st3{fill:#AF6604;}
                            .st4{fill:#82F27C;}
                        </style>

                            <path class="st0" d="M293.3,19.8v5.7c0,3.7-1,7.1-2.8,10.1c-3.5,5.8-9.8,9.8-17.1,9.8H25c-10.9,0-19.8-8.9-19.8-19.8v-5.7   c0-2.6,0.5-5,1.4-7.3C9.5,5.2,16.6,0,25,0h248.4c7,0,13.1,3.6,16.7,9.1c1.1,1.7,1.9,3.6,2.5,5.6C293,16.3,293.3,18,293.3,19.8z"/>
                            <circle class="st1" cx="17.7" cy="22.7" r="10.6"/>
                            <circle class="st2" cx="38.2" cy="28" r="5.3"/>
                            <circle class="st3" cx="54.1" cy="16.7" r="10.6"/>
                            <circle class="st1" cx="76.1" cy="24.4" r="7.6"/>
                            <circle class="st2" cx="111.8" cy="17.4" r="5.3"/>
                            <circle class="st3" cx="125.4" cy="25" r="8.3"/>
                            <path class="st3" d="m176.1 37.9c0 2.9-1.1 5.5-3 7.4h-15.2c-1.9-1.9-3-4.5-3-7.4 0-5.9 4.7-10.6 10.6-10.6s10.6 4.8 10.6 10.6z"/>
                            <circle class="st1" cx="205.6" cy="14.7" r="10.6"/>
                            <circle class="st1" cx="146.4" cy="16.7" r="7.6"/>
                            <circle class="st1" cx="98.4" cy="35.6" r="7.6"/>
                            <circle class="st2" cx="189.7" cy="25" r="5.3"/>
                            <circle class="st3" cx="233.2" cy="21.2" r="9.1"/>
                            <circle class="st2" cx="250" cy="32" r="4.7"/>
                            <path class="st1" d="m293.3 19.8v5.7c0 3.7-1 7.1-2.8 10.1h-0.4c-5.9 0-10.6-4.7-10.6-10.6s4.8-10.6 10.6-10.6c0.9 0 1.7 0.1 2.5 0.3 0.4 1.6 0.7 3.3 0.7 5.1z"/>
                            <path class="st4" d="m58.1 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.7h29.3z"/>
                            <path class="st4" d="m87.8 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.7h29.3z"/>
                            <path class="st4" d="m117.1 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.7h29.3z"/>
                            <path class="st4" d="m146.4 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.7h29.3z"/>
                            <path class="st4" d="m176.1 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.7h29.3z"/>
                            <path class="st4" d="m264.4 0c0 0.8-0.1 1.6-0.2 2.4-0.5 3.1-2 5.9-4.1 8-2.6 2.7-6.3 4.3-10.4 4.3-8.1 0-14.6-6.6-14.6-14.7h29.3z"/>
                            <path class="st4" d="m205.4 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.7h29.3z"/>
                            <path class="st4" d="m234.7 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.7h29.3z"/>
                            <path class="st4" d="m285.2 18.7h-1.7c-10.3 0-18.7-8.4-18.7-18.7h20c5.3 0 9.6 4.3 9.6 9.6-0.1 5-4.2 9.1-9.2 9.1z"/>
                            <path class="st4" d="m10.1 18.7c10.3 0 18.7-8.4 18.7-18.7h-18.3c-5.3 0-9.5 4.3-9.5 9.6-0.1 5 4 9.1 9.1 9.1z"/>
                    </svg>
                    `
                ,

                particlePlatform: `
                    <svg enable-background="new 0 0 297.9 46.8" version="1.1" viewBox="0 0 297.9 46.8" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                        <style type="text/css">
                            .st0{fill:#6D6D6D;}
                            .st1{fill:#444341;}
                            .st2{fill:#999E7D;}
                            .st3{fill:#8E8E8E;}
                            .st4{fill:#B6B7B6;}
                        </style>
                        <path class="st0" d="m292.3 21.6v5.7 0.4c-0.1 3.4-1.1 6.6-2.7 9.4 0 0.1-0.1 0.2-0.2 0.3-3.2 5.2-8.8 8.9-15.3 9.4-0.5 0.1-1.1 0.1-1.7 0.1h-248.3c-11-0.1-19.9-9-19.9-19.9v-5.7c0-1.6 0.2-3.3 0.6-4.8 0.2-0.6 0.4-1.3 0.6-1.9 0.1-0.2 0.1-0.4 0.2-0.6 2.3-5.8 7.4-10.3 13.5-11.9 1.6-0.4 3.2-0.6 4.9-0.6h248.4c7 0 13.1 3.6 16.7 9.1 0.1 0.2 0.2 0.4 0.4 0.6 0.3 0.4 0.5 0.9 0.8 1.4 0 0.1 0.1 0.2 0.1 0.3 0.5 1.1 0.9 2.2 1.2 3.3 0.3 1.2 0.5 2.5 0.6 3.8v0.2 0.5c0.1 0.3 0.1 0.6 0.1 0.9z"/>
                        <circle class="st1" cx="15.8" cy="24.1" r="10.6"/>
                        <circle class="st2" cx="36.3" cy="29.4" r="5.3"/>
                        <circle class="st2" cx="31" cy="13.5" r="5.3"/>
                        <circle class="st3" cx="52.2" cy="18.2" r="10.6"/>
                        <path class="st3" d="m97.5 42.3c0 1.6-0.4 3.1-1 4.4h-19.3c-0.6-1.4-1-2.9-1-4.4 0-5.9 4.8-10.6 10.6-10.6s10.7 4.8 10.7 10.6z"/>
                        <circle class="st1" cx="74.2" cy="25.8" r="7.6"/>
                        <path class="st1" d="m123.8 42.3c0 1.7-0.5 3.2-1.4 4.4h-12.4c-0.9-1.2-1.4-2.8-1.4-4.4 0-4.2 3.4-7.6 7.6-7.6s7.6 3.4 7.6 7.6z"/>
                        <circle class="st1" cx="46.5" cy="37.8" r="7.6"/>
                        <circle class="st2" cx="109.9" cy="18.8" r="5.3"/>
                        <circle class="st2" cx="93.2" cy="22.6" r="5.3"/>
                        <circle class="st2" cx="62.8" cy="38.2" r="5.3"/>
                        <circle class="st2" cx="76.3" cy="10.6" r="5.3"/>
                        <circle class="st3" cx="123.5" cy="26.5" r="8.3"/>
                        <circle class="st3" cx="211.5" cy="37.2" r="8.3"/>
                        <circle class="st3" cx="25.9" cy="37.4" r="5.9"/>
                        <path class="st3" d="m174.2 39.4c0 2.9-1.1 5.5-3 7.4h-15.2c-1.9-1.9-3-4.5-3-7.4 0-5.9 4.7-10.6 10.6-10.6 5.8 0 10.6 4.7 10.6 10.6z"/>
                        <circle class="st1" cx="203.7" cy="16.1" r="10.6"/>
                        <circle class="st1" cx="144.5" cy="18.2" r="7.6"/>
                        <circle class="st1" cx="246.4" cy="10.6" r="5.8"/>
                        <circle class="st1" cx="244" cy="39.2" r="5.8"/>
                        <path class="st1" d="m200.7 42.3c0 1.6-0.5 3.2-1.4 4.4h-12.4c-0.9-1.2-1.4-2.8-1.4-4.4 0-4.2 3.4-7.6 7.6-7.6s7.6 3.4 7.6 7.6z"/>
                        <circle class="st2" cx="187.8" cy="26.4" r="5.3"/>
                        <circle class="st2" cx="226.4" cy="39.2" r="5.3"/>
                        <circle class="st2" cx="268.3" cy="15.9" r="5.3"/>
                        <circle class="st2" cx="169.9" cy="15.9" r="5.3"/>
                        <circle class="st3" cx="231.3" cy="22.6" r="9.1"/>
                        <path class="st3" d="m278.1 39.2c0 3.1-1.5 5.8-3.9 7.5-0.5 0.1-1.1 0.1-1.7 0.1h-8.7c-2.4-1.6-4-4.4-4-7.5 0-5 4.1-9.1 9.1-9.1 5.1-0.1 9.2 4 9.2 9z"/>
                        <ellipse class="st2" transform="matrix(.1602 -.9871 .9871 .1602 182.3 269.74)" cx="249.7" cy="27.7" rx="4.7" ry="4.7"/>
                        <path class="st1" d="m292.3 21.6v5.7c0 3.7-1 7.1-2.8 10.1h-0.4c-5.8 0-10.6-4.7-10.6-10.6s4.8-10.6 10.6-10.6c0.8 0 1.7 0.1 2.5 0.3 0.5 1.6 0.7 3.3 0.7 5.1z"/>
                        <path class="st4" d="m56.8 0c0 4.2-1.7 8-4.5 10.8s-6.5 4.4-10.8 4.4c-8.4 0-15.2-6.8-15.2-15.2h30.5z"/>
                        <path class="st4" d="M87,0c0,4.2-1.7,8-4.5,10.8c-2.8,2.7-6.6,4.5-10.8,4.5c-8.4,0-15.2-6.8-15.2-15.2C56.6,0,87,0,87,0z"/>
                        <path class="st4" d="m116.2 0c0 4.2-1.7 8-4.5 10.8s-6.5 4.4-10.7 4.4c-8.4 0-15.2-6.8-15.2-15.2h30.4z"/>
                        <path class="st4" d="m146.6 0c0 4.2-1.7 8-4.5 10.8s-6.5 4.4-10.8 4.4c-8.4 0-15.2-6.8-15.2-15.2h30.5z"/>
                        <path class="st4" d="m177.4 0c0 4.2-1.7 8-4.5 10.8s-6.6 4.4-10.8 4.4c-8.2 0-15.1-6.8-15.1-15.2h30.4z"/>
                        <path class="st4" d="m207.8 0c0 4.2-1.7 8-4.5 10.8s-6.6 4.4-10.8 4.4c-8.4 0-15.2-6.8-15.2-15.2h30.5z"/>
                        <path class="st4" d="m238.2 0c0 4.2-1.7 8-4.5 10.8s-6.5 4.4-10.8 4.4c-8.4 0-15.2-6.8-15.2-15.2h30.5z"/>
                        <path class="st4" d="m268.6 0c0 0.8-0.1 1.7-0.2 2.5-0.5 3.2-2 6.1-4.2 8.3-2.8 2.7-6.6 4.5-10.8 4.5-0.5 0-1 0-1.5-0.1-2.5-0.2-4.9-1.1-6.9-2.4-4.1-2.7-6.8-7.4-6.8-12.7h30.4z"/>
                        <path class="st4" d="m288.8 18.7h-1.7c-10.3 0-18.7-8.4-18.7-18.7h20c5.3 0 9.6 4.3 9.6 9.6-0.1 5-4.2 9.1-9.2 9.1z"/>
                        <path class="st4" d="m9.1 18.7c10.3 0 18.7-8.4 18.7-18.7h-18.2c-5.3 0-9.6 4.3-9.6 9.6 0 5 4.1 9.1 9.1 9.1z"/>
                    </svg>
                    `
                ,

                rockPlatform: `
                    <svg enable-background="new 0 0 292 47" version="1.1" viewBox="0 0 292 47" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                        <style type="text/css">
                            .st0{fill:#6D6D6D;}
                            .st1{fill:#444341;}
                            .st2{fill:#999E7D;}
                            .st3{fill:#8E8E8E;}
                            .st4{fill:#4D9347;}
                        </style>
                        <path class="st0" d="m290.5 20.1v5.7 0.4c-0.1 3.4-1.1 6.6-2.7 9.4 0 0.1-0.1 0.2-0.2 0.3-3.2 5.2-8.8 8.9-15.3 9.4-0.5 0-1.1 0.1-1.6 0.1h-248.5c-10.9 0-19.8-8.9-19.8-19.8v-5.7c0-2.4 0.4-4.6 1.2-6.7 0.1-0.2 0.1-0.4 0.2-0.6 2.3-5.9 7.3-10.4 13.5-12 1.6-0.4 3.2-0.6 4.9-0.6h248.4c7 0 13.1 3.6 16.7 9.1 0.1 0.2 0.2 0.4 0.4 0.6 0.3 0.5 0.6 1.1 0.9 1.6 0.5 1.1 0.9 2.2 1.2 3.3 0.3 1.2 0.5 2.5 0.6 3.8v0.2 0.5c0.1 0.4 0.1 0.7 0.1 1z"/>
                        <circle class="st1" cx="13.9" cy="22.7" r="10.6"/>
                        <circle class="st2" cx="34.4" cy="28" r="5.3"/>
                        <circle class="st3" cx="50.3" cy="16.7" r="10.6"/>
                        <path class="st3" d="M95.6,40.9c0,1.6-0.4,3.1-1,4.4H75.4c-0.6-1.4-1-2.9-1-4.4c0-5.9,4.8-10.6,10.6-10.6S95.6,35,95.6,40.9z"/>
                        <circle class="st1" cx="72.3" cy="24.4" r="7.6"/>
                        <path class="st1" d="m121.9 40.9c0 1.7-0.5 3.2-1.4 4.4h-12.4c-0.9-1.2-1.4-2.8-1.4-4.4 0-4.2 3.4-7.6 7.6-7.6 4.2-0.1 7.6 3.4 7.6 7.6z"/>
                        <circle class="st1" cx="44.6" cy="36.3" r="7.6"/>
                        <circle class="st2" cx="108" cy="17.4" r="5.3"/>
                        <circle class="st2" cx="74.4" cy="9.1" r="5.3"/>
                        <circle class="st3" cx="121.6" cy="25" r="8.3"/>
                        <circle class="st3" cx="209.6" cy="35.7" r="8.3"/>
                        <path class="st3" d="m172.3 37.9c0 2.9-1.1 5.5-3 7.4h-15.2c-1.9-1.9-3-4.5-3-7.4 0-5.9 4.7-10.6 10.6-10.6s10.6 4.8 10.6 10.6z"/>
                        <circle class="st1" cx="201.8" cy="14.6" r="10.6"/>
                        <circle class="st1" cx="142.6" cy="16.7" r="7.6"/>
                        <circle class="st1" cx="244.6" cy="9.1" r="5.8"/>
                        <path class="st1" d="m198.9 40.9c0 1.6-0.5 3.2-1.4 4.4h-12.5c-0.9-1.2-1.4-2.8-1.4-4.4 0-4.2 3.4-7.6 7.6-7.6 4.2-0.1 7.7 3.4 7.7 7.6z"/>
                        <circle class="st2" cx="185.9" cy="25" r="5.3"/>
                        <circle class="st2" cx="266.5" cy="14.4" r="5.3"/>
                        <circle class="st2" cx="173.3" cy="14.4" r="5.3"/>
                        <circle class="st3" cx="229.4" cy="21.2" r="9.1"/>
                        <path class="st3" d="m276.2 37.8c0 3.1-1.5 5.8-3.9 7.5-0.5 0-1.1 0.1-1.6 0.1h-8.7c-2.4-1.6-4-4.4-4-7.5 0-5 4.1-9.1 9.1-9.1 5-0.1 9.1 4 9.1 9z"/>
                        <circle class="st2" cx="246.2" cy="32" r="4.7"/>
                        <path class="st1" d="m290.5 20.1v5.7c0 3.7-1 7.1-2.8 10.1h-0.4c-5.9 0-10.6-4.7-10.6-10.6s4.8-10.6 10.6-10.6c0.9 0 1.7 0.1 2.5 0.3 0.4 1.6 0.7 3.3 0.7 5.1z"/>
                        <path class="st4" d="m57.4 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.6h29.3z"/>
                        <path class="st4" d="M87,0c0,4-1.6,7.7-4.3,10.4s-6.3,4.3-10.4,4.3c-8.1,0-14.6-6.6-14.6-14.6H87z"/>
                        <path class="st4" d="m115.2 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.6h29.3z"/>
                        <path class="st4" d="m203.5 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.6h29.3z"/>
                        <path class="st4" d="m232.8 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.6h29.3z"/>
                        <path class="st4" d="m144.5 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.6h29.3z"/>
                        <path class="st4" d="m174.2 0c0 4-1.6 7.7-4.3 10.4s-6.3 4.3-10.4 4.3c-8.1 0-14.6-6.6-14.6-14.6h29.3z"/>
                        <path class="st4" d="m262.5 0c0 0.8-0.1 1.6-0.2 2.4-0.5 3.1-2 5.9-4.1 8-2.6 2.6-6.3 4.3-10.4 4.3-0.5 0-1 0-1.5-0.1-2.4-0.2-4.7-1.1-6.6-2.4-4-2.6-6.6-7.1-6.6-12.2h29.4z"/>
                        <path class="st4" d="m9.1 18.7c10.3 0 18.7-8.4 18.7-18.7h-18.2c-5.3 0-9.6 4.3-9.6 9.6 0 5 4.1 9.1 9.1 9.1z"/>
                        <path class="st4" d="m282.9 18.7h-1.7c-10.3 0-18.7-8.4-18.7-18.7h20c5.3 0 9.6 4.3 9.6 9.6-0.1 5-4.2 9.1-9.2 9.1z"/>
                    </svg>
                    `
                ,

                breakablePlatform1:
                    `
                    <svg enable-background="new 0 0 280.5 30.8" version="1.1" viewBox="0 0 280.5 30.8" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                        <style type="text/css">
                            .st0{fill:#C68347;}
                            .st1{fill:#6B463B;}
                        </style>
                        <path class="st0" d="m278.8 10.5v9.7c0 2.7-1 5.1-2.6 7-0.5 0.5-1 1-1.6 1.5-1.8 1.3-3.9 2.1-6.3 2.1h-22.1l0.2-0.6 0.4-1h-2.2v-8.3l-0.2 0.3-1.5 3.2-0.8 1.7-1.3 2.8-0.2 0.4h1.3l-0.2 0.6-0.4 1h-61.8l0.1-0.3 1.4-3.7h-2.1v-8.3l-1 2.2-0.2 0.4-1.3 2.7-1.6 3.2h1.3l-1.2 3.3-0.2 0.6h-51.3l0.4-1.1 0.4-0.9 0.9-2.3v-0.1l0.5-1.2h-3.4v-13.3l-3 6.5-0.2 0.4-2.5 5.4-0.5 1h2l-1.3 3.4-0.3 0.8-0.5 1.3h-43.3l-0.3-0.9h1.3l-1.2-2.8-0.1-0.2-1.5-3.5-0.3-0.5-0.7-1.5v2.2l-0.2 6.1-2.1-0.1 0.4 1.1h-57.4c-4.6 0-8.6-3-10-7.2 0-0.1-0.1-0.2-0.1-0.3-0.3-1-0.4-2-0.4-3v-9.7c0-5.9 4.7-10.6 10.5-10.6h17l0.1 0.4 0.2 0.5 0.5 1.2 0.2 0.6h-1.3l0.1 0.2 2.5 5.3 0.2 0.5 0.6 1.3 0.5 1h0.1v-8.2h2.1l-0.2-0.5-0.5-1.3-0.2-0.5v-0.5h129.4l-0.6 1.5-0.1 0.3-0.9 2.3-0.2 0.4-0.8 2.1h3.4v13.1l0.7-1.5 0.1-0.3 1.5-3.3 0.2-0.5 2.3-4.9 0.4-0.8 1-2.1h-2l0.8-2.2 0.2-0.5 0.9-2.3 0.1-0.3 0.4-1.1h40.8l0.2 0.5 0.3 0.8 1.3 3.4h-1.3l0.7 1.4 1.5 3.1 0.4 0.9 1.4 2.9v-8h2.1l-1.5-4-0.2-0.6 0.1-0.3h53.4c3.4 0 6.4 1.6 8.3 4.1 0.2 0.3 0.5 0.6 0.7 1 0.9 1.6 1.4 3.4 1.4 5.4z"/>

                            <path class="st1" d="m14.2 8.8c5.2-0.3 10.5-0.5 15.7-0.6l0.2 0.5c-5.3 0-10.6 0.1-15.9 0.3-0.2 0-0.2-0.2 0-0.2z"/>
                            <path class="st1" d="m83.6 14.9c-0.8 1.8-4.5 2.6-6.6 3.2-4.1 1.2-8.3 2.1-12.6 2.9-9.2 1.7-18.6 2.7-28 3.7-9.1 1-18.4 2.2-27.6 2.7-0.2 0-0.2-0.2 0-0.3 13.3-2.3 27-3.3 40.4-5.1 6.6-0.9 13.1-2 19.4-3.5 1.6-0.4 3.1-0.8 4.7-1.2 1.9-0.5 6.9-1.2 6.9-3.1 0-0.5-0.4-0.9-0.9-1.2s-1.1-0.5-1.7-0.7c-5.6-1.6-12-1.9-18-2.5-9.4-0.8-18.8-1.3-28.2-1.3v-0.3c9.5-0.1 18.9 0.2 28.3 1l10.2 0.9c2.2 0.2 4.4 0.2 6.7 0.6 2.7 0.4 8.3 1.4 7 4.2z"/>
                            <path class="st1" d="m88.2 16.9c-4.1 1.3-8.5 2.2-12.6 3.4-0.2 0.1-0.1 0.4 0.2 0.3 3.6-0.8 7.1-1.9 10.6-2.9 1.6-0.5 5.9-1.4 6.5-2.6 1.4-2.6-7.6-4.1-10.1-4.3 2.3 0.3 4.5 0.8 6.5 1.7 1.3 0.5 2.7 1.1 2.5 2.3-0.3 1.2-2.2 1.6-3.6 2.1z"/>
                            <path class="st1" d="m41.7 26.3c9.2-1.5 18.7-2.3 28.2-3.2v0.6c-9.3 1.1-18.7 2.5-28.1 2.9-0.3 0-0.4-0.3-0.1-0.3z"/>
                            <path class="st1" d="m111.9 15.2c0 0.4-0.5 0.6-1 0.7s-1.8 0.2-2.1 0.5c-1.9 0.5-3.9 1-5.8 1.5-0.9 0.2-1.8 0.5-2.6 0.7-3.7 1-7.4 2-11.3 2.7-5.4 0.9-10.8 1.5-16.2 2.1-0.7 0.1-1.3 0.1-2 0.2l-0.4-0.6c5.7-0.5 11.3-1.1 16.9-2 3.3-0.5 6.6-1.1 9.9-1.9 3.1-0.8 6.6-1.3 9-3 0.4-0.3 0.8-0.6 1-1 0.1-0.4 0-0.9-0.4-1.1-0.2-0.1-0.4-0.2-0.7-0.2-1.5-0.5-2.8-1.1-4.4-1.5-8-2-16.3-2.9-24.8-3.3-0.1 0-0.1-0.1 0-0.1 5.5-0.2 11.2 0.1 16.6 0.9 2.8 0.4 5.5 0.9 8.1 1.7 2.5 0.7 4.8 1.8 7.3 2.5 0.8 0.2 1.8 0.4 2.5 0.8 0.2 0 0.4 0.2 0.4 0.4z"/>
                            <path class="st1" d="m21.2 10.6c3.1-0.4 6.3-0.6 9.5-0.6l0.5 1c-3.3 0-6.6 0-10-0.1-0.2 0-0.3-0.3 0-0.3z"/>
                            <path class="st1" d="m67.5 16.3c-0.9 0.4-1.9 0.7-2.9 0.9-3.4 0.8-6.9 1.8-10.5 2.2-7.1 0.9-14.1 2.2-21.3 2.9-7.4 0.7-14.8 1.2-22.2 1.5-0.2 0-0.2-0.2 0-0.2 14.6-0.6 29.1-2.6 43.2-5.2 3.5-0.6 7.7-1 10.7-2.4 0.1 0 0.1-0.1 0.2-0.1 0.5-0.2 0.9-0.5 1.2-0.8s0.5-0.7 0.3-1.1-0.8-0.7-1.4-0.9c-0.9-0.3-1.6-0.3-2.5-0.4-1.7-0.3-3.5-0.5-5.3-0.6-4.1-0.4-8.2-0.7-12.3-0.9-4.4-0.2-8.8-0.2-13.3-0.1v-1c9.5-0.2 19.3 0.7 28.4 1.5 2.6 0.2 7.9 0.2 9.2 2.2 0.6 0.8-0.4 1.9-1.5 2.5z"/>
                            <path class="st1" d="m37.5 16c-10.8 0.3-21.6 0.8-32.5 1.1-4.6 0.2 0.6 0.3 1.9 0.4 1.8 0.2 3.7 0.3 5.5 0.6 4.1 0.5 8.1 1.3 12 2.5 0.1 0 0.1 0.1 0 0.2-7.9 1.2-15.9 2.2-23.9 2.8 0-0.1-0.1-0.2-0.1-0.3 6.5-0.6 13-1.1 19.5-2 0.9-0.1 1.7-0.2 2.6-0.4-0.5-0.8-1.4-1.2-2.6-1.3-1.8-0.6-4.1-0.8-6-1.1-4.1-0.6-8.3-0.9-12.4-1.2-0.2 0-0.2-0.2 0-0.2 9.6-0.3 19.3-0.7 28.9-1 1.1 0 4.5 0.2 5.4-0.3-0.8 0.2-5.8-0.8-6.6-1-4.4-0.6-8.9-1.2-13.3-1.9 7.3 0.9 14.5 1.9 21.7 2.8 0.1 0.1 0.1 0.3-0.1 0.3z"/>
                            <path class="st1" d="m162.7 8.9v0.7c-8.2 0.4-16.4 0.5-24.6 0.3-18.2-0.5-36.3-2.4-54.5-3-17.4-0.7-34.9-0.6-52.3-1.4v-0.5c17.4-0.2 35 0.5 52.3 1.1 17.9 0.7 35.7 2.4 53.6 3 8.5 0.3 17 0.2 25.5-0.2z"/>
                            <path class="st1" d="m211.4 6.3c-6.4 0.5-12.9 1-19.3 1.4-8.1 0.6-16.3 1.2-24.6 1.7l0.4-0.8c7.5-0.4 15-1 22.4-1.5 6.9-0.5 13.8-1.1 20.7-1.7l0.4 0.9z"/>
                            <path class="st1" d="m244.6 3c-9.9 1.2-19.9 2.1-29.9 3v-0.9c0.7-0.1 1.4-0.1 2.1-0.2 9.2-0.8 18.4-1.7 27.6-2.5 0.6-0.1 0.7 0.5 0.2 0.6z"/>
                            <path class="st1" d="m121 12.4c-2.6-0.6-5.5-0.9-8.2-1.4-0.1 0-0.2 0.1-0.1 0.1 2.8 0.5 5.5 1.1 8.3 1.3 0.1 0.1 0.1 0 0 0z"/>
                            <path class="st1" d="m134.7 15.1c-2.5-0.5-5.3-0.7-7.9-1.1 2.6 0.5 5.3 0.7 7.9 1.1z"/>
                            <path class="st1" d="m123.5 13.2c1.1 0.3 2.2 0.6 3.4 0.8-1.2-0.2-2.3-0.5-3.4-0.8z"/>
                            <path class="st1" d="m118.5 18.6c0.2 0 0.4-0.1 0.6-0.1l-0.2 0.4h-0.3c-0.2 0-0.3-0.2-0.1-0.3z"/>
                            <path class="st1" d="m139.2 16.2c-2.8 0-5.6 0-8.4 0.2-1.2 0.1-2.6 0-3.8 0.3-1.6 0-1.8 0.2-0.6 0.3 0.8 0.2 1.5 0.3 2.3 0.5 0.4 0.1 0.3 0.4-0.1 0.4-2.2 0.1-4.3 0.3-6.5 0.6v-0.5c0.7-0.1 1.4-0.2 2.1-0.2 0.2 0 2.7-0.3 2.8-0.2-0.3-0.2-2.5-0.5-3.2-0.6-0.3-0.1-0.4-0.4 0-0.5 2.5-0.2 5.1-0.5 7.6-0.5 1.3 0 2.5-0.1 3.8-0.1 1.2 0 3.3 0.3 1.2-0.3-0.6-0.2-1.3-0.3-1.9-0.5 1.5 0.2 3.1 0.5 4.5 0.8 0.5 0.1 0.4 0.3 0.2 0.3z"/>
                            <path class="st1" d="m112.3 21.4c-13.2 2.3-26.5 4.3-39.9 5.9l-0.1-0.2c13.4-1.7 26.7-3.7 39.8-6.1 0.4-0.1 0.6 0.3 0.2 0.4z"/>
                            <path class="st1" d="m109.9 28.7h6.7l-0.3 0.8c-3.2 0-6.4-0.1-9.7-0.1-0.6 0-0.7-0.6-0.1-0.7 1.9-0.3 3.7-0.8 5.4-1.5-7 0.7-14.1 1.5-21.1 2.4-2.7 0.3-5.5 0.8-8.2 1.2h-7.7c5.4-0.9 11.2-1.4 16.5-2 7.6-0.9 15.2-1.7 22.8-2.5 0.6 0 0.9 0.4 0.4 0.6-1.5 0.8-3.1 1.4-4.7 1.8z"/>
                            <path class="st1" d="m124.2 28.8c16.9 0.1 33.9 0.3 50.7 1.4l-0.2 0.6h-19.5c-10.4-0.5-20.9-0.9-31.4-1.1l0.4-0.9z"/>
                            <path class="st1" d="m183.6 30.8h-4.1l0.1-0.3c1.4 0.1 2.7 0.2 4 0.3z"/>
                            <path class="st1" d="m156.9 17.2c1.9 0.3 3.9 0.5 5.8 0.7v0.3c-3.1-0.4-6.2-0.7-9.4-1.1-0.1 0-0.1-0.2 0-0.2 0.2 0 1-0.1 2-0.2-0.3 0.1 0.1 0.3 1.6 0.5z"/>
                            <path class="st1" d="m177.9 20.6-0.2 0.4c-2.1-0.3-4.3-0.6-6.4-0.9-0.3 0-0.2-0.3 0-0.4-0.4-0.7-1.1-1-2.3-0.8-0.6-0.1-1.2-0.1-1.7-0.2-1.3-0.1-2.5-0.3-3.8-0.5l0.1-0.3c0.7 0.1 1.4 0.1 2.1 0.2 1.6 0.2 6.8-0.1 6.6 1.6 0 0.1-0.1 0.1-0.2 0.2 1.3-0.3 4 0.4 5.8 0.7z"/>
                            <path class="st1" d="m242 29.3-0.2 0.6c-6.9-0.5-13.8-1.4-20.5-2.4-14.2-2-28.2-4.3-42.4-6.3v-0.4c1.6 0.2 3.3 0.5 4.9 0.7 4.1 0.6 8.3 1.2 12.4 1.8 7.6 1 15.2 2.2 22.8 3.2 7.4 1 14.7 1.9 22 2.4l-0.2 0.4h1.2z"/>
                            <path class="st1" d="m244.7 29.1c0.4 0 0.8 0 1.3 0.1l-1.3-0.1z"/>
                            <path class="st1" d="m267.2 29.8c-6.8 0.8-13.8 0.8-20.8 0.4l0.4-1c6.7 0.3 13.4 0.3 20.3-0.1 0.5 0 0.6 0.6 0.1 0.7z"/>
                            <path class="st1" d="m155.2 16.7c1.1-0.1 2.5-0.3 3.2-0.5-1.3 0.1-2.8 0.2-3.2 0.5z"/>
                            <path class="st1" d="m158.1 15.2c1.5-0.2 3-0.4 4.5-0.6v0.4c-0.3 0-0.6 0.1-0.9 0.1-1.6 0.2-3.2 0.1-1 0.6 0.2 0 0.2 0.2 0 0.3-0.4 0-1.4 0.1-2.3 0.2 0.8-0.2 0.9-0.4-0.4-0.6-0.1-0.1-0.1-0.3 0.1-0.4z"/>
                            <path class="st1" d="m197.1 10.2c-6.8 1-13.5 2-20.3 2.9-3.2 0.4-6.5 0.9-9.7 1.3-0.7 0.1-1.4 0.2-2.1 0.3l0.2-0.5c10.6-1.5 21.2-2.8 31.8-4.1 0.2 0 0.2 0.1 0.1 0.1z"/>
                            <path class="st1" d="m231.6 23.1c3.8 0.5 7.6 0.9 11.4 1.3l-0.8 1.7c-4.1-0.5-8.1-1-12.1-1.6-13.8-1.9-29.2-3.5-41.1-8.8-0.4-0.2-0.5-0.6 0-0.8l1.7-0.6c-0.2-0.1-0.5-0.2-0.7-0.4-0.4-0.2-0.4-0.6 0.1-0.7 2.3-0.3 4.6-0.6 6.9-0.8 0.3 0 0.3 0.2 0.1 0.3-1.8 0.4-3.5 0.7-5.4 1 0.2 0.1 0.3 0.1 0.5 0.2 0.4 0.2 0.4 0.6 0 0.8l-1.5 0.6c6 2.3 12.7 3.5 19.3 4.5 7.2 1.2 14.3 2.3 21.6 3.3z"/>
                            <path class="st1" d="m276.2 27.2c-0.5 0.5-1 1-1.6 1.5-9.9-0.2-20-1.1-30-2.3v-1.9c10.6 1 21.1 1.7 31.6 2.7z"/>
                            <path class="st1" d="m212.8 9.4 0.4 0.9c-4.3 0.6-8.5 1.2-12.8 1.8-0.9 0.1-1.2-0.8-0.4-0.9 4.4-0.6 8.6-1.2 12.8-1.8z"/>
                            <path class="st1" d="m277.3 5.1c-21.2-1.2-42 2-62.7 5v-1c20.5-3 41-6.1 62-5 0.3 0.3 0.5 0.7 0.7 1z"/>
                            <path class="st1" d="m271 5.9c-8.5 0-17.1 0.8-25.3 1.9-3.6 0.5-7.2 1.1-10.8 1.9-3.1 0.6-7.9 1.2-10.5 2.5-7.3 3.8 5 5.6 8.1 6.2 3.3 0.6 6.6 1.2 9.9 1.6 8.3 1.2 16.7 1.8 25.2 2.1 0.8 0 0.8 0.9 0 0.9-7.7-0.2-15.4-0.8-23-1.8v-0.4l-0.2 0.3c-2.8-0.4-5.5-0.8-8.2-1.2-3.2-0.5-17.8-2.4-16.7-6.1 0.4-1.5 3.7-2 5.4-2.5 5.1-1.3 10.2-2.4 15.5-3.3 10.1-1.7 20.2-2.3 30.5-2.5 0.4 0.2 0.4 0.4 0.1 0.4z"/>
                            <path class="st1" d="m239.6 12.3c1-0.5 2.9-0.6 4.2-0.8 2.8-0.5 5.6-1 8.4-1.5 5.7-0.9 11.4-1.5 17.1-2.3 0.2 0 0.2-0.3 0-0.2-10 0.8-20.2 2.2-29.8 4.4-4.2 0.9-6.1 3.6-0.5 4.2 0.6 0.1 0.9-0.6 0.3-0.7-2.3-0.4-0.8-2.6 0.3-3.1z"/>
                            <path class="st1" d="M6,4C5.8,4,5.8,4.1,6,4c3.4,0.1,7,0.1,10.4-0.2c0.1,0,0.2-0.2,0-0.2C12.9,3.6,9.4,3.8,6,4z"/>
                            <path class="st1" d="m28.6 2.7h-1.3l0.1 0.2c-5.1-0.2-10.3-0.4-15.3-0.9-0.1 0-0.1-0.1 0-0.1 5.4-0.1 10.8 0 16.3 0.2l0.2 0.6z"/>
                            <path class="st1" d="m99.3 4.7c-14.8 0.2-29.7-0.7-44.5-1.1-7.8-0.3-15.6-0.3-23.5-0.5v-0.3h2.1l-0.2-0.5c7.5 0.3 15 0.8 22.4 1 14.5 0.5 29.2 0.4 43.6 1.3 0.3 0 0.3 0.1 0.1 0.1z"/>
                            <path class="st1" d="m105.7 4.5c0.1 0 0.1-0.1 0 0-0.8-0.1-1.6-0.1-2.5-0.1-0.1 0-0.1 0.1 0 0.1h2.5z"/>
                            <path class="st1" d="m160.2 4.1-0.2 0.4c-14.7 0.6-29.3 0.8-44 0.5-0.1 0-0.1-0.1 0-0.1 14.9 0.4 29.6 0 44.2-0.8z"/>
                            <path class="st1" d="m210.6 1.3c-14.2 1.2-28.5 2.2-42.9 2.9l0.2-0.5c14.2-0.8 28.3-2 42.4-3.2l0.3 0.8z"/>
                            <path class="st1" d="m221.7 0.3c-2.1 0.2-4.3 0.4-6.4 0.6l-0.2-0.6h6.6z"/>
                            <path class="st1" d="m27.7 0.4 0.2 0.5c-2.1-0.1-4.2-0.2-6.2-0.6h4.1c0.7 0 1.3 0.1 1.9 0.1z"/>
                            <path class="st1" d="m65 1.6c-8.5 0-17.1-0.4-25.7-0.6-2.1-0.1-4.3 0-6.6 0l-0.2-0.5c3.2 0.1 6.4 0.2 9.5 0.3 7.8 0.1 15.4 0.2 23 0.6 0.2 0 0.2 0.2 0 0.2z"/>
                            <path class="st1" d="m150 2c3.8-0.1 7.5-0.3 11.3-0.5l-0.1 0.3c-3.1 0.1-6.3 0.3-9.4 0.4-13.3 0.5-26.4-0.5-39.7-0.5-13.8-0.1-27.5 0.3-41.2 0.6 13.4-0.3 26.9-0.9 40.3-0.9 12.9-0.1 25.8 1 38.8 0.6z"/>
                            <path class="st1" d="m185.8 0.3c-5.7 0.4-11.3 0.8-17 1.1l0.1-0.3c4.2-0.2 8.3-0.5 12.5-0.8h4.4z"/>
                            <path class="st1" d="m175.5 25.7-0.1 0.2c-16.8-1.2-33.6-1.1-50.3 0.6v-0.1c16.7-1.8 33.6-1.8 50.4-0.7z"/>
                            <path class="st1" d="m217.1 30.8h-1.3c-0.8-0.1-1.6-0.3-2.4-0.4-10.1-1.6-20.3-3-30.6-3.9-1.3-0.1-2.5-0.2-3.8-0.3v-0.2c0.4 0 0.9 0.1 1.3 0.1 10 0.8 20 2.1 29.9 3.6 2.2 0.3 4.5 0.7 6.9 1.1z"/>
                            <path class="st1" d="m112.2 24.8c1.4-0.2 2.9-0.3 4.3-0.5l-0.1 0.2c-1.5 0.1-2.8 0.2-4.2 0.3-0.1 0-0.1 0 0 0z"/>
                            <path class="st1" d="m122.9 23.8c-0.2 0-0.5 0.1-0.7 0.1v-0.1c0.2 0 0.5-0.1 0.7 0 0.1-0.1 0.1 0 0 0z"/>
                            <path class="st1" d="m176.4 23.7-0.2 0.4c-16.4-1.7-32.7-2.9-49.3-0.7-0.1 0-0.1-0.1 0-0.1 16.2-2.2 33.1-1.4 49.5 0.4z"/>
                            <path class="st1" d="m190.8 25.7c-4-0.4-8-0.9-12-1.3v-0.4c4 0.5 8 1 12 1.6 0.2 0 0.2 0.1 0 0.1z"/>
                            <path class="st1" d="m150.1 18.9c-6.2 0.1-12.5 0.5-18.7 0.8-0.1 0-0.1 0.2 0 0.2 6.2-0.2 12.5-0.3 18.7-0.8 0.2 0 0.2-0.2 0-0.2z"/>

                        <polygon class="st0" points="241.3 30.9 246.2 30.8 246.8 29.2 244.7 29.1 244.6 20.8 240.8 28.9 241.1 29.3 242 29.3"/>
                        <polygon class="st0" points="174.7 31 179.5 30.8 181 26.9 178.9 27 176.1 27.1"/>
                        <polyline class="st0" points="178.9 18.6 174.8 27.1 178.9 27"/>
                        <polygon class="st0" points="161.8 0 159.2 6.6 162.6 6.6 162.6 19.7 168.8 6.3 166.8 6.3 169.2 -0.1"/>
                        <polygon class="st0" points="115.9 30.9 123.4 31 125.6 25.4 122.2 25.4 122.2 12.1 116 25.4 118 25.4"/>
                        <polygon class="st0" points="67.9 30.8 67.5 29.7 69.6 29.8 69.8 21.5 73.6 30 72.3 30 72.6 30.9"/>
                        <polygon class="st0" points="210 -0.1 211.8 4.6 210.5 4.6 214.5 12.9 214.5 4.9 216.6 4.9 215 0"/>
                        <polygon class="st0" points="31.2 2.8 33.3 2.8 32.3 0 27.4 0 28.5 2.7 27.2 2.7 27.3 2.9 31.1 11 31.2 11"/>
                        <polygon class="st1" points="211 5.4 214.7 5.1 214.7 6 211.2 6.3"/>
                        <polygon class="st1" points="210.5 1.2 215.3 0.9 215.1 0.3 210.3 0.6"/>
                        <polygon class="st1" points="213.2 10.3 214.6 10.1 214.7 9.1 212.5 9.4"/>
                        <polygon class="st1" points="240.8 28.9 247.5 29.2 246.8 30.2 240.4 29.8 240.8 29.1"/>
                        <polygon class="st1" points="242 24.3 245.7 24.6 245.4 26.5 241 25.9"/>
                        <polygon class="st1" points="243.8 21 244.2 20.5 245.5 20.8 245.5 21.3"/>
                        <polygon class="st1" points="175.4 25.9 179.7 26.3 179.7 26.1 174.7 25.6"/>
                        <polygon class="st1" points="175.7 23.6 179.9 24.1 179.7 24.5 175.8 24.1"/>
                        <polygon class="st1" points="177.2 20.5 180.1 21 180.1 21.4 177.2 20.9"/>
                        <polygon class="st1" points="163.9 18.3 161.8 18.1 162.1 17.8 164.2 18"/>
                        <polygon class="st1" points="162.1 14.7 165.9 14.1 166 14.6 162.1 15.1"/>
                        <polygon class="st1" points="161.8 9.6 169.6 9.3 169.7 8.5 161 9"/>
                        <polygon class="st1" points="158.4 4.6 169.9 4.1 169.9 3.6 159.4 4.2"/>
                        <polygon class="st1" points="160.3 1.8 170.1 1.3 170.1 1 160.5 1.5"/>
                        <polygon class="st1" points="124.9 29.7 112.8 29.5 113.5 28.7 129.3 28.8"/>
                        <polygon class="st1" points="116.1 24.5 122.6 23.8 116.3 24.3"/>
                        <polygon class="st1" points="122.8 18.4 118.9 18.9 118.9 18.5 123.6 17.8"/>
                        <polygon class="st1" points="68.7 23.8 74.2 23.2 73.7 22.7 68.8 23.2"/>
                        <polygon class="st1" points="32.5 11.1 29.3 11 29.5 10 33.7 10.1"/>
                        <polygon class="st1" points="32.2 8.5 27.9 8.7 28.4 8.2 33.3 8.2"/>
                        <polygon class="st1" points="32.5 5.5 25.6 5.2 32.2 5"/>
                        <polygon class="st1" points="31.3 3.1 26.1 2.8 27.6 2.1 34.4 2.4 34.3 3.1"/>
                        <polygon class="st1" points="33.3 1 27 0.9 27 0.4 33.5 0.6"/>
                    </svg>
                    `
                ,
                breakablePlatform2:
                    `
                    <svg enable-background="new 0 0 280.5 30.8" version="1.1" viewBox="0 0 280.5 30.8" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                        <style type="text/css">
                            .st0{fill:#C68347;}
                            .st1{fill:#6B463B;}
                            .st2{fill:none;stroke:#231F20;stroke-width:0.183;stroke-miterlimit:10;}
                        </style>
                        <path class="st0" d="m278.8 10.5v9.7c0 2.7-1 5.1-2.6 7-0.5 0.5-1 1-1.6 1.5-1.8 1.3-3.9 2.1-6.3 2.1h-22.1l0.2-0.6 0.4-1h-2.2v-8.3l-0.2 0.3-1.5 3.2-0.8 1.7-1.3 2.8-0.2 0.4h1.3l-0.2 0.6-0.4 1h-61.8l0.1-0.3 1.4-3.7h-2.1v-8.3l-1 2.2-0.2 0.4-1.3 2.7-1.6 3.2h1.3l-1.2 3.3-0.2 0.6h-51.3l0.4-1.1 0.4-0.9 0.9-2.3v-0.1l0.5-1.2h-3.4v-13.3l-3 6.5-0.2 0.4-2.5 5.4-0.5 1h2l-1.3 3.4-0.3 0.8-0.5 1.3h-43.3l-0.3-0.9h1.3l-1.2-2.8-0.1-0.2-1.5-3.5-0.3-0.5-0.7-1.5v1.6 0.6l-0.2 6.1-2.1-0.1 0.4 1.1h-57.4c-4.6 0-8.6-3-10-7.2 0-0.1-0.1-0.2-0.1-0.3-0.3-1-0.4-2-0.4-3v-9.7c0-5.9 4.7-10.6 10.5-10.6h17l0.1 0.4 0.2 0.5 0.5 1.2 0.2 0.6h-1.3l0.1 0.2 2.5 5.3 0.2 0.5 0.6 1.3 0.5 1h0.1v-8.2h2.1l-0.2-0.5-0.5-1.3-0.2-0.5v-0.5h129.4l-0.6 1.5-0.1 0.3-0.9 2.3-0.2 0.4-0.8 2.1h3.4v13.1l0.7-1.5 0.1-0.3 1.5-3.3 0.2-0.5 2.3-4.9 0.4-0.8 1-2.1h-2l0.8-2.2 0.2-0.5 0.9-2.3 0.1-0.3 0.4-1.1h40.8l0.2 0.5 0.3 0.8 1.3 3.4h-1.3l0.7 1.4 1.5 3.1 0.4 0.9 1.4 2.9v-8h2.1l-1.5-4-0.2-0.6 0.1-0.3h53.4c3.4 0 6.4 1.6 8.3 4.1 0.2 0.3 0.5 0.6 0.7 1 0.9 1.6 1.4 3.4 1.4 5.4z"/>

                            <path class="st1" d="m14.2 8.8c5.2-0.3 10.5-0.5 15.7-0.6l0.2 0.5c-5.3 0-10.6 0.1-15.9 0.3-0.2 0-0.2-0.2 0-0.2z"/>
                            <path class="st1" d="m83.6 14.9c-0.8 1.8-4.5 2.6-6.6 3.2-4.1 1.2-8.3 2.1-12.6 2.9-9.2 1.7-18.6 2.7-28 3.7-9.1 1-18.4 2.2-27.6 2.7-0.2 0-0.2-0.2 0-0.3 13.3-2.3 27-3.3 40.4-5.1 6.6-0.9 13.1-2 19.4-3.5 1.6-0.4 3.1-0.8 4.7-1.2 1.9-0.5 6.9-1.2 6.9-3.1 0-0.5-0.4-0.9-0.9-1.2s-1.1-0.5-1.7-0.7c-5.6-1.6-12-1.9-18-2.5-9.4-0.8-18.8-1.3-28.2-1.3v-0.3c9.5-0.1 18.9 0.2 28.3 1l10.2 0.9c2.2 0.2 4.4 0.2 6.7 0.6 2.7 0.4 8.3 1.4 7 4.2z"/>
                            <path class="st1" d="m88.2 16.9c-4.1 1.3-8.5 2.2-12.6 3.4-0.2 0.1-0.1 0.4 0.2 0.3 3.6-0.8 7.1-1.9 10.6-2.9 1.6-0.5 5.9-1.4 6.5-2.6 1.4-2.6-7.6-4.1-10.1-4.3 2.3 0.3 4.5 0.8 6.5 1.7 1.3 0.5 2.7 1.1 2.5 2.3-0.3 1.2-2.2 1.6-3.6 2.1z"/>
                            <path class="st1" d="m41.7 26.3c9.2-1.5 18.7-2.3 28.2-3.2v0.6c-9.3 1.1-18.7 2.5-28.1 2.9-0.3 0-0.4-0.3-0.1-0.3z"/>
                            <path class="st1" d="m111.9 15.2c0 0.4-0.5 0.6-1 0.7s-1.8 0.2-2.1 0.5c-1.9 0.5-3.9 1-5.8 1.5-0.9 0.2-1.8 0.5-2.6 0.7-3.7 1-7.4 2-11.3 2.7-5.4 0.9-10.8 1.5-16.2 2.1-0.7 0.1-1.3 0.1-2 0.2l-0.4-0.6c5.7-0.5 11.3-1.1 16.9-2 3.3-0.5 6.6-1.1 9.9-1.9 3.1-0.8 6.6-1.3 9-3 0.4-0.3 0.8-0.6 1-1 0.1-0.4 0-0.9-0.4-1.1-0.2-0.1-0.4-0.2-0.7-0.2-1.5-0.5-2.8-1.1-4.4-1.5-8-2-16.3-2.9-24.8-3.3-0.1 0-0.1-0.1 0-0.1 5.5-0.2 11.2 0.1 16.6 0.9 2.8 0.4 5.5 0.9 8.1 1.7 2.5 0.7 4.8 1.8 7.3 2.5 0.8 0.2 1.8 0.4 2.5 0.8 0.2 0 0.4 0.2 0.4 0.4z"/>
                            <path class="st1" d="m21.2 10.6c3.1-0.4 6.3-0.6 9.5-0.6l0.5 1c-3.3 0-6.6 0-10-0.1-0.2 0-0.3-0.3 0-0.3z"/>
                            <path class="st1" d="m67.5 16.3c-0.9 0.4-1.9 0.7-2.9 0.9-3.4 0.8-6.9 1.8-10.5 2.2-7.1 0.9-14.1 2.2-21.3 2.9-7.4 0.7-14.8 1.2-22.2 1.5-0.2 0-0.2-0.2 0-0.2 14.6-0.6 29.1-2.6 43.2-5.2 3.5-0.6 7.7-1 10.7-2.4 0.1 0 0.1-0.1 0.2-0.1 0.5-0.2 0.9-0.5 1.2-0.8s0.5-0.7 0.3-1.1-0.8-0.7-1.4-0.9c-0.9-0.3-1.6-0.3-2.5-0.4-1.7-0.3-3.5-0.5-5.3-0.6-4.1-0.4-8.2-0.7-12.3-0.9-4.4-0.2-8.8-0.2-13.3-0.1v-1c9.5-0.2 19.3 0.7 28.4 1.5 2.6 0.2 7.9 0.2 9.2 2.2 0.6 0.8-0.4 1.9-1.5 2.5z"/>
                            <path class="st1" d="m37.5 16c-10.8 0.3-21.6 0.8-32.5 1.1-4.6 0.2 0.6 0.3 1.9 0.4 1.8 0.2 3.7 0.3 5.5 0.6 4.1 0.5 8.1 1.3 12 2.5 0.1 0 0.1 0.1 0 0.2-7.9 1.2-15.9 2.2-23.9 2.8 0-0.1-0.1-0.2-0.1-0.3 6.5-0.6 13-1.1 19.5-2 0.9-0.1 1.7-0.2 2.6-0.4-0.5-0.8-1.4-1.2-2.6-1.3-1.8-0.6-4.1-0.8-6-1.1-4.1-0.6-8.3-0.9-12.4-1.2-0.2 0-0.2-0.2 0-0.2 9.6-0.3 19.3-0.7 28.9-1 1.1 0 4.5 0.2 5.4-0.3-0.8 0.2-5.8-0.8-6.6-1-4.4-0.6-8.9-1.2-13.3-1.9 7.3 0.9 14.5 1.9 21.7 2.8 0.1 0.1 0.1 0.3-0.1 0.3z"/>
                            <path class="st1" d="m162.7 8.9v0.7c-8.2 0.4-16.4 0.5-24.6 0.3-18.2-0.5-36.3-2.4-54.5-3-17.4-0.7-34.9-0.6-52.3-1.4v-0.5c17.4-0.2 35 0.5 52.3 1.1 17.9 0.7 35.7 2.4 53.6 3 8.5 0.3 17 0.2 25.5-0.2z"/>
                            <path class="st1" d="m211.4 6.3c-6.4 0.5-12.9 1-19.3 1.4-8.1 0.6-16.3 1.2-24.6 1.7l0.4-0.8c7.5-0.4 15-1 22.4-1.5 6.9-0.5 13.8-1.1 20.7-1.7l0.4 0.9z"/>
                            <path class="st1" d="m244.6 3c-9.9 1.2-19.9 2.1-29.9 3v-0.9c0.7-0.1 1.4-0.1 2.1-0.2 9.2-0.8 18.4-1.7 27.6-2.5 0.6-0.1 0.7 0.5 0.2 0.6z"/>
                            <path class="st1" d="m121 12.4c-2.6-0.6-5.5-0.9-8.2-1.4-0.1 0-0.2 0.1-0.1 0.1 2.8 0.5 5.5 1.1 8.3 1.3 0.1 0.1 0.1 0 0 0z"/>
                            <path class="st1" d="m134.7 15.1c-2.5-0.5-5.3-0.7-7.9-1.1 2.6 0.5 5.3 0.7 7.9 1.1z"/>
                            <path class="st1" d="m123.5 13.2c1.1 0.3 2.2 0.6 3.4 0.8-1.2-0.2-2.3-0.5-3.4-0.8z"/>
                            <path class="st1" d="m118.5 18.6c0.2 0 0.4-0.1 0.6-0.1l-0.2 0.4h-0.3c-0.2 0-0.3-0.2-0.1-0.3z"/>
                            <path class="st1" d="m139.2 16.2c-2.8 0-5.6 0-8.4 0.2-1.2 0.1-2.6 0-3.8 0.3-1.6 0-1.8 0.2-0.6 0.3 0.8 0.2 1.5 0.3 2.3 0.5 0.4 0.1 0.3 0.4-0.1 0.4-2.2 0.1-4.3 0.3-6.5 0.6v-0.5c0.7-0.1 1.4-0.2 2.1-0.2 0.2 0 2.7-0.3 2.8-0.2-0.3-0.2-2.5-0.5-3.2-0.6-0.3-0.1-0.4-0.4 0-0.5 2.5-0.2 5.1-0.5 7.6-0.5 1.3 0 2.5-0.1 3.8-0.1 1.2 0 3.3 0.3 1.2-0.3-0.6-0.2-1.3-0.3-1.9-0.5 1.5 0.2 3.1 0.5 4.5 0.8 0.5 0.1 0.4 0.3 0.2 0.3z"/>
                            <path class="st1" d="m112.3 21.4c-13.2 2.3-26.5 4.3-39.9 5.9l-0.1-0.2c13.4-1.7 26.7-3.7 39.8-6.1 0.4-0.1 0.6 0.3 0.2 0.4z"/>
                            <path class="st1" d="m109.9 28.7h6.7l-0.3 0.8c-3.2 0-6.4-0.1-9.7-0.1-0.6 0-0.7-0.6-0.1-0.7 1.9-0.3 3.7-0.8 5.4-1.5-7 0.7-14.1 1.5-21.1 2.4-2.7 0.3-5.5 0.8-8.2 1.2h-7.7c5.4-0.9 11.2-1.4 16.5-2 7.6-0.9 15.2-1.7 22.8-2.5 0.6 0 0.9 0.4 0.4 0.6-1.5 0.8-3.1 1.4-4.7 1.8z"/>
                            <path class="st1" d="m124.2 28.8c16.9 0.1 33.9 0.3 50.7 1.4l-0.2 0.6h-19.5c-10.4-0.5-20.9-0.9-31.4-1.1l0.4-0.9z"/>
                            <path class="st1" d="m183.6 30.8h-4.1l0.1-0.3c1.4 0.1 2.7 0.2 4 0.3z"/>
                            <path class="st1" d="m156.9 17.2c1.9 0.3 3.9 0.5 5.8 0.7v0.3c-3.1-0.4-6.2-0.7-9.4-1.1-0.1 0-0.1-0.2 0-0.2 0.2 0 1-0.1 2-0.2-0.3 0.1 0.1 0.3 1.6 0.5z"/>
                            <path class="st1" d="m177.9 20.6-0.2 0.4c-2.1-0.3-4.3-0.6-6.4-0.9-0.3 0-0.2-0.3 0-0.4-0.4-0.7-1.1-1-2.3-0.8-0.6-0.1-1.2-0.1-1.7-0.2-1.3-0.1-2.5-0.3-3.8-0.5l0.1-0.3c0.7 0.1 1.4 0.1 2.1 0.2 1.6 0.2 6.8-0.1 6.6 1.6 0 0.1-0.1 0.1-0.2 0.2 1.3-0.3 4 0.4 5.8 0.7z"/>
                            <path class="st1" d="m242 29.3-0.2 0.6c-6.9-0.5-13.8-1.4-20.5-2.4-14.2-2-28.2-4.3-42.4-6.3v-0.4c1.6 0.2 3.3 0.5 4.9 0.7 4.1 0.6 8.3 1.2 12.4 1.8 7.6 1 15.2 2.2 22.8 3.2 7.4 1 14.7 1.9 22 2.4l-0.2 0.4h1.2z"/>
                            <path class="st1" d="m244.7 29.1c0.4 0 0.8 0 1.3 0.1l-1.3-0.1z"/>
                            <path class="st1" d="m267.2 29.8c-6.8 0.8-13.8 0.8-20.8 0.4l0.4-1c6.7 0.3 13.4 0.3 20.3-0.1 0.5 0 0.6 0.6 0.1 0.7z"/>
                            <path class="st1" d="m155.2 16.7c1.1-0.1 2.5-0.3 3.2-0.5-1.3 0.1-2.8 0.2-3.2 0.5z"/>
                            <path class="st1" d="m158.1 15.2c1.5-0.2 3-0.4 4.5-0.6v0.4c-0.3 0-0.6 0.1-0.9 0.1-1.6 0.2-3.2 0.1-1 0.6 0.2 0 0.2 0.2 0 0.3-0.4 0-1.4 0.1-2.3 0.2 0.8-0.2 0.9-0.4-0.4-0.6-0.1-0.1-0.1-0.3 0.1-0.4z"/>
                            <path class="st1" d="m197.1 10.2c-6.8 1-13.5 2-20.3 2.9-3.2 0.4-6.5 0.9-9.7 1.3-0.7 0.1-1.4 0.2-2.1 0.3l0.2-0.5c10.6-1.5 21.2-2.8 31.8-4.1 0.2 0 0.2 0.1 0.1 0.1z"/>
                            <path class="st1" d="m231.6 23.1c3.8 0.5 7.6 0.9 11.4 1.3l-0.8 1.7c-4.1-0.5-8.1-1-12.1-1.6-13.8-1.9-29.2-3.5-41.1-8.8-0.4-0.2-0.5-0.6 0-0.8l1.7-0.6c-0.2-0.1-0.5-0.2-0.7-0.4-0.4-0.2-0.4-0.6 0.1-0.7 2.3-0.3 4.6-0.6 6.9-0.8 0.3 0 0.3 0.2 0.1 0.3-1.8 0.4-3.5 0.7-5.4 1 0.2 0.1 0.3 0.1 0.5 0.2 0.4 0.2 0.4 0.6 0 0.8l-1.5 0.6c6 2.3 12.7 3.5 19.3 4.5 7.2 1.2 14.3 2.3 21.6 3.3z"/>
                            <path class="st1" d="m276.2 27.2c-0.5 0.5-1 1-1.6 1.5-9.9-0.2-20-1.1-30-2.3v-1.9c10.6 1 21.1 1.7 31.6 2.7z"/>
                            <path class="st1" d="m212.8 9.4 0.4 0.9c-4.3 0.6-8.5 1.2-12.8 1.8-0.9 0.1-1.2-0.8-0.4-0.9 4.4-0.6 8.6-1.2 12.8-1.8z"/>
                            <path class="st1" d="m277.3 5.1c-21.2-1.2-42 2-62.7 5v-1c20.5-3 41-6.1 62-5 0.3 0.3 0.5 0.7 0.7 1z"/>
                            <path class="st1" d="m271 5.9c-8.5 0-17.1 0.8-25.3 1.9-3.6 0.5-7.2 1.1-10.8 1.9-3.1 0.6-7.9 1.2-10.5 2.5-7.3 3.8 5 5.6 8.1 6.2 3.3 0.6 6.6 1.2 9.9 1.6 8.3 1.2 16.7 1.8 25.2 2.1 0.8 0 0.8 0.9 0 0.9-7.7-0.2-15.4-0.8-23-1.8v-0.4l-0.2 0.3c-2.8-0.4-5.5-0.8-8.2-1.2-3.2-0.5-17.8-2.4-16.7-6.1 0.4-1.5 3.7-2 5.4-2.5 5.1-1.3 10.2-2.4 15.5-3.3 10.1-1.7 20.2-2.3 30.5-2.5 0.4 0.2 0.4 0.4 0.1 0.4z"/>
                            <path class="st1" d="m239.6 12.3c1-0.5 2.9-0.6 4.2-0.8 2.8-0.5 5.6-1 8.4-1.5 5.7-0.9 11.4-1.5 17.1-2.3 0.2 0 0.2-0.3 0-0.2-10 0.8-20.2 2.2-29.8 4.4-4.2 0.9-6.1 3.6-0.5 4.2 0.6 0.1 0.9-0.6 0.3-0.7-2.3-0.4-0.8-2.6 0.3-3.1z"/>
                            <path class="st1" d="M6,4C5.8,4,5.8,4.1,6,4.1c3.4,0,7,0,10.4-0.3c0.1,0,0.2-0.2,0-0.2C12.9,3.6,9.4,3.8,6,4z"/>
                            <path class="st1" d="m28.6 2.7h-1.3l0.1 0.2c-5.1-0.2-10.3-0.4-15.3-0.9-0.1 0-0.1-0.1 0-0.1 5.4-0.1 10.8 0 16.3 0.2l0.2 0.6z"/>
                            <path class="st1" d="m99.3 4.7c-14.8 0.2-29.7-0.7-44.5-1.1-7.8-0.3-15.6-0.3-23.5-0.5v-0.3h2.1l-0.2-0.5c7.5 0.3 15 0.8 22.4 1 14.5 0.5 29.2 0.4 43.6 1.3 0.3 0 0.3 0.1 0.1 0.1z"/>
                            <path class="st1" d="m105.7 4.5c0.1 0 0.1-0.1 0 0-0.8-0.1-1.6-0.1-2.5-0.1-0.1 0-0.1 0.1 0 0.1h2.5z"/>
                            <path class="st1" d="m160.2 4.1-0.2 0.4c-14.7 0.6-29.3 0.8-44 0.5-0.1 0-0.1-0.1 0-0.1 14.9 0.4 29.6 0 44.2-0.8z"/>
                            <path class="st1" d="m210.6 1.3c-14.2 1.2-28.5 2.2-42.9 2.9l0.2-0.5c14.2-0.8 28.3-2 42.4-3.2l0.3 0.8z"/>
                            <path class="st1" d="m221.7 0.3c-2.1 0.2-4.3 0.4-6.4 0.6l-0.2-0.6h6.6z"/>
                            <path class="st1" d="m27.7 0.4 0.2 0.5c-2.1-0.1-4.2-0.2-6.2-0.6h4.1c0.7 0 1.3 0.1 1.9 0.1z"/>
                            <path class="st1" d="m65 1.6c-8.5 0-17.1-0.4-25.7-0.6-2.1-0.1-4.3 0-6.6 0l-0.2-0.5c3.2 0.1 6.4 0.2 9.5 0.3 7.8 0.1 15.4 0.2 23 0.6 0.2 0 0.2 0.2 0 0.2z"/>
                            <path class="st1" d="m150 2c3.8-0.1 7.5-0.3 11.3-0.5l-0.1 0.3c-3.1 0.1-6.3 0.3-9.4 0.4-13.3 0.5-26.4-0.5-39.7-0.5-13.8-0.1-27.5 0.3-41.2 0.6 13.4-0.3 26.9-0.9 40.3-0.9 12.9-0.1 25.8 1 38.8 0.6z"/>
                            <path class="st1" d="m185.8 0.3c-5.7 0.4-11.3 0.8-17 1.1l0.1-0.3c4.2-0.2 8.3-0.5 12.5-0.8h4.4z"/>
                            <path class="st1" d="m175.5 25.7-0.1 0.2c-16.8-1.2-33.6-1.1-50.3 0.6v-0.1c16.7-1.8 33.6-1.8 50.4-0.7z"/>
                            <path class="st1" d="m217.1 30.8h-1.3c-0.8-0.1-1.6-0.3-2.4-0.4-10.1-1.6-20.3-3-30.6-3.9-1.3-0.1-2.5-0.2-3.8-0.3v-0.2c0.4 0 0.9 0.1 1.3 0.1 10 0.8 20 2.1 29.9 3.6 2.2 0.3 4.5 0.7 6.9 1.1z"/>
                            <path class="st1" d="m112.2 24.8c1.4-0.2 2.9-0.3 4.3-0.5l-0.1 0.2c-1.5 0.1-2.8 0.2-4.2 0.3-0.1 0-0.1 0 0 0z"/>
                            <path class="st1" d="m122.9 23.8c-0.2 0-0.5 0.1-0.7 0.1v-0.1c0.2 0 0.5-0.1 0.7 0 0.1-0.1 0.1 0 0 0z"/>
                            <path class="st1" d="m176.4 23.7-0.2 0.4c-16.4-1.7-32.7-2.9-49.3-0.7-0.1 0-0.1-0.1 0-0.1 16.2-2.2 33.1-1.4 49.5 0.4z"/>
                            <path class="st1" d="m190.8 25.7c-4-0.4-8-0.9-12-1.3v-0.4c4 0.5 8 1 12 1.6 0.2 0 0.2 0.1 0 0.1z"/>
                            <path class="st1" d="m150.1 18.9c-6.2 0.1-12.5 0.5-18.7 0.8-0.1 0-0.1 0.2 0 0.2 6.2-0.2 12.5-0.3 18.7-0.8 0.2 0 0.2-0.2 0-0.2z"/>

                        <line class="st2" x1="31.3" x2="31.2" y1="11" y2="11"/>
                    </svg>
                    `
            };

            //#endregion

        let platformsArray = [];

        let statIndex = 0;

        const firstPlatformY = 0;
        const firstPlatformX = canvas.width/2 - 25/2;

        class Platform {
            constructor(index, maxIndex){
                this.id = 0;
                this.x;
                this.y;
                this.width = 25;
                this.height = 10;
                this.moveStrength = 0.75;
                this.animDuration = 500;
                this.animFrame = 0;
                this.type = 'none';
                this.breakCount = 0;
                this.cDetection = 0;
                this.id = statIndex;
                statIndex++;

                if (this.id !== 0) {
                    platformRandomizerAlgorithm(this, index, maxIndex);
                } else {
                    this.x = firstPlatformX;
                    this.y = firstPlatformY;
                }

            };

            draw(){

                let img = new Image();

                if (this.type == 'particle') {
                    img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(Object.values(platformSVGContainer)[1])}`;
                
                } else if (this.type == 'moving') {
                    img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(Object.values(platformSVGContainer)[2])}`;    
                
                } else if (this.type == 'breakable' && this.breakCount === 0) {
                    img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(Object.values(platformSVGContainer)[3])}`;

                } else if (this.type == 'breakable' && this.breakCount > 0) {
                    img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(Object.values(platformSVGContainer)[4])}`;

                } else {
                    img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(Object.values(platformSVGContainer)[0])}`;

                };  
                
                ctx.drawImage(img, this.x, this.y - camera.y, this.width, this.height);
            };

            handle(){
                if (player.isFalling === true && player.isJumping === false && player.isFlying === false) {
                    
                    if (trambolineCollisionDetection(player, this)) {
                        this.cDetection++;

                        if (this.cDetection === 2) {
                            player.jumpStrength = 1;
                            player.jumpDuration = 100;
                            player.jumpFrame = 0;
                            this.cDetection = 0;    
                            
                            player.isFalling = false;
                            player.isJumping = true;

                            if (player.jumpStrength < 2) {
                                setTimeout(()=> {
                                    player.jumpStrength = 5;
                                }, 20);
                            };

                            if (this.type == 'breakable') {
                                this.breakCount++;
                                if (this.breakCount === 4) {
                                    deletePlatform(this);
                                };
                            };
                        };

                    } else if (platformCollisionDetection(player, this)) {
                        this.cDetection++;
                        
                        if (this.cDetection === 2) {
                            player.jumpStrength = 1;
                            player.jumpDuration = 100;
                            player.jumpFrame = 0;
                            this.cDetection = 0;
                            
                            player.isFalling = false;
                            player.isJumping = true;

                            if (player.jumpStrength < 2) {
                                setTimeout(()=> {
                                    player.jumpStrength = 5;
                                }, 20);
                            };
                        };
                        
                        if (this.type == 'breakable') {
                            this.breakCount++;
                            if (this.breakCount === 4) {
                                deletePlatform(this);
                            };
                        };
                    };
                };

                if ( (camera.height + camera.y) < this.y) {
                    deletePlatform(this);
                };
            };

            animation(){ 
                if (this.type == 'particle' || this.type == 'moving') {

                    if (this.animDuration > this.animFrame) {
    
    
                        if (this.animDuration / 2 <= this.animFrame) {
                            this.x += -this.moveStrength ;
                            this.animFrame++;
                        } else {
                            this.x += this.moveStrength;
                            this.animFrame++;
                        };
                        if (this.animFrame === this.animDuration) {
                            this.animFrame = 0;
                        };
                    };    
                    if (this.x < 0) {
                        this.x += canvas.width;
                    } else if (this.x + this.width > canvas.width) {
                        this.x -= canvas.width;
                    };
                };
            };
        };

        let spawnFrequency;
        let yRate = -1;

        function platformSpawner() {
            yRate++;
            const spawnRate = Math.random();
            
            if (spawnRate < 0.5) {
                spawnFrequency = 2;
            } else {
                spawnFrequency = 3;
            };
            for (let i = 0; i < spawnFrequency; i++) {
                platformsArray.push(new Platform(i, spawnFrequency));
            };
        };

        function handlePlatforms() {
            for (let i = 0; i < platformsArray.length; i++) {
                platformsArray[i].draw();
                platformsArray[i].animation();
                platformsArray[i].handle();
            };
        };
        
        function platformRandomizerAlgorithm(platform, index, maxIndex) {
            
            let wParam = Math.random();

            platformCoordinateRandomizer(platform, index, maxIndex, wParam);
            
            platformTypeRandomizer(platform, wParam);
            
        };
        
        function platformTypeRandomizer(platform, wParam) {
            
            let firstParam = Math.floor(Math.random() * 1000);
            let secondParam = Math.floor(Math.random() * 2);
            
            if (firstParam < 10) {
                if (secondParam >= 1) {
                    platform.type = 'tramboline';
                    createTrambolines(platform);
                } else {
                    platform.type = 'booster';
                    createBoosters(platform);
                };
            } else if (firstParam < 20) {
                platform.type = 'heart';
                createHearts(platform);
                
            } else if (firstParam < 120) {
                platform.type = 'breakable'; 
                platform.breakCount = 0;
                
            } else if (firstParam < 220) {
                platform.type = 'moving'; 
                
            } else if (firstParam < 370) {
                platform.type = 'coin';
                createCoins(platform);
                
            } else if (firstParam < 520) {
                platform.type = 'enemy';
                createEnemies(platform);
                
            } else if (firstParam < 530) {
                platform.type = 'particle';
                createParticles(platform);
                
            } else {
                platform.type = 'none';
            };

            if (wParam > 0.5 || platform.type == "breakable") {
                platform.width = 50;
            };
        };
        
        function platformCoordinateRandomizer(platform, index, maxIndex, wParam){
            
            if (platform.id === 1 || (platform.id === 2 && maxIndex === 3 && index === 2)) {
                index--;
                if (platform.id === 2) {
                    maxIndex--;
                };
            };

            let xMin = index * (canvas.width / maxIndex);
            let xMax = (canvas.width / maxIndex) + ((index * (canvas.width / maxIndex))) - platform.width;
 
            let xParam = Math.random() * (xMax - xMin) + xMin;

            let yMax = firstPlatformY - platform.height;
            let yMin = yMax - 90;
            let yParam = Math.floor(Math.random() * (yMax - yMin) + yMin);
            yParam =  -yRate * 135 + yParam;

            const foundIndex = platformsArray.findLastIndex((platform2) => platform2.id < platform.id);
            const prevPlatform = platformsArray[foundIndex];
            
            const platformX = xParam + (platform.width / 2);
            
            const prevPlatformX = prevPlatform.x + (platform.width / 2);
        
            let xEdgeDistance = Math.abs(platformX - prevPlatformX);

            const platformY = yParam + (platform.height / 2);

            const prevPlatformY = prevPlatform.y + (platform.height / 2);

            let yEdgeDistance = Math.abs(platformY - prevPlatformY);

            if (xEdgeDistance <= (platform.width / 2) + 25 || yEdgeDistance <= (platform.height / 2) + 25) {
                platformCoordinateRandomizer(platform, index, maxIndex, wParam);
            };

            platform.x = xParam;
            platform.y = yParam;
        };

        //#endregion

        //#region Tramboline

        let trambolinesArray = [];

        class Tramboline {
            constructor(platform){
                this.width = 50;
                this.height = 7.5;
                this.x = platform.x - 50;
                this.y = platform.y;
                this.id = platform.id;
            };
            
            draw(){
                
                //#region Tramboline SVG
                
                const svgTramboline = `
                    <svg version="1.1" id="Layer_2_00000148657650191072348900000009646060144879980674_"
                            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600"
                            style="enable-background:new 0 0 600 600;" xml:space="preserve">
                        <style type="text/css">
                            .st0{fill:#996633;}
                            .st1{fill:#0FA319;}
                            .st2{fill:#3BBC3E;}
                        </style>
                        <g>
                            <path class="st0" d="M180.9,299.6c26.9,1.5,54.4,2.4,81.3,2.5c22.6,0.4,49.2-0.3,70,11.2c13,8.4,27.7,11.4,43.4,12.3
                                c21.4,1,43.3-2,64.1-7.6c0.3-0.1,0.7,0.1,0.8,0.4c0.1,0.3-0.1,0.6-0.3,0.7c-10.1,4.5-20.5,8.2-31.2,11.2c-10.7,3-21.7,5.3-33,6.4
                                c-17,1.8-36,0.5-52.1-6.8c-13.7-4.8-28.7-3-43.6-1.5c-27,3.7-54.7,7.8-81.8,10.6c-5.6,0.6-11,1.2-16.7,1.7
                                c-11.4,1.1-21.4-7.2-22.5-18.6C157.8,309.7,168.4,298.8,180.9,299.6L180.9,299.6z"/>
                        </g>
                        <g>
                            <path class="st0" d="M330.4,291.5c-9.8,5.1-19.9,9.4-30.1,13.4c-9.1,3.4-18.5,6.6-28.1,8.5l-1.1,0.2c-1.4,0.4-2.3-0.5-3.5-1.5
                                l-0.3-3.3l-2.9,0.2c-0.8,0-0.9-1.1-0.1-1.2h0l2.8-0.2l-0.3-3.3c0.8-1.1,1.3-2.2,2.6-2.2l1-0.1c14.6-1.4,29-4.9,43.4-8l16-3.5
                                c0.3-0.1,0.6,0.1,0.7,0.5C330.8,291.1,330.7,291.4,330.4,291.5L330.4,291.5z"/>
                        </g>
                        <g>
                            <path class="st0" d="M363.2,330.1c1.2,2.2,3.3,4.1,5.2,5.7c6.1,4.8,13.5,7.6,21,9.5c8.2,2.1,17.3,2.9,25.7,3.3c0.7,0,0.8,1.1,0,1.2
                                c-15.8,1-32.5,0.5-47-6.7c-2.4-1.2-4.8-2.7-6.9-4.4c-1.8-1.6-3.3-2.9-4.7-5l-1.6-2.5c-1.3-2.1-0.7-4.9,1.4-6.2
                                C360.1,322.7,364.5,326.2,363.2,330.1L363.2,330.1z"/>
                        </g>
                        <path class="st1" d="M323.9,291.8L323.9,291.8L323.9,291.8c-2.8-10.6,6-20.8,19.8-22.6l0,0l0,0C346.6,279.8,337.7,289.9,323.9,291.8
                            z"/>
                        <path class="st1" d="M323.9,292L323.9,292L323.9,292c6.5-9.4,22-12.7,34.4-7.4l0,0l0,0C351.8,294,336.4,297.3,323.9,292z"/>
                        <path class="st1" d="M327.5,292.8L327.5,292.8L327.5,292.8c-14.1,0-25.8-8.8-26.2-19.6l0,0l0,0C315.3,273.3,327.1,282,327.5,292.8z"
                            />
                        <path class="st1" d="M462.2,335.4L462.2,335.4L462.2,335.4c-13.6,2.8-27.6-3.8-31.5-14.8l0,0l0,0
                            C444.3,317.8,458.4,324.4,462.2,335.4z"/>
                        <path class="st1" d="M355.4,310.7L355.4,310.7L355.4,310.7c-14.1,0-25.8-8.8-26.2-19.6l0,0l0,0C343.2,291.1,355,299.9,355.4,310.7z"
                            />
                        <path class="st1" d="M394.8,374.4L394.8,374.4L394.8,374.4c-3.9-11,3.9-22.2,17.5-25l0,0l0,0C416.1,360.4,408.3,371.6,394.8,374.4z"
                            />
                        <path class="st1" d="M431.9,320L431.9,320L431.9,320c-13.6,2.8-27.6-3.8-31.5-14.8l0,0l0,0C414,302.3,428.1,309,431.9,320z"/>
                        <path class="st1" d="M327.4,318.2L327.4,318.2L327.4,318.2c-10.4-7.5-11-19.9-1.5-27.7l0,0l0,0C336.3,298.1,337,310.5,327.4,318.2z"
                            />
                        <path class="st1" d="M432.2,348.6L432.2,348.6L432.2,348.6c-10.4-7.8-11.1-20.8-1.7-29l0,0l0,0C441,327.4,441.7,340.4,432.2,348.6z"
                            />
                        <path class="st1" d="M434.4,369L434.4,369L434.4,369c-12.7,0-23.3-8.2-23.6-18.4l0,0l0,0C423.4,350.5,434,358.8,434.4,369z"/>
                        <path class="st1" d="M411.1,352.3l-0.1,0l0,0c-4-6.3-1-13.8,6.7-16.9l0.1,0l0,0C421.8,341.7,418.8,349.3,411.1,352.3z"/>
                        <path class="st2" d="M324.4,291.8L324.4,291.8L324.4,291.8c2.1-8,12.2-12.9,22.6-11.1l0,0l0,0C345,288.7,334.8,293.6,324.4,291.8z"
                            />
                        <path class="st2" d="M431,320.5L431,320.5L431,320.5c5.9-7,17.8-8.7,26.7-3.8l0,0l0,0C451.8,323.6,439.9,325.4,431,320.5z"/>
                        <path class="st2" d="M324.6,292.2L324.6,292.2L324.6,292.2c-8.6-5-10.5-14.3-4.2-20.7l0,0l0,0C329,276.5,330.8,285.7,324.6,292.2z"
                            />
                        <path class="st2" d="M334,311.9L334,311.9L334,311.9c-8.6-5-10.5-14.3-4.2-20.7l0,0l0,0C338.4,296.2,340.3,305.5,334,311.9z"/>
                        <path class="st2" d="M432.8,320.1L432.8,320.1L432.8,320.1c-9.9-3.4-14.6-12.5-10.6-20.4l0,0l0,0
                            C432.1,303.1,436.8,312.3,432.8,320.1z"/>
                        <path class="st2" d="M442.6,339.9L442.6,339.9L442.6,339.9c-10.1-2.9-15.5-11.8-12.1-19.8l0,0l0,0
                            C440.5,322.9,445.9,331.8,442.6,339.9z"/>
                        <path class="st2" d="M411.6,350.9L411.6,350.9L411.6,350.9c-10.4-1.9-17.2-10.2-15.1-18.5l0,0l0,0
                            C406.9,334.2,413.7,342.5,411.6,350.9z"/>
                        <path class="st2" d="M415.7,370L415.7,370L415.7,370c-8.6-5.2-10.4-15-4.1-21.7l0,0l0,0C420.1,353.5,422,363.3,415.7,370z"/>
                    </svg>
                `;
                    
                //#endregion
                
                const img = new Image();
                img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgTramboline)}`;
                
                ctx.drawImage(img, this.x - 25, this.y - 55 - camera.y, 100, this.height + 100);
            };

            animate(){
                if (trambolineCollisionDetection(player, this) && !player.hasCollided) {
                    player.freeze = true;
                    player.hasCollided = true;
                    
                    setTimeout(() => {
                        player.freeze = false;
                        world.trambolineUsed = true;
                        player.jumpStrength = 5;
                        player.jumpDuration = 150;
        
                        player.isJumping = true;
                        player.isFlying = true;
                        player.jumpFrame = 0;
                        player.speedY = -player.jumpStrength;
                        player.hasCollided = false;
                    }, 400);
                };
                if ( (camera.height + camera.y) < this.y) {
                    deleteAsset(this);
                };
            };
        };

        let trambolineIndex = 0;
        
        function createTrambolines(platform) {
            trambolinesArray.push(new Tramboline(platform));
            trambolineIndex++;
        };

        function handleTrambolines(){
            for (let i = 0; i < trambolinesArray.length; i++) {
                trambolinesArray[i].draw();
                trambolinesArray[i].animate();
            };
        };

        //#endregion

        //#region Particle

        let particlesArray = [];

        class Particle {
            constructor(platform){
                this.id = platform.id;
                this.x = platform.x + platform.width/2;
                this.y = platform.y + this.radius;
                this.type = platform.type;
                this.animFrame = 0;
                this.animDuration = 500;
                this.moveStrength = world.gravity * 5;
                this.radius = world.radius/2;
                this.startAngle = 0; 
                this.endAngle = Math.PI * 2;
            };

            draw(){      

                //#region Particle SVG

                const svgParticle = `
                <svg enable-background="new 0 0 53 42" version="1.1" viewBox="0 0 53 42" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <image transform="translate(0 -1)" width="54" height="44" overflow="visible" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAAsCAYAAAAuCEsgAAAACXBIWXMAAAsSAAALEgHS3X78AAAK 50lEQVRogb1aTWwkRxV+Vf03PTMee9f2erO7CLKAkLhEQpy4cQJyAs4EziAOBE4JOSAkiEBKbsAN JJAIEopYQIIbClLIj1ggbAARoUSroERabzy2x/PXf1XovapXXTUzduxdh9q0errdP/XV99X33quO gHNsP3rym7pRDUQygqapIYpi+PJj3znXd5y23dNLEUBVFVCVBSilaJOgobu2QYBAAxwM3wEpBQgh QUgJQgjo5F3o5L3/C9hTvQCB4B7BaKVg0OvQvsGtaQhY0+BxA8rupYxgOp2C1gBCACRpSudkFNE+ 7/bfU4AnPhgBKdXQ74trOURSQm2BFGXp2FJKQxxFBFQ5cIru00ifBhhPJoQQ5RnHCURxTFuadt4T gCsfyAyZTmnaX76wRp2ta2RDmvNaE1NKKygKC1Qrkh/+raorAoUtS1O4c7eVJzKXphlUdQlZpwud TvdcAS496BtffFh31wZw5doHgcFdubgGygKhvTK/6VhpI0ErTWTLXWc3lGIcxWaeZSm8fvtNenYU IcCWwfOU50pgdBbnhpT0Mmwfe+ghAmE6rejvDBKPlQe2rmsHDiWKoIUUIIWENEkI0PDgAPaGByAj ScDiJIE4TiHNzkeay8C+9LD2j9EAsKP9fh+StAMPXPsAXLu0RVJUdkOmEIhRrpUoOiVK1moRByCK IgKK51GSeN1/3rjtgUtJolmW3zc4uXSGXEyCFMa9yqKAqihhPB7D0eE+/OvWTXjhpeehccB4fAS4 ESGTkHbkzL8kiekcyhFB0culhI986DoNErprWcwphJTl3M3z8wMGAEmckeb3h3vQ1MYVEVxRFARh PpvBK/94lUARU64Jkq9hJCIA+DuOY3sseeyC9uHrDxJwkm/TQFUUMJ9P7wtcAAznF9ox9h4Zi8mS I5IKNjSGsixJmuPDIdzZG1KcMnLUrsPEihBkGMYF7cvIDaXhV4RKe//VKzBY61tDwpBRw3w2uWdw S4zhPIpkDIejoZVUZDqL8rF9QWDFfA6v//sWAaobA8ptuv2NssYbWX6wAhTYa7c3L8L7rlym46au aX+vsgyA5fkadeRwtEdsdTodkmQn7wQdYoNAab784nOtQdg5ZyKfdU1zo0UExCTu8Vn0U7TSxPtx IHe2NukYmTOxsj4zOAcMZYjzo65KmgtkIDKCfn9ADHTyvO2gZQ0ozaqgqGqoKVBrm30Y1vhqYQE5 UPYvSoObp20Wo2hQ1/o9k8HUFRnLWZtkUL3eBsRRAvNiYid80spQGGsW1snMaAuKXdhuvvgcyZEk qf0gIty1YgmUyWrwGX4MxNM4ON08B43xsWmgrgqYTY/OxBoBw3klZQwHh7vUcTKQBe/yO8jg3DVC wHh86OIads44ooBIoolYp7QDFGQx3m/caqXc762LF40UbcA/i5lIZAvdanR013Z80U80JarEYpI4 kMEeAF7759/gv2+8ZmJWbEDg3zFxxnOandNJT3sDwXmnTdfshsxtrG/QOzjsnImxspqbMOqZg79P LCAcAL6GY5IAwyACGO7tQieNzT1xBFkSGRlDyyT+blQrOwKkjYyVDjcOkeuDAe250jgNaxRUtC0x mKHVTQTmwUAxzmHnETzWXLf+/lfoZglJUNskmucQVQc2SSbXVJ7hLIAK46JJzXC+TScjOvfDJx8/ EZw8FseKhrDQsViyIpLOxXj+lcWUc2gnOZ5DTAGDqS1Qusbmm4099ocZN5QkuyeCQ7c8iTlB2Xxw BpybgZtHAuq6gqoqSetU/ntGgh1GtrDNplNy0yTNqBNHo0P43Gc/T3+bzCrTOTAAwIuJxJQyUE7K fg8PDyi24hSI0xSSJFuZMLdO8S65NNo/ZRA2E8fLI8/6EQyCz7IMkiQl1aZpCpevXIUXXn4Jbtz4 FQz6uXE+lKML6Caot7NBnCiijfV1kiS+QFPhu5o5doCVbgjA6tH2Mmv5aOFx7MYDS42imLcPlQYo Z/gIYOvSJXj22V/CzuaGO6esOhu12C8RpGiuO3S9oMFDcFQXmlm8BI7evCp3WwToUHBM41hGOZE2 gZddzmYKZNl15Vjd3N6GZ37x85YlaxKwCGLh9X7uib+TOIdet2/AUQCvoFFh2iW5x5g+HQuNHq4g yzq2JLFxSsolBTMwTJK5kXRwZLWCwfoGPHj1sjOWVcOoLTMOFG9KgNLCVhQR5NmA5jE4o2ocOGFy RJRO6sqF1kBamjimoYG0I2nmCi/sgGcGuOV5bgbMJr0IGE1jMh7Dxz/xSUuRXkbmjyjbiW7/7h/j ADR6agzF5rgUW420IrrDpFKLTIWd5muMWQovLRTefW32z51BdpjpvJvDn//0h7DM8SXnfoslj9Ru oA17SLrQPccc2FknWzbMPMg6fW8ktWNDuzhkOhhWztAWj5zwYoioajvB7es0ly6SDODVvzxvJBfo cAEon7NgGJQ7ZmlWXZrTBrpjzHsxaEqK/Unr3io8BpktLzlm8G4POphr9FLPVcuyCoG06msBWGbA guE55uagx2I1z1yH5VM//Z1QdnXXlPGCMv2weR12yhOBFP3cjwcfW1mUgUT9hgXsKzf/6MmrZWaR yaVzK1rarUIpGnA1leHYMLMQMg7UHS7ZePtVZT5L2Sa9s/ksSLL5Zmkz/49ev0qOx50PlxnMPGOW yBmV8KRqmIuSxlTcAPCVx77bRmUEh5F8Pp8YWssSptOZVwULu8gGgQxbd+KUNwSF/2Ga5TdTzkQ0 15C1X//2xooYJoIhZCdslxE8wFQxTCmscEIfpBsIDq8si5ljbn9/H4TPnVu/EI52Dd7ccym5xy3F HRU8R9s5ixnK9gNXYTS6A0ejXVpQNZOZjUEEcxA8SRozKqFu9iiU4Pu/+sT3xBIwBoc8Nk1lDcEr afzE2DcJPxu3y9/aOgFzONzbc/dyBY77C1s7Zt2/rmi9ZXf3NiRyCoO1jjdAbjQ8xgCqeg+mk117 fw1f+9bT7upFl7DPMvkYriHiy/eHQ7iAZbq3GuWvUYDHGoBhJ7ymNR5mDfd5twdatQktX/fW22+D 1m9Bnndge2sb5mXXDmTL1Hj8Jn2vw7iKb3/iqZ+IEMMx7euPfEbjZ6DpZEovxVHZ3NpqO634Q4Ty vsAoVzM5QKpdgcLjSzs77s39wTplJnwPM4ylET8Lz2Exi0uBaZZCHF8AKfowOrpNwHCefvsHzyzh WMkYS8Z3MSxX3rl7Fza3Nr3FUDOBBR1o61oqAOSKTNvwGwB94EhSm2LVxACPfGVV4uq0prYLtIVV xi6t2UW2uvj+j3+zkpwTAwPmkfP5HHDzM5DBxnogMfNNzHyu1bqtiIldtSzfnctmtTfv9dqPi9bd EBhfz9mMk/tC0kxmdxwxJwFjcBgfRqOjAByucWSdzK42KbdExh8F2aV4fQOs3FgJ3V6XEtZerxdk L6aItEa1Ivs/DahTAcP26Bc+pflD+nw2D0Yf7Rll4TNFoACCgeCNHNGVPfazLcY1ys6FW7YTdkVM 2KK1XeoT7wrq1MC4IXs4J/AD+2w6o04q1U5yOg6+brL1tzkiLeF5e1pc9UG6/4VCOMAM6Omf/f7U /T3zV0MEh26ZxAmBODocuRUozXELy/3GfITn/SqWjgODv+MkdtLFQTgNS/cFzG+PPvJp7ds6WzR+ qMi73TDpteYwHU9c6bIKGM5dAe06/1kBnQuw4xov6dVNbYtLXL706zqDFFnEhn/3272CcQ0A/gfs Rqp9t77rvgAAAABJRU5ErkJggg==">
                    </image>
                </svg>
                `;
                    
                //#endregion
                const img = new Image();
                img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgParticle)}`;

                const imageWidth = this.radius * 2; 
                const imageHeight = this.radius * 2; 
                const imageX = this.x - imageWidth / 2;
                const imageY = this.y- imageHeight / 2;

                ctx.drawImage(img, imageX, imageY - camera.y, imageWidth, imageHeight);
            };


            animate(){
                let foundPlatform = platformsArray.find(platform => areEqual(platform, this));
                this.y += this.moveStrength;
                
                if (this.animFrame >= this.animDuration) {
                    this.animFrame = 0;
                };
                if (this.animDuration > this.animFrame) {
                    if (0 === this.animFrame) {
                        this.y = foundPlatform.y + this.radius;
                        this.x = foundPlatform.x + foundPlatform.width / 2;
                    }; 
                    if ( this.animDuration / 2 === this.animFrame) {
                        this.y = foundPlatform.y + this.radius;
                        this.x = foundPlatform.x + foundPlatform.width / 2;
                    };
                };
                this.animFrame++;
            };

            handle(){
                if (circularCollisionDetection(player, this)) {
                    world.isRunning = false;
                };
                platformsArray.forEach(platform => {
                    if (circularCollisionDetection(platform, this) && platform.type != 'particle'){
                        this.y = platform.y - this.radius;
                    };
                });
            };

        };

        let particleIndex = 0;

        function createParticles(platform){
            particlesArray.push(new Particle(platform));
            particleIndex++;
        };

        function handleParticles(){
            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].draw();
                particlesArray[i].animate();
                particlesArray[i].handle();
            };
        };

        //#endregion

        //#region Coin

        let coinsArray = [];

        class Coin {
            constructor(platform){
                this.radius = world.radius;
                this.startAngle = 0; 
                this.endAngle = Math.PI * 2;
                this.type = platform.type;
                this.x = platform.x + platform.width/2;
                this.y = platform.y - this.radius;
                this.id = platform.id;
            };

            draw(){

                //#region Coin SVG

                const svgCoin = `
                    <svg clip-rule="evenodd" fill-rule="evenodd" image-rendering="optimizeQuality" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" version="1.1" viewBox="0 0 883 883" xmlns="http://www.w3.org/2000/svg">
                        <path d="m413.5-0.5h60c143.96 13.532 257.12 79.198 339.5 197 35.652 54.456 58.819 113.79 69.5 178v137c-23.083 130.41-89.416 232.25-199 305.5-52.888 33.573-110.22 55.406-172 65.5h-137c-132.57-23.658-235.4-91.658-308.5-204-38.522-63.064-60.688-131.4-66.5-205v-60c12.233-137.67 73.233-247.84 183-330.5 69.122-49.321 146.12-77.154 231-83.5z" fill="#f4bc1b" opacity=".993"/>
                        <path d="m423.5 84.5c129.17-2.6159 232.67 47.051 310.5 149 69.433 101.77 85.1 211.44 47 329-37.443 99.444-104.94 170.28-202.5 212.5-103.26 39.812-204.26 34.812-303-15-112.31-63.411-175.48-159.58-189.5-288.5-6.7496-114.79 31.084-211.95 113.5-291.5 63.656-57.32 138.32-89.153 224-95.5z" fill="#fed900"/>
                        <path d="m440.5 299.5c-0.978 0.311-1.645 0.978-2 2-43.498 0.667-86.831 1.333-130 2v169c14.177 0.329 28.177-4e-3 42-1v-113c35.682-0.66 71.016 7e-3 106 2-10.526 65.773-21.193 131.44-32 197-63.334 0.167-126.67 0-190-0.5-15.331-3.999-25.498-13.499-30.5-28.5-0.667-94-0.667-188 0-282 4.303-13.395 13.137-22.228 26.5-26.5 74.999-0.5 150-0.667 225-0.5 0.167 14.004 0 28.004-0.5 42-5.149 12.637-9.982 25.304-14.5 38z" fill="#f3f3f3"/>
                        <path d="m440.5 299.5c-0.039 1.083-0.373 2.083-1 3-43.328 1-86.662 1.333-130 1h-1c43.169-0.667 86.502-1.333 130-2 0.355-1.022 1.022-1.689 2-2z" fill="#ada263"/>
                        <path d="m308.5 303.5h1v168h41c-13.823 0.996-27.823 1.329-42 1v-169z" fill="#c2a90c"/>
                        <path d="m350.5 358.5c94.667-1.333 189.33-1.333 284 0-59.549-0.657-118.88 0.01-178 2-34.984-1.993-70.318-2.66-106-2z" fill="#ac7029"/>
                        <path d="m634.5 358.5c16.047 98.948 31.88 197.95 47.5 297 0.5 14.329 0.667 28.663 0.5 43h-107c0.237-1.291-0.096-2.291-1-3-1.468-21.676-3.134-43.343-5-65h-48c-1.621 22.7-3.621 45.367-6 68h-106c-0.167-16.003 0-32.003 0.5-48 5.32-30.941 10.153-61.941 14.5-93 10.807-65.56 21.474-131.23 32-197 59.118-1.99 118.45-2.657 178-2z" fill="#ea2544"/>
                        <path d="m551.5 445.5c-3.564-0.923-7.231-1.256-11-1 0.237 1.291-0.096 2.291-1 3v-4c4.471-0.589 8.471 0.077 12 2z" fill="#bc920e"/>
                        <path d="m551.5 445.5c3.467 30.938 6.467 61.938 9 93v6c-10.389 0.641-20.389-0.026-30-2 3.117-31.655 6.117-63.321 9-95 0.904-0.709 1.237-1.709 1-3 3.769-0.256 7.436 0.077 11 1z" fill="#fad502"/>
                        <path d="m560.5 538.5c0.968 2.107 1.302 4.441 1 7h-32c-0.237-1.291 0.096-2.291 1-3 9.611 1.974 19.611 2.641 30 2v-6z" fill="#ad5e27"/>
                        <path d="m574.5 695.5c0.904 0.709 1.237 1.709 1 3h107c-35.829 0.998-71.829 1.332-108 1v-4z" fill="#c9ae0a"/>
                    </svg>
                `;
                    
                //#endregion

                const img = new Image();
                img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgCoin)}`;

                const imageWidth = this.radius * 2; 
                const imageHeight = this.radius * 2; 
                const imageX = this.x - imageWidth / 2;
                const imageY = this.y- imageHeight / 2;

                ctx.drawImage(img, imageX, imageY - camera.y, imageWidth, imageHeight);
            };

            handle(){
                if (circularCollisionDetection(player, this)) {
                    world.coinCount++;
                    deleteAsset(this);
                };
            };
        };

        let coinIndex = 0;

        function createCoins(platform){
            coinsArray.push(new Coin(platform));
            coinIndex++;
        };

        function handleCoins(){
            for (let i = 0; i < coinsArray.length; i++) {
                coinsArray[i].draw();
                coinsArray[i].handle();
            };
        };

        //#endregion

        //#region Booster

            //#region BoosterSVGContainer

        const boosterSVGContainer = {
            defaultJetpack: `
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                        viewBox="0 0 292 302.9" style="enable-background:new 0 0 292 302.9;" xml:space="preserve">
                        <style type="text/css">
                            .st0{fill:#898989;}
                            .st1{fill:#DBD5D5;}
                            .st2{fill:#891010;}
                            .st3{fill:#606060;}
                            .st4{fill:#FF0000;}
                        </style>
                        <path class="st0" d="M212.5,283.9h-133c-22.1,0-40-17.9-40-40v-187c0-22.1,17.9-40,40-40h133c22.1,0,40,17.9,40,40v187
                            C252.5,265.9,234.6,283.9,212.5,283.9z"/>
                        <rect x="72.3" y="251" class="st1" width="147.4" height="33.7"/>
                        <path class="st2" d="M292,302.9h-79V90.6c0-21.8,17.7-39.5,39.5-39.5l0,0c21.8,0,39.5,17.7,39.5,39.5V302.9z"/>
                        <path class="st3" d="M184,103.9h-76v-9c0-21,17-38,38-38l0,0c21,0,38,17,38,38V103.9z"/>
                        <path class="st1" d="M179.7,101.2h-67.5v-8c0-18.6,15.1-33.7,33.7-33.7l0,0c18.6,0,33.7,15.1,33.7,33.7L179.7,101.2L179.7,101.2z"/>
                        <path class="st3" d="M119.8,16.9H73.9l0,0C73.9,7.5,81.5,0,90.8,0h12.1C112.2,0,119.8,7.5,119.8,16.9L119.8,16.9z"/>
                        <path class="st3" d="M218.1,16.9h-45.8l0,0c0-9.3,7.5-16.9,16.9-16.9h12.1C210.5,0,218.1,7.5,218.1,16.9L218.1,16.9z"/>
                        <rect x="213" y="273.9" class="st3" width="79" height="29"/>
                        <path class="st2" d="M79,302.9H0V90.6c0-21.8,17.7-39.5,39.5-39.5l0,0C61.3,51.1,79,68.8,79,90.6V302.9z"/>
                        <rect y="273.9" class="st3" width="79" height="29"/>
                        <path class="st3" d="M94.3,242L94.3,242c-2.5,0-4.6-2-4.6-4.6V128.3c0-2.5,2-4.6,4.6-4.6l0,0c2.5,0,4.6,2,4.6,4.6v109.1
                            C98.9,239.9,96.8,242,94.3,242z"/>
                        <path class="st4" d="M148.9,90.5L148.9,90.5c-0.3-1.2,0.4-2.5,1.7-2.8l21.4-5.3c1.2-0.3,2.5,0.4,2.8,1.7l0,0
                            c0.3,1.2-0.4,2.5-1.7,2.8l-21.4,5.3C150.4,92.4,149.2,91.7,148.9,90.5z"/>
                        <path class="st3" d="M116.8,242L116.8,242c-2.5,0-4.6-2-4.6-4.6V128.3c0-2.5,2-4.6,4.6-4.6l0,0c2.5,0,4.6,2,4.6,4.6v109.1
                            C121.4,239.9,119.3,242,116.8,242z"/>
                        <path class="st3" d="M134.7,242L134.7,242c-2.5,0-4.6-2-4.6-4.6V128.3c0-2.5,2-4.6,4.6-4.6l0,0c2.5,0,4.6,2,4.6,4.6v109.1
                            C139.3,239.9,137.3,242,134.7,242z"/>
                        <path class="st3" d="M157.3,242L157.3,242c-2.5,0-4.6-2-4.6-4.6V128.3c0-2.5,2-4.6,4.6-4.6l0,0c2.5,0,4.6,2,4.6,4.6v109.1
                            C161.8,239.9,159.8,242,157.3,242z"/>
                        <path class="st3" d="M176.1,242L176.1,242c-2.5,0-4.6-2-4.6-4.6V128.3c0-2.5,2-4.6,4.6-4.6l0,0c2.5,0,4.6,2,4.6,4.6v109.1
                            C180.7,239.9,178.7,242,176.1,242z"/>
                        <path class="st3" d="M198.7,242L198.7,242c-2.5,0-4.6-2-4.6-4.6V128.3c0-2.5,2-4.6,4.6-4.6l0,0c2.5,0,4.6,2,4.6,4.6v109.1
                            C203.2,239.9,201.2,242,198.7,242z"/>
                        <circle cx="146" cy="91.2" r="2.8"/>
                    </svg>
                    `
                ,
            animJetpack: `
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	                viewBox="0 0 292 416" style="enable-background:new 0 0 292 416;" xml:space="preserve">
                    <style type="text/css">
                        .st0{fill:#898989;}
                        .st1{fill:#DBD5D5;}
                        .st2{fill:#891010;}
                        .st3{fill:#606060;}
                        .st4{fill:#FF0000;}
                        .st5{fill:#EA5F00;}
                        .st6{fill:#FFB000;}
                    </style>
                    <path class="st0" d="M212.5,283.9h-133c-22.1,0-40-17.9-40-40v-187c0-22.1,17.9-40,40-40h133c22.1,0,40,17.9,40,40v187
                        C252.5,265.9,234.6,283.9,212.5,283.9z"/>
                    <rect x="72.3" y="251" class="st1" width="147.4" height="33.7"/>
                    <path class="st2" d="M292,302.9h-79V90.6c0-21.8,17.7-39.5,39.5-39.5l0,0c21.8,0,39.5,17.7,39.5,39.5V302.9z"/>
                    <path class="st3" d="M184,103.9h-76v-9c0-21,17-38,38-38l0,0c21,0,38,17,38,38V103.9z"/>
                    <path class="st1" d="M179.7,101.2h-67.5v-8c0-18.6,15.1-33.7,33.7-33.7l0,0c18.6,0,33.7,15.1,33.7,33.7L179.7,101.2L179.7,101.2z"/>
                    <path class="st3" d="M119.8,16.9H73.9l0,0C73.9,7.5,81.5,0,90.8,0h12.1C112.2,0,119.8,7.5,119.8,16.9L119.8,16.9z"/>
                    <path class="st3" d="M218.1,16.9h-45.8l0,0c0-9.3,7.5-16.9,16.9-16.9h12.1C210.5,0,218.1,7.5,218.1,16.9L218.1,16.9z"/>
                    <rect x="213" y="273.9" class="st3" width="79" height="29"/>
                    <path class="st2" d="M79,302.9H0V90.6c0-21.8,17.7-39.5,39.5-39.5l0,0C61.3,51.1,79,68.8,79,90.6V302.9z"/>
                    <rect y="273.9" class="st3" width="79" height="29"/>
                    <path class="st3" d="M94.3,242L94.3,242c-2.5,0-4.6-2-4.6-4.6V128.3c0-2.5,2-4.6,4.6-4.6l0,0c2.5,0,4.6,2,4.6,4.6v109.1
                        C98.9,239.9,96.8,242,94.3,242z"/>
                    <path class="st4" d="M148.9,90.5L148.9,90.5c-0.3-1.2,0.4-2.5,1.7-2.8l21.4-5.3c1.2-0.3,2.5,0.4,2.8,1.7l0,0
                        c0.3,1.2-0.4,2.5-1.7,2.8l-21.4,5.3C150.4,92.4,149.2,91.7,148.9,90.5z"/>
                    <path class="st3" d="M116.8,242L116.8,242c-2.5,0-4.6-2-4.6-4.6V128.3c0-2.5,2-4.6,4.6-4.6l0,0c2.5,0,4.6,2,4.6,4.6v109.1
                        C121.4,239.9,119.3,242,116.8,242z"/>
                    <path class="st3" d="M134.7,242L134.7,242c-2.5,0-4.6-2-4.6-4.6V128.3c0-2.5,2-4.6,4.6-4.6l0,0c2.5,0,4.6,2,4.6,4.6v109.1
                        C139.3,239.9,137.3,242,134.7,242z"/>
                    <path class="st3" d="M157.3,242L157.3,242c-2.5,0-4.6-2-4.6-4.6V128.3c0-2.5,2-4.6,4.6-4.6l0,0c2.5,0,4.6,2,4.6,4.6v109.1
                        C161.8,239.9,159.8,242,157.3,242z"/>
                    <path class="st3" d="M176.1,242L176.1,242c-2.5,0-4.6-2-4.6-4.6V128.3c0-2.5,2-4.6,4.6-4.6l0,0c2.5,0,4.6,2,4.6,4.6v109.1
                        C180.7,239.9,178.7,242,176.1,242z"/>
                    <path class="st3" d="M198.7,242L198.7,242c-2.5,0-4.6-2-4.6-4.6V128.3c0-2.5,2-4.6,4.6-4.6l0,0c2.5,0,4.6,2,4.6,4.6v109.1
                        C203.2,239.9,201.2,242,198.7,242z"/>
                    <circle cx="146" cy="91.2" r="2.8"/>
                    <path class="st5" d="M30,416L30,416L1.8,372.3C-5.3,352.7,9.2,332,30,332h0c20.8,0,35.3,20.7,28.2,40.3L30,416z"/>
                    <path class="st6" d="M30,400.1L30,400.1L8.9,367.3c-5.4-14.7,5.5-30.2,21.1-30.2h0c15.6,0,26.5,15.5,21.1,30.2L30,400.1z"/>
                    <path class="st5" d="M262,416L262,416l-28.2-43.7c-7.1-19.6,7.3-40.3,28.2-40.3h0c20.8,0,35.3,20.7,28.2,40.3L262,416z"/>
                    <path class="st6" d="M262,400.1L262,400.1l-21.1-32.8c-5.4-14.7,5.5-30.2,21.1-30.2h0c15.6,0,26.5,15.5,21.1,30.2L262,400.1z"/>
                </svg>
                `
        };

            //#endregion

        let boostersArray = [];

        class Booster {
            constructor(platform){
                this.width = 25;
                this.height = 25;
                this.x = platform.x;
                this.y = platform.y - (this.height + 2);
                this.type = platform.type;
                this.id = platform.id;
                this.startAnim = false;
            };

            draw(){
                    
                const img = new Image();

                if (this.startAnim == false ) {
                    img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(Object.values(boosterSVGContainer)[0])}`;
                    ctx.drawImage(img, this.x, this.y - camera.y, this.width, this.height);
                } else {
                    img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(Object.values(boosterSVGContainer)[1])}`;
                    ctx.drawImage(img, this.x, this.y - camera.y, this.width, this.height);
                };
            };

            handle(){
                
                if (rectangularCollisionDetection(player, this) && !this.startAnim) {
                    player.jumpStrength = 5;
                    player.jumpDuration = 150;
                    
                    this.startAnim = true;
                    player.isJumping = true;
                    player.isFlying = true;
                    
                    player.jumpFrame = 0;
                    player.speedY = -player.jumpStrength;
                    setTimeout(()=>{  
                        deleteAsset(this);
                    }, 2000);
                };
                if (this.startAnim) {
                    this.x = player.x - 10;
                    this.y = player.y + 25;
                };  
            };
        };

        
        let boosterIndex = 0;
        
        function createBoosters(object){
            boostersArray.push(new Booster(object));
            boosterIndex++;
        };
        
        function handleBoosters(){
            for (let i = 0; i < boostersArray.length; i++) {
                boostersArray[i].draw();
                boostersArray[i].handle();
            };
        };

        //#endregion

        //#region Heart

        let heartsArray = [];

        class Heart {
            constructor(platform){
                this.width = 25;
                this.height = 25;
                this.type = platform.type;
                this.x = platform.x;
                this.y = platform.y - (this.height + 2);
                this.id = platform.id;
            };
  
            draw(){
                
                //#region Heart SVG
                
                const svgHeart = `
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path fill="#FF0000" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C15.09 3.81 16.76 3 18.5 3 21.58 3 24 5.42 24 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                    </svg>
                `;
                    
                //#endregion
                
                const img = new Image();
                img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgHeart)}`;
                
                ctx.drawImage(img, this.x, this.y - camera.y, this.width, this.height);
            };

            handle(){
                if (rectangularCollisionDetection(player, this)) {
                    world.lifeLeft ++;
                    deleteAsset(this);
                };
            };
        };

        let heartIndex = 0;

        function createHearts(platform){
            heartsArray.push(new Heart(platform));
            heartIndex++;
        };

        function handleHearts(){
            for (let i = 0; i < heartsArray.length; i++) {
                heartsArray[i].draw();
                heartsArray[i].handle();
            };
        };

        //#endregion

        //#region Enemy

        let enemiesArray = [];

        class Enemy {
            constructor(platform){
                
                this.width = player.width;
                this.height = player.height;
                this.type = platform.type;
                this.x = platform.x;
                this.y = platform.y - (this.height + 2);
                this.id = platform.id;
            };

            draw(){
                
                //#region Enemy SVG
                
                const svgEnemy = `
                    <svg enable-background="new 0 0 217.5 611" version="1.1" viewBox="0 0 217.5 611" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                        <style type="text/css">
                            .st0{fill:#E9C6A0;}
                            .st1{fill:#E0BA7E;}
                            .st2{fill:#EFCCAB;}
                            .st3{fill:#FFFFFF;}
                            .st4{fill:#1A5682;}
                            .st5{fill:#826E46;}
                            .st6{fill:#EB463A;}
                            .st7{fill:none;stroke:#91244C;stroke-miterlimit:10;}
                            .st8{fill:#91244C;}
                            .st9{fill:#FDC823;}
                            .st10{fill:#F3A236;}
                            .st11{fill:none;stroke:#FDC823;stroke-width:1.0325;stroke-miterlimit:10;}
                            .st12{fill:none;stroke:#826E46;stroke-linecap:round;stroke-miterlimit:10;}
                            .st13{fill:none;stroke:#FDC823;stroke-width:0.7898;stroke-miterlimit:10;}
                            .st14{fill:#7D461D;}
                            .st15{fill:#A86934;}
                            .st16{fill:#D3B494;}
                            .st17{fill:#D6B08B;}
                            .st18{fill:#CFB08E;}
                            .st19{fill:#CC8D8D;}
                            .st20{fill:#683A3A;}
                            .st21{fill:none;stroke:#A06767;stroke-width:0.9087;stroke-miterlimit:10;}
                            .st22{fill:#894949;}
                        </style>

                            <rect class="st0" x="91.9" y="162.6" width="39.7" height="39.7"/>
                            <path class="st1" d="m105.1 177.2h-13.2v-30.9h39.2v4.9c0 14.3-11.6 26-26 26z"/>
                            <path class="st2" d="m111.7 167.3c-24.1 0-43.6-19.5-43.6-43.6v-20.9c0-18.2 14.7-32.9 32.9-32.9h21.3c18.2 0 32.9 14.7 32.9 32.9v20.9c0.1 24.1-19.4 43.6-43.5 43.6z"/>
                            <path class="st3" d="m92.4 121.3c-4.7 0-8.5-3.8-8.5-8.5v-2.1c0-0.8 0.7-1.5 1.5-1.5h14c0.8 0 1.5 0.7 1.5 1.5v2.1c0 4.7-3.8 8.5-8.5 8.5z"/>
                            <path class="st3" d="m130.6 121.3c4.7 0 8.5-3.8 8.5-8.5v-2.1c0-0.8-0.7-1.5-1.5-1.5h-14c-0.8 0-1.5 0.7-1.5 1.5v2.1c0 4.7 3.8 8.5 8.5 8.5z"/>
                            <path class="st4" d="m98.5 112.7v-4.1c0-3.4-2.8-6.2-6.2-6.2s-6.2 2.8-6.2 6.2v4.1c0 3.4 2.8 6.2 6.2 6.2s6.2-2.8 6.2-6.2z"/>
                            <path class="st4" d="m136.9 112.7v-4.1c0-3.4-2.8-6.2-6.2-6.2s-6.2 2.8-6.2 6.2v4.1c0 3.4 2.8 6.2 6.2 6.2s6.2-2.8 6.2-6.2z"/>
                            <path class="st5" d="m123.5 112 15.8-2.5c2.4-0.4 4.1-2.8 3.7-5.3-0.4-2.6-2.6-4.3-5.1-3.9l-15.8 2.5c-2.4 0.4-4.1 2.8-3.7 5.3s2.7 4.3 5.1 3.9z"/>
                            <path class="st5" d="m99.5 112-15.8-2.5c-2.4-0.4-4.1-2.8-3.7-5.3 0.4-2.6 2.6-4.3 5.1-3.9l15.8 2.5c2.4 0.4 4.1 2.8 3.7 5.3s-2.7 4.3-5.1 3.9z"/>
                            
                                <path class="st6" d="m155 24.5c-2.1 2.8-4.3 4.7-4.3 4.7 1.3-1.8 1.8-5 2-7.9-8-10.5-18.1-15.6-27.9-17.7-0.2 2.4-1.1 3.9-1.1 3.9 0-1.7-0.5-3.2-1.1-4.4-18.6-3.1-35.8 3.8-35.8 3.8 16.9 13.8 18.6 47.6 18.6 47.6l32.5 18.5c11.9-1 29.2-12.6 29.2-12.6-2.1-15.7-6.5-27.3-12.1-35.9z"/>
                                <path class="st7" d="m111.9 6.7s9.2 24.2 3.8 37.4"/>
                                <path class="st8" d="M138,73.1c11.9-1,29.2-12.6,29.2-12.6c-0.5-3.5-1.1-6.9-1.8-10l-10.6,8.3C141.7,43,111,42.1,111,42.1    c0.3-10.9-7.7-29.8-11.7-38.5C91.8,5,86.8,7,86.8,7c16.9,13.8,18.6,47.6,18.6,47.6L138,73.1z"/>
                                <path class="st9" d="m100.1 50.5s5.3 3.9 5.5 7.5l14 0.1s0.7-4.4 5.3-6.5c0.1 0.1-12.8-6.6-24.8-1.1z"/>
                                <path class="st7" d="m144.4 16.6s-0.3 28.2-5.7 33.7"/>
                            
                            <path class="st10" d="m160.4 97.4h-0.2v30.3c0 8.1-2.9 15.8-8.2 21.6l-2.5 2.8-8.8 9.6c-1.1 1.2-3 1.2-4.1 0l-10.8-11.9c-1.1-1.2-1.1-3.1 0-4.3l20.6-22.7c0.5-0.6 0.8-1.3 0.8-2.1v-17.4c0-2.2-2.1-3.7-4-2.8l-19.4 9c-1 0.5-1.7 1.6-1.7 2.8v15.6l-8.3 9.1c-1.1 1.2-3 1.2-4.1 0l-8.3-9.1h-0.4v-15.8c0-1.2-0.7-2.3-1.7-2.8l-19.3-9c-1.9-0.9-4 0.6-4 2.8v18c0 0.8 0.3 1.6 0.8 2.1l20.2 22.2c1.1 1.2 1.1 3.1 0 4.3l-10.8 11.9c-1.1 1.2-3 1.2-4.1 0l-10.8-11.9c-5.3-5.8-8.2-13.5-8.2-21.6v-32h0.1c0.3-10.4 4.2-19.9 10.5-26.7 6.5-7.2 15.5-11.6 25.4-11.6h25.5c19.8 0.1 35.8 17.7 35.8 39.6z"/>
                            <path class="st11" d="m63 102.5s4.7-22.4 31.3-20.8l14.3-20.3s2.6-4.9 6.1 0l14.3 20.3c26.6-1.5 31.3 20.8 31.3 20.8"/>
                            
                                <path class="st11" d="m84.3 161.2 10.2-10.9s3.5-3.1 0-5.5l-18.1-19.3s-2.1-2.4-2.1-4.9v-17.5s0.2-7.1 6.9-4.2l16.4 7.5s6.5 3.1 5 7.8l0.2 9.5s-0.9 4.4 1.8 4.4l6.9 7.3"/>
                                <path class="st11" d="m138.7 161.2-10.2-10.9s-3.5-3.1 0-5.5l18.1-19.3s2.1-2.4 2.1-4.9v-17.5s-0.2-7.1-6.9-4.2l-16.4 7.5s-6.5 3.1-5 7.8l-0.2 9.5s0.9 4.4-1.8 4.4l-6.9 7.3"/>
                            
                            <path class="st12" d="m100.1 147.9s19.7-4.9 23.2-2"/>
                            <path class="st13" d="m107.7 102.2-7.5-7.9c-2.1-2.2-2.1-5.9 0-8.1l7.5-7.9c2.1-2.2 5.5-2.2 7.6 0l7.5 7.9c2.1 2.2 2.1 5.9 0 8.1l-7.5 7.9c-2.1 2.2-5.5 2.2-7.6 0z"/>


                            <polygon class="st0" points="118.7 581 155.1 581 160 363.6 118.7 364.6"/>
                            
                                <polygon class="st14" points="144 538.5 138.7 545.7 118.5 541.5 118.5 582.7 154.8 590.3 160.2 538.4"/>
                                <path class="st0" d="m188.3 604.9h-69.6v-22.4h40.1s25.9 4.5 29.5 8c4 4 0 14.4 0 14.4z"/>
                                <path class="st15" d="m175 584.6c-3.4 3.5-7.1 9.7-7.6 20.2l2.3 0.1h2.3c0.6-11 5-16.3 8-18.6-1.7-0.6-3.4-1.2-5-1.7z"/>
                                <rect class="st15" x="118.7" y="604.9" width="70" height="3.8"/>
                            


                            <polygon class="st0" points="104.6 581 68.2 581 63.3 363.6 104.6 364.6"/>
                            
                                <polygon class="st14" points="79.1 538.5 84.3 545.7 104.6 541.5 104.6 582.7 68.2 590.3 62.9 538.4"/>
                                <path class="st0" d="m34.8 604.9h69.6v-22.4h-40.1s-25.9 4.5-29.5 8c-4 4 0 14.4 0 14.4z"/>
                                <path class="st15" d="m48 584.6c3.4 3.5 7.1 9.7 7.6 20.2l-2.3 0.1h-2.3c-0.6-11-5-16.3-8-18.6 1.7-0.6 3.4-1.2 5-1.7z"/>
                                <rect class="st15" x="34.4" y="604.9" width="70" height="3.8"/>
                            


                            <path class="st0" d="m183.9 396.8 26.9-0.8 2.2-177c-0.6-19-16.5-34-35.5-33.4l6.4 211.2z"/>
                            
                                <path class="st0" d="m189.5 427.2c-8.8-3.3-13.3-13.2-10-22l2-5.4c3.3-8.8 13.2-13.3 22-10s13.3 13.2 10 22l-2 5.4c-3.3 8.9-13.2 13.3-22 10z"/>
                                
                                    <path class="st16" d="m201.7 431.8c-2-1.8-2.2-4.8-0.4-6.8l7.6-8.5c1.8-2 4.8-2.2 6.8-0.4s2.2 4.8 0.4 6.8l-7.6 8.5c-1.8 2-4.9 2.2-6.8 0.4z"/>
                                    <path class="st16" d="m214.1 423.8c-2.5 0.8-5.3-0.7-6-3.2l-3.4-10.9c-0.8-2.5 0.7-5.3 3.2-6 2.5-0.8 5.3 0.7 6 3.2l3.4 10.9c0.8 2.5-0.6 5.3-3.2 6z"/>
                                
                                <path class="st17" d="m181.9 431.2c-2.7-0.2-4.7-2.5-4.5-5.1l0.7-11.4c0.2-2.7 2.5-4.7 5.1-4.5 2.7 0.2 4.7 2.5 4.5 5.1l-0.7 11.4c-0.1 2.6-2.4 4.6-5.1 4.5z"/>
                                <path class="st17" d="m189.3 435.7c-2.7-0.2-4.7-2.5-4.5-5.1l0.7-11.4c0.2-2.7 2.5-4.7 5.1-4.5 2.7 0.2 4.7 2.5 4.5 5.1l-0.7 11.4c-0.1 2.6-2.4 4.6-5.1 4.5z"/>
                                <path class="st17" d="m195.4 438c-2.7-0.2-4.7-2.5-4.5-5.1l0.7-11.4c0.2-2.7 2.5-4.7 5.1-4.5 2.7 0.2 4.7 2.5 4.5 5.1l-0.6 11.3c-0.2 2.7-2.5 4.7-5.2 4.6z"/>
                                <path class="st17" d="m203.5 438.5c-2.7-0.2-4.7-2.5-4.5-5.1l0.7-11.4c0.2-2.7 2.5-4.7 5.1-4.5 2.7 0.2 4.7 2.5 4.5 5.1l-0.7 11.4c-0.1 2.6-2.4 4.6-5.1 4.5z"/>
                            


                            <path class="st0" d="m41.6 185.6c-19-0.6-34.9 14.4-35.5 33.4l2.2 177 26.9 0.8 6.4-211.2z"/>
                            
                                <path class="st0" d="m7.6 417.2-2-5.4c-3.3-8.8 1.2-18.7 10-22s18.7 1.2 22 10l2 5.4c3.3 8.8-1.2 18.7-10 22s-18.7-1.1-22-10z"/>
                                
                                    <path class="st16" d="m10.6 431.4-7.6-8.5c-1.8-2-1.6-5 0.4-6.8s5-1.6 6.8 0.4l7.6 8.5c1.8 2 1.6 5-0.4 6.8-1.9 1.8-5 1.6-6.8-0.4z"/>
                                    <path class="st16" d="m1.8 417.8 3.4-10.9c0.7-2.5 3.5-4 6-3.2 2.5 0.7 4 3.5 3.2 6l-3.4 10.9c-0.7 2.5-3.5 4-6 3.2-2.6-0.7-4-3.5-3.2-6z"/>
                                
                                <path class="st17" d="m32.1 426.7-0.7-11.4c-0.2-2.6 1.8-4.9 4.5-5.1 2.6-0.2 4.9 1.8 5.1 4.5l0.7 11.4c0.2 2.6-1.8 4.9-4.5 5.1-2.7 0.1-5-1.9-5.1-4.5z"/>
                                <path class="st17" d="m24.7 431.2-0.7-11.4c-0.2-2.6 1.8-4.9 4.5-5.1 2.6-0.2 4.9 1.8 5.1 4.5l0.7 11.4c0.2 2.6-1.8 4.9-4.5 5.1-2.7 0.1-5-1.9-5.1-4.5z"/>
                                <path class="st17" d="m18.5 433.4-0.6-11.3c-0.2-2.6 1.8-4.9 4.5-5.1 2.6-0.2 4.9 1.8 5.1 4.5l0.7 11.4c0.2 2.6-1.8 4.9-4.5 5.1-2.7 0.1-5-1.9-5.2-4.6z"/>
                                <path class="st17" d="m10.5 434-0.7-11.4c-0.2-2.6 1.8-4.9 4.5-5.1 2.6-0.2 4.9 1.8 5.1 4.5l0.7 11.4c0.2 2.6-1.8 4.9-4.5 5.1-2.7 0.1-5-1.9-5.1-4.5z"/>
                            


                            <path class="st2" d="m194.4 221.1-27.6 105.7c-3.6 14-16.2 23.7-30.7 23.7h-48.8c-14.4 0-27-9.7-30.7-23.7l-27.6-105.7c-5.2-20.1 9.9-39.7 30.7-39.7h104c20.8 0 36 19.6 30.7 39.7z"/>
                            <path class="st18" d="m181.4 239.4s-1.2 5.4-5.2 12.7c-1.1 1.8-2.2 3.8-3.7 5.6-1.4 2-3.1 3.9-5 5.7s-4.1 3.6-6.5 5.1c-2.5 1.4-5 2.8-7.8 3.6-2.7 1.1-5.6 1.2-8.4 1.6-2.8 0.2-5.6-0.3-8.3-0.4-2.6-0.6-5-1.4-7.4-2-2.3-0.8-4.2-2-6.1-2.9-0.9-0.5-1.8-0.9-2.7-1.3-0.8-0.5-1.5-1.1-2.2-1.5-1.4-1-2.5-1.8-3.5-2.5-1.9-1.4-3-2.3-3-2.3s1.2 0.6 3.4 1.6c1.1 0.5 2.4 1.1 3.9 1.9 1.4 0.8 3.2 1.5 5.1 2.1s3.9 1.5 6.1 2.1c2.2 0.4 4.5 0.9 7 1.4 2.4 0 5 0.2 7.5 0 2.5-0.5 5.1-0.5 7.5-1.6 2.5-0.6 4.8-1.9 7-3.1 2.2-1.3 4.2-2.8 6.1-4.4 1.8-1.6 3.6-3.2 5.1-5 1.6-1.6 2.8-3.4 4.1-5 2.3-3.3 4.3-6.1 5.4-8.2 0.9-2 1.6-3.2 1.6-3.2z"/>
                            <path class="st18" d="m41.7 239.4s0.6 1.2 1.8 3.3c1.1 2.1 3.1 4.9 5.4 8.2 1.3 1.5 2.5 3.3 4.1 5 1.5 1.8 3.3 3.3 5.1 5 1.9 1.6 4 3 6.1 4.4 2.2 1.2 4.5 2.5 7 3.1 2.4 1.1 5 1.1 7.5 1.6 2.5 0.2 5-0.1 7.5 0 2.4-0.5 4.8-0.9 7-1.4 2.2-0.6 4.2-1.5 6.1-2.1s3.6-1.3 5.1-2.1c1.5-0.7 2.8-1.4 3.9-1.9 2.2-1 3.4-1.6 3.4-1.6s-1.1 0.8-3 2.3c-1 0.7-2.2 1.6-3.5 2.5-0.7 0.5-1.4 1-2.2 1.5-0.9 0.4-1.7 0.9-2.7 1.3-1.9 0.9-3.9 2-6.1 2.9-2.3 0.7-4.8 1.4-7.4 2-2.7 0.1-5.4 0.6-8.3 0.4-2.8-0.4-5.7-0.5-8.4-1.6-2.8-0.8-5.3-2.2-7.8-3.6-2.4-1.5-4.5-3.3-6.5-5.1-1.9-1.9-3.6-3.7-5-5.7-1.5-1.9-2.6-3.9-3.7-5.6-4.3-7.4-5.4-12.8-5.4-12.8z"/>
                            
                                <path class="st18" d="m98.9 286.1s0.7-0.1 1.9-0.2c0.6 0.1 1.4 0.1 2.3 0.4 0.9 0.2 1.8 0.6 2.7 1.3 1.8 1.3 3.5 3.7 3.9 6.7l0.1 0.6v1.6c0 0.5-0.3 1.6-0.5 2.4-0.6 1.6-1.5 2.9-2.6 4.1-1.2 1.1-2.6 2-4.2 2.4-1.4 0.6-3.3 0.5-4.4 0.4-2.5-0.1-4.8-0.4-6.8-0.6-4-0.5-6.6-1.2-6.6-1.2s2.6-0.6 6.6-1.2c2-0.3 4.3-0.5 6.8-0.6 1.4-0.1 2.1-0.2 3.1-0.6 1-0.3 1.8-0.9 2.6-1.6 0.7-0.7 1.4-1.6 1.7-2.5 0.1-0.5 0.4-0.6 0.4-1.4l0.1-0.9v-0.2 0.1-0.5c0-2-0.8-3.9-1.9-5.2-1.1-1.4-2.5-2.2-3.5-2.7-1-0.3-1.7-0.6-1.7-0.6z"/>
                                <path class="st18" d="m98.9 304s0.7-0.1 1.9-0.2c0.6 0.1 1.4 0.1 2.3 0.4 0.9 0.2 1.8 0.6 2.7 1.3 1.8 1.3 3.5 3.7 3.9 6.7l0.1 0.6v1.6c0 0.5-0.3 1.6-0.5 2.3-0.6 1.6-1.5 2.9-2.6 4.1-1.2 1.1-2.6 2-4.1 2.4-1.4 0.6-3.3 0.5-4.4 0.4-2.5-0.1-4.8-0.4-6.8-0.6-4-0.5-6.6-1.2-6.6-1.2s2.6-0.6 6.6-1.2c2-0.3 4.3-0.5 6.8-0.6 1.4-0.1 2.1-0.2 3.1-0.6 1-0.3 1.8-0.9 2.6-1.6 0.7-0.7 1.4-1.6 1.7-2.5 0.1-0.5 0.4-0.6 0.4-1.4l0.1-1v-0.2 0.1-0.5c0-2-0.8-3.9-1.9-5.2-1.1-1.4-2.5-2.2-3.5-2.7-1.1-0.1-1.8-0.4-1.8-0.4z"/>
                            
                            
                                <path class="st18" d="m124.1 286.1-1.8 0.6c-1 0.5-2.4 1.2-3.5 2.7-1.1 1.4-1.9 3.2-1.8 5.2v0.5-0.1 0.2l0.1 1c0 0.8 0.4 0.9 0.4 1.4 0.3 0.9 1 1.8 1.7 2.5 0.8 0.7 1.6 1.3 2.6 1.6 1 0.4 1.8 0.5 3.1 0.6 2.5 0.1 4.8 0.4 6.8 0.6 4 0.5 6.6 1.2 6.6 1.2s-2.6 0.6-6.6 1.2c-2 0.3-4.3 0.5-6.8 0.6-1.1 0-3 0.1-4.4-0.4-1.5-0.4-2.9-1.4-4.2-2.4-1.1-1.2-2-2.5-2.6-4.1-0.2-0.8-0.5-1.8-0.5-2.4v-1.6l0.1-0.6c0.3-3 2-5.4 3.9-6.7 0.9-0.7 1.9-1.1 2.7-1.3 0.9-0.3 1.7-0.3 2.3-0.4 1.2 0 1.9 0.1 1.9 0.1z"/>
                                <path class="st18" d="m124.1 304-1.8 0.6c-1 0.5-2.4 1.2-3.5 2.7-1.1 1.4-1.9 3.2-1.8 5.2v0.5-0.1 0.2l0.1 0.9c0 0.8 0.4 0.9 0.4 1.4 0.3 0.9 1 1.8 1.7 2.5 0.8 0.7 1.6 1.3 2.6 1.6 1 0.4 1.8 0.5 3.1 0.6 2.5 0.1 4.8 0.4 6.8 0.6 4 0.5 6.6 1.2 6.6 1.2s-2.6 0.6-6.6 1.2c-2 0.3-4.3 0.5-6.8 0.6-1.1 0-3 0.1-4.4-0.4-1.5-0.4-2.9-1.3-4.2-2.4-1.1-1.2-2-2.5-2.6-4.1-0.2-0.8-0.5-1.8-0.5-2.4v-1.6l0.1-0.6c0.3-3 2-5.4 3.9-6.7 0.9-0.7 1.9-1.1 2.7-1.3 0.9-0.3 1.7-0.3 2.3-0.4 1.2 0.1 1.9 0.2 1.9 0.2z"/>
                            
                            <circle class="st19" cx="72.5" cy="256.2" r="5.2"/>
                            <circle class="st19" cx="148.7" cy="256.2" r="5.2"/>
                            <path class="st20" d="m58.8 456.7c-7.2-1.2-10.7-15.8-9.5-23l13-76.1 26.1 4.5-13 76.1c-1.3 7.2-9.4 19.8-16.6 18.5z"/>
                            <path class="st20" d="m97.2 456.4c-7.3 0-13.2-13.8-13.2-21.1v-77.2h26.5v77.2c-0.1 7.3-6 21.1-13.3 21.1z"/>
                            <path class="st20" d="m129.3 456.3c-7.3 0.5-14.2-12.8-14.7-20.1l-5.4-77 26.4-1.8 5.4 77c0.5 7.2-4.5 21.4-11.7 21.9z"/>
                            <path class="st20" d="m164.3 456.7c7.2-1.2 10.7-15.8 9.5-23l-13-76.1-26.1 4.5 13 76.1c1.2 7.2 9.4 19.8 16.6 18.5z"/>
                            <path class="st21" d="m164.3 454.2c6-1 8.5-15.4 7.2-22.6l-13-76.1-21.5 3.7 13 76.1c1.2 7.2 8.3 19.9 14.3 18.9z"/>
                            <path class="st21" d="m59.4 454.2c-6-1-8.5-15.4-7.2-22.6l13-76.1 21.5 3.7-13 76.1c-1.2 7.2-8.3 19.9-14.3 18.9z"/>
                            <path class="st21" d="m128.5 452.5c-6 0.3-11.7-13.1-12.1-20.4l-4.4-77.1 21.8-1.2 4.4 77.1c0.5 7.3-3.6 21.3-9.7 21.6z"/>
                            <path class="st21" d="m97.2 452.8c-6 0-10.9-13.8-10.9-21.1v-77.2h21.9v77.2c-0.1 7.4-5 21.1-11 21.1z"/>
                            <path class="st22" d="m156.2 362.3h-88.9c-4.9 0-8.9-4-8.9-8.9v-12.1c0-4.9 4-8.9 8.9-8.9h88.9c4.9 0 8.9 4 8.9 8.9v12.1c0 4.9-4 8.9-8.9 8.9z"/>
                            <path class="st21" d="m153.7 360.3h-84.5c-4.4 0-8-3.6-8-8v-9.7c0-4.4 3.6-8 8-8h84.5c4.4 0 8 3.6 8 8v9.7c0.1 4.4-3.5 8-8 8z"/>

                    </svg>
                `;
                    
                //#endregion
                
                const img = new Image();
                img.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgEnemy)}`;
                
                ctx.drawImage(img, this.x, this.y - camera.y, this.width, this.height);
            };

            handle(){
                if (rectangularCollisionDetection(player, this)) {
                    world.isRunning = false;
                };
                if (rectangularCollisionDetection(spear, this)) {
                    world.enemyCount ++;
                    deleteAsset(this);
                };  
            };

        };

        let enemyIndex = 0;

        function createEnemies(platform){
            enemiesArray.push(new Enemy(platform));
            enemyIndex++;
        };

        function handleEnemies(){
            for (let i = 0; i < enemiesArray.length; i++) {
                enemiesArray[i].draw();
                enemiesArray[i].handle();
            };
        };

        //#endregion

        //#region CollisionDetectors

        function rectangularCollisionDetection(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
            rect1.x + rect1.width > rect2.x &&
            rect1.y < rect2.y + rect2.height &&
            rect1.y + rect1.height > rect2.y;
        };

        function platformCollisionDetection(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
            rect1.x + rect1.width > rect2.x &&
            rect1.y < rect2.y + rect2.height + 5 &&
            rect1.y + rect1.height - 5 > rect2.y;
        };

        function trambolineCollisionDetection(rect1, rect2) {
            return rect1.y + rect1.height / 2 >= rect2.y &&
            rect1.y + rect1.height / 2 <= rect2.y + rect2.height &&
            rect1.x <= rect2.x + rect2.width && rect1.x + rect1.width >= rect2.x;
        };

        function circularCollisionDetection(rect, circle) {
            let closestX = Math.max(rect.x, Math.min(circle.x, rect.x + rect.width));
            let closestY = Math.max(rect.y, Math.min(circle.y, rect.y + rect.height));
            
            let distX = circle.x - closestX;
            let distY = circle.y - closestY;
            let distance = Math.sqrt(distX * distX + distY * distY);
            
            return distance <= circle.radius;
        };

        //#endregion

        //#region DeletingSystem
        
        function deletePlatform(platform) {
            
            if (platform.type == 'enemy') {
                const foundIndex =  enemiesArray.findIndex(enemy => areEqual(enemy, platform));
                if (foundIndex >= 0) {
                    enemiesArray.splice(foundIndex, 1);
                };
            } else if (platform.type == 'coin') {
                const foundIndex = coinsArray.findIndex(coin => areEqual(coin, platform));
                if (foundIndex >= 0) {
                    coinsArray.splice(foundIndex, 1);
                };
            } else if (platform.type == 'tramboline') {
                const foundIndex = trambolinesArray.findIndex(tramboline => areEqual(tramboline, platform));
                if (foundIndex >= 0) {
                    trambolinesArray.splice(foundIndex, 1);
                };
            } else if (platform.type == 'booster') {
                const foundIndex = boostersArray.findIndex(booster => areEqual(booster, platform));
                if (foundIndex >= 0 && !boostersArray[foundIndex].startAnim ) {
                    boostersArray.splice(foundIndex, 1);
                };
            } else if (platform.type == 'heart') {
                const foundIndex = heartsArray.findIndex(heart => areEqual(heart, platform));
                if (foundIndex >= 0) {
                    heartsArray.splice(foundIndex, 1);
                };
            } else if (platform.type == 'particle') {
                const foundIndex = particlesArray.findIndex(particle => areEqual(particle, platform));
                if (foundIndex >= 0) {
                    particlesArray.splice(foundIndex, 1);
                };
            };
            const foundIndex = platformsArray.findIndex(p1 => areEqual(platform, p1));
            platformsArray.splice(foundIndex, 1);
        };
        
        function deleteAsset(asset) {
    
            if (asset.type == "coin") {
                const foundIndex = coinsArray.findIndex(coin => areEqual(coin, asset));
                coinsArray.splice(foundIndex, 1);
                coinIndex--;
                
            } else if (asset.type == "tramboline") {
                const foundIndex = trambolinesArray.findIndex(tramboline => areEqual(tramboline, asset));
                trambolinesArray.splice(foundIndex, 1);
                trambolineIndex--;
                
            } else if (asset.type == "enemy") {
                const foundIndex = enemiesArray.findIndex(enemy => areEqual(enemy, asset));
                enemiesArray.splice(foundIndex, 1);
                enemyIndex--;
                
            } else if (asset.type == "booster") {
                const foundIndex = boostersArray.findIndex(booster => areEqual(booster, asset));
                boostersArray.splice(foundIndex, 1);
                boosterIndex--;
                
            } else if (asset.type == "heart") {
                const foundIndex = heartsArray.findIndex(heart => areEqual(heart, asset));
                heartsArray.splice(foundIndex, 1);
                heartIndex--;
                
            } else if (asset.type == "particle") {
                const foundIndex = particlesArray.findIndex(particle => areEqual(particle, asset));
                particlesArray.splice(foundIndex, 1);
                particleIndex--;
            };
        };
        
        function deleteBackground(background) {
            const foundIndex = backgroundsArray.findIndex(bg2 => areEqual(bg2, background));
            backgroundsArray.splice(foundIndex, 1);
        };

        //#endregion

        //#region AddtionalFunctions

        function areEqual(obj1, obj2) {
            if (obj1.id === obj2.id) {
                return true;
            }
            return false;
        };

        function handleHeartIcons() {
            const cloneIcons = document.querySelectorAll('#clone');
            if (world.lifeLeft > 0) {
                cloneIcons.forEach((cloneIcon, index) => {
                    if (index > 0) {
                        cloneIcon.parentNode.removeChild(cloneIcon);
                    }
                });
                for (let index = 0; index < world.lifeLeft; index++) {
                    const newIcon = heartIcon.cloneNode(true)
                    newIcon.classList.remove('none');
                    newIcon.id = 'clone';
                    newIcon.setAttribute('transform', `translate(${550 * index - 1350})`);
                    newIcon.setAttribute('fill', `red`);
                    svg.appendChild(newIcon);
                };
            }; 
        };
               
        function findLowestPlatform() {
            
            const keyToExclude = ["isMoving", "particle", "breakable"];
            let filteredContainer = platformsArray
            .filter(obj => !keyToExclude.some(key => obj.hasOwnProperty(key)))
            
            lowestPlatform = filteredContainer.reduce((lowestPlatform, currentPlatform) => {
                return currentPlatform.y > lowestPlatform.y ? currentPlatform : lowestPlatform; 
            });
        };

        function updateMinValue(newValue) {
            minValue = Math.min(minValue, newValue);
            platformSpawnController();
        };

        function platformSpawnController() {
            if (runOnce) {
                updatePlatform = minValue - 225;
                runOnce = false;
            };
            if(updatePlatform > minValue && !runOnce) {
                updatePlatform = minValue - 225;
                while (platformsArray.length < 40) {
                    platformSpawner();
                };
            };
        };

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        };

        //#endregion

        //#region TouchScreenFunctions
     
        interface.addEventListener('touchstart', function (event) {

            const tapX = event.touches[0].clientX - canvas.getBoundingClientRect().left;

            player.isDragging = true;
            world.dragOffsetX = player.x - tapX;
        }, 
        {passive: true});

        interface.addEventListener('touchmove', function (event) {

            if (player.isDragging && !player.freeze) {
                const tapX = event.touches[0].clientX - canvas.getBoundingClientRect().left;

                player.x = tapX + world.dragOffsetX;
                spear.x = player.x - player.spearOffset;

                if (player.x < 0) {
                    player.x += canvas.width;
                    spear.x += canvas.width;
                } else if (player.x > canvas.width) {
                    player.x -= canvas.width;
                    spear.x -= canvas.width;
                };
            };
        },
        {passive: true});

        interface.addEventListener('touchend', function () {
            player.isDragging = false;
        },
         {passive: true});

        //#endregion
        
        //#region GameStart

        startButton.addEventListener('click', () => {
            debugger;
            startButton.classList.add('none');
            interface.classList.remove('none');
            scoreUI.classList.remove('none');

            world.isRunning = true;
            minValue = Infinity;
            camera.y = 0;
        
            statIndex = 0;
            particleIndex = 0;
            trambolineIndex = 0;
            coinIndex = 0;
            boosterIndex = 0;
            enemyIndex = 0;
            heartIndex = 0;
            indexParam = -1;
            yRate = -1;

            platformsArray = [];
            particlesArray = [];
            heartsArray = [];
            enemiesArray = [];
            trambolinesArray = [];
            coinsArray = [];
            boostersArray = [];

            player.x = (canvas.width / 2) - 7.5;
            player.y = -50;
            spear.x = player.x - player.spearOffset;
            player.freeze = false;
            player.isDragging = false;
            player.trambolineUsed = false;
            player.isFlying = false;
            player.jumpStrength = 5;
            player.jumpDuration = 100;
            player.jumpFrame = 0;
            player.gravity = world.gravity * 10;

            camera.y = 0;
            
            world.score = 0;
            world.coinCount = 0;
            world.enemyCount = 0;

            scoreUI.textContent = `${world.score}`;

            minValue = Infinity;

            world.lifeLeft = 3;

            clearCanvas();
            for (let i = 0; i < 2; i++) {
                createBackground();
            };
            for (let i = 0; i < 10; i++) {
                platformSpawner();
            };
            animate();
        });
        
        //#endregion
        
        //#region Respawn&GameOver
        
        function respawn() {
            
            player.freeze = false;
            player.isDragging = false;
            player.trambolineUsed = false;
            player.isFlying = false;
            player.jumpStrength = 5;
            player.jumpDuration = 100;
            player.jumpFrame = 0;
            
            findLowestPlatform();
            
            if (lowestPlatform.type == 'enemy') {
                
                const foundIndex = enemiesArray.findIndex(enemy => areEqual(enemy, lowestPlatform));
                enemiesArray.splice(foundIndex, 1);
                enemiesArray.splice(foundIndex, 2);
                
            } else if (lowestPlatform.type == 'coin') {
                
                const foundIndex = coinsArray.findIndex(coin => areEqual(coin, lowestPlatform));
                coinsArray.splice(foundIndex, 1);
                
            } else if (lowestPlatform.type == 'booster') {
                
                const foundIndex = boostersArray.findIndex(booster => areEqual(booster, lowestPlatform));
                boostersArray.splice(foundIndex, 1);
                
            } else if (lowestPlatform.type == 'heart') {
                
                const foundIndex = heartsArray.findIndex(heart => areEqual(heart, lowestPlatform));
                heartsArray.splice(foundIndex, 1);
            };
            
            setTimeout(() => {
                player.y = lowestPlatform.y - 50;
                player.x = lowestPlatform.x + player.width;
                spear.x = player.x - player.spearOffset;
            }, 250);
            
            world.lifeLeft --;
        };
        
        function gameOver() {
            startButton.classList.remove('none');
            startButton.textContent = 'Play Again';
            
            platformsArray = [];
            trambolinesArray = [];
            coinsArray= [];
            enemiesArray = [];
            heartsArray = [];
            boostersArray= [];
            particlesArray = [];
            backgroundsArray = [];
        };
        
        //#endregion
        
        //#region Animate
        
        function animate() {

            scoreUI.textContent = `${world.score}`;

            if ( camera.y + canvas.height < player.y) {
                world.isRunning = false;
            };

            if (world.isRunning) {
                requestAnimationFrame(animate);
            } else {
                cancelAnimationFrame(animate);
                
                if ( world.lifeLeft > 1 ) { 
                    respawn();
                    setTimeout(() => {
                        world.isRunning = true;
                        animate();
                    }, 250);
                    
                } else {
                    gameOver();
                };
            };

            updateWorld();
            handleBackground();
            handleCamera();
            handlePlayer();
            handlePlatforms();
            handleTrambolines();
            handleParticles();
            handleCoins();
            handleBoosters();
            handleHearts(); 
            handleHeartIcons();
            handleEnemies();
            updateMinValue(player.y);
        };

        //#endregion
        
    });
</script>